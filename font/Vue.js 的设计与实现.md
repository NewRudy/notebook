# Vue.js 的设计与实现

## 1. 框架设计概览

### 1.1 权衡的艺术

- 声明式代码的性能不优于命令式代码的性能，因为声明式代码会比命令式代码多出找出差异的性能消耗，框架本身就是封装了命令式代码才实现了面向用户的声明式。那为什么 Vue.js 还要选择声明式的设计方案呢？因为声明式代码的可维护性更强，命令式代码需要维护目标的整个过程，包括手动完成 DOM 元素的创建、更新和删除等工作。而声明式代码展示的就是我们要的结果，看上去更直观，并且做的过程让 Vue.js 封装好了。Vue.js 做的就是在保持可维护性的同时让性能损失最小化
- 虚拟 DOM 能够让我们在写声明式代码的情况下，保证我们应用程序的下限。虚拟 DOM 创建页面的过程分为两步：第一步是创建 JavaScript 对象，对真实 DOM 的描述；第二步是递归的遍历虚拟 DOM 并创建真实的 DOM。
- innerHTML 更新页面是重新构建 HTML 字符串，再重新设置 DOM 元素的 innerHTML 属性（销毁所有旧的 DOM 元素，再全量创建一个新的 DOM 元素），性能因素与模板的大小有关。但是虚拟 DOM 在 JavaScript 层面的运算要比创建页面时多出一个 Diff 算法，但是只更新必要的 DOM，性能因素与数据变化量有关。 innerHTML < 虚拟 DOM < 原生 JavaScript
- Render（运行时） -> Compiler、Render（编译 + 运行时） -> Compiler（编译时），如果是纯运行时，我们没有办法分析用户提供的内容，也就不可以做进一步的优化；如果是纯编译时，可能性能会更好，但是会损坏灵活性，即用户提供的内容必须编译后才能使用；Vue.js 仍然保持了运行时 + 编译时的架构，在保持灵活性的基础上尽可能的优化

### 1.2 框架设计的核心要素

