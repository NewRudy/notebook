
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>JavaScript · notebook|blog</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="wutian">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Node.html" />
    
    
    <link rel="prev" href="Java.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    bigData
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../bigData/BigData-Notes.html">
            
                <a href="../bigData/BigData-Notes.html">
            
                    
                    BigData-Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../bigData/Flink.html">
            
                <a href="../bigData/Flink.html">
            
                    
                    Flink.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../bigData/Google 三大核心技术及其衍生.html">
            
                <a href="../bigData/Google 三大核心技术及其衍生.html">
            
                    
                    Google 三大核心技术及其衍生.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../bigData/Hadoop.html">
            
                <a href="../bigData/Hadoop.html">
            
                    
                    Hadoop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../bigData/MinIO.html">
            
                <a href="../bigData/MinIO.html">
            
                    
                    MinIO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../bigData/MongoDB.html">
            
                <a href="../bigData/MongoDB.html">
            
                    
                    MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../bigData/Nginx.html">
            
                <a href="../bigData/Nginx.html">
            
                    
                    Nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../bigData/Spark.html">
            
                <a href="../bigData/Spark.html">
            
                    
                    Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../bigData/大数据.html">
            
                <a href="../bigData/大数据.html">
            
                    
                    大数据
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    course
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../course/Hands-On Data Visualization.html">
            
                <a href="../course/Hands-On Data Visualization.html">
            
                    
                    Hands-On Data Visualization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../course/深入理解计算机系统.html">
            
                <a href="../course/深入理解计算机系统.html">
            
                    
                    深入理解计算机系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../course/图说设计模式.html">
            
                <a href="../course/图说设计模式.html">
            
                    
                    图说设计模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../dataStructure/leetcode算法教程.html">
            
                <a href="../dataStructure/leetcode算法教程.html">
            
                    
                    leetcode算法基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../dataStructure/leetcode算法教程.html">
            
                <a href="../dataStructure/leetcode算法教程.html">
            
                    
                    leetcode算法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" >
            
                <span>
            
                    
                    simple and young
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../dataStructure/simple/文件操作.html">
            
                <a href="../dataStructure/simple/文件操作.html">
            
                    
                    文件操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../dataStructure/simple/栈和队列.html">
            
                <a href="../dataStructure/simple/栈和队列.html">
            
                    
                    栈和队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../dataStructure/simple/链表.html">
            
                <a href="../dataStructure/simple/链表.html">
            
                    
                    链表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../dataStructure/simple/字符串.html">
            
                <a href="../dataStructure/simple/字符串.html">
            
                    
                    字符串
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../dataStructure/simple/排序.html">
            
                <a href="../dataStructure/simple/排序.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../dataStructure/simple/树.html">
            
                <a href="../dataStructure/simple/树.html">
            
                    
                    树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.7" data-path="../dataStructure/simple/图.html">
            
                <a href="../dataStructure/simple/图.html">
            
                    
                    图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.8" data-path="../dataStructure/simple/递归.html">
            
                <a href="../dataStructure/simple/递归.html">
            
                    
                    递归
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" >
            
                <span>
            
                    
                    try again
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../dataStructure/leetcode算法教程.html">
            
                <a href="../dataStructure/leetcode算法教程.html">
            
                    
                    leetcode 算法教程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    font
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../font/React.html">
            
                <a href="../font/React.html">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../font/Vue.html">
            
                <a href="../font/Vue.html">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../font/WebSocket.html">
            
                <a href="../font/WebSocket.html">
            
                    
                    WebSocket
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../font/被删的前端游乐园.html">
            
                <a href="../font/被删的前端游乐园.html">
            
                    
                    被删的前端游乐园
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../font/浏览器.html">
            
                <a href="../font/浏览器.html">
            
                    
                    浏览器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../font/图解HTTP.html">
            
                <a href="../font/图解HTTP.html">
            
                    
                    图解HTTP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    gis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../gis/GDAL.html">
            
                <a href="../gis/GDAL.html">
            
                    
                    GDAL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../gis/Geomorphology-Based Hydrological Model.html">
            
                <a href="../gis/Geomorphology-Based Hydrological Model.html">
            
                    
                    Geomorphology-Based Hydrological Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../gis/GeoserverModel.md">
            
                <span>
            
                    
                    Geoserver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../gis/GIS标准.html">
            
                <a href="../gis/GIS标准.html">
            
                    
                    GIS标准
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../gis/GIS算法基础.html">
            
                <a href="../gis/GIS算法基础.html">
            
                    
                    GIS算法基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../gis/Google Earth Engine.html">
            
                <a href="../gis/Google Earth Engine.html">
            
                    
                    Google Earth Engine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../gis/Landsat影像格式.html">
            
                <a href="../gis/Landsat影像格式.html">
            
                    
                    Landsat影像格式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../gis/NetCDF.html">
            
                <a href="../gis/NetCDF.html">
            
                    
                    NetCDF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../gis/OSMnx.html">
            
                <a href="../gis/OSMnx.html">
            
                    
                    OSMnx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../gis/城市规划中人性、人文和人本的关系.html">
            
                <a href="../gis/城市规划中人性、人文和人本的关系.html">
            
                    
                    城市规划中人性、人文和人本的关系
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="../gis/地理大数据探索.html">
            
                <a href="../gis/地理大数据探索.html">
            
                    
                    地理大数据探索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="../gis/地理大数据可视化.md">
            
                <span>
            
                    
                    地理大数据可视化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="../gis/地理信息安全技术与进展心得体会.html">
            
                <a href="../gis/地理信息安全技术与进展心得体会.html">
            
                    
                    地理信息安全技术与进展心得体会
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="../gis/面向地理共享与集成的数据适配方法研究.html">
            
                <a href="../gis/面向地理共享与集成的数据适配方法研究.html">
            
                    
                    面向地理共享与集成的数据适配方法研究
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="../gis/太阳辐射模型的回顾.html">
            
                <a href="../gis/太阳辐射模型的回顾.html">
            
                    
                    太阳辐射模型的回顾
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="../gis/太阳能模型筛选系统.html">
            
                <a href="../gis/太阳能模型筛选系统.html">
            
                    
                    太阳能模型筛选系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.17" data-path="../gis/遥感技术解决地理问题.html">
            
                <a href="../gis/遥感技术解决地理问题.html">
            
                    
                    遥感技术解决地理问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.18" data-path="../gis/最小二乘法.html">
            
                <a href="../gis/最小二乘法.html">
            
                    
                    最小二乘法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    languages
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Go.html">
            
                <a href="Go.html">
            
                    
                    Go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="Java.html">
            
                <a href="Java.html">
            
                    
                    Java
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.3" data-path="JavaScript.html">
            
                <a href="JavaScript.html">
            
                    
                    JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="Node.html">
            
                <a href="Node.html">
            
                    
                    Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="Python.html">
            
                <a href="Python.html">
            
                    
                    Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="TypeScript.html">
            
                <a href="TypeScript.html">
            
                    
                    TypeScript
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    skills
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../skills/Docker.html">
            
                <a href="../skills/Docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../skills/Git.html">
            
                <a href="../skills/Git.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../skills/Linux.html">
            
                <a href="../skills/Linux.html">
            
                    
                    Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../skills/画图.html">
            
                <a href="../skills/画图.html">
            
                    
                    画图
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    temp
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../temp/TestForS.html">
            
                <a href="../temp/TestForS.html">
            
                    
                    TestForS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../temp/文件系统的设计原理.html">
            
                <a href="../temp/文件系统的设计原理.html">
            
                    
                    文件系统的设计原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    interview
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../interview/前端_面试.html">
            
                <a href="../interview/前端_面试.html">
            
                    
                    前端_面试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../interview/前端_笔试.html">
            
                <a href="../interview/前端_笔试.html">
            
                    
                    前端_笔试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../interview/个人面经.html">
            
                <a href="../interview/个人面经.html">
            
                    
                    个人面经
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >JavaScript</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="javascripttemp">JavaScript_temp</h1>
<p>[toc]</p>
<p>&#x5982;&#x679C;&#x5728;&#x6570;&#x5B66;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;NaN&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4F1A;&#x4E00;&#x76F4;&#x4F20;&#x64AD;&#x4E0B;&#x53BB;</p>
<p>&#x811A;&#x672C;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x81F4;&#x547D;&#x9519;&#x8BEF;&#x5C31;&#x505C;&#x6B62;&#xFF0C;&#x5927;&#x4E0D;&#x4E86;&#x4E00;&#x4E2A;NaN</p>
<p>alert prompt  confirm</p>
<p>&#x663E;&#x793A;&#x7684;&#x8F6C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32; String(value)      &#x9690;&#x5F0F;&#x7684;&#x8F6C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32; alert(value)</p>
<p>&#x5BF9;undefined&#x8FDB;&#x884C;&#x6570;&#x5B57;&#x8F6C;&#x6362;&#x65F6;&#x5019;&#xFF0C;&#x7ED3;&#x679C;&#x4E3A;NaN&#xFF0C;&#x800C;&#x4E0D;&#x662F;0</p>
<p>&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x5019;&#x6CE8;&#x610F;&#x662F;&#x5426;&#x53D1;&#x751F;&#x4E86;&#x7C7B;&#x578B;&#x8F6C;&#x6362;</p>
<ul>
<li>&#x9664;&#x4E86;&#x4E25;&#x683C;&#x76F8;&#x7B49; <code>===</code> &#x5916;&#xFF0C;&#x5176;&#x4ED6;&#x4F46;&#x51E1;&#x662F;&#x6709; <code>undefined/null</code> &#x53C2;&#x4E0E;&#x7684;&#x6BD4;&#x8F83;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x9700;&#x8981;&#x683C;&#x5916;&#x5C0F;&#x5FC3;&#x3002;</li>
<li>&#x9664;&#x975E;&#x4F60;&#x975E;&#x5E38;&#x6E05;&#x695A;&#x81EA;&#x5DF1;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x5426;&#x5219;&#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x4F7F;&#x7528; <code>&gt;= &gt; &lt; &lt;=</code> &#x53BB;&#x6BD4;&#x8F83;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x4E3A; <code>null/undefined</code> &#x7684;&#x53D8;&#x91CF;&#x3002;&#x5BF9;&#x4E8E;&#x53D6;&#x503C;&#x53EF;&#x80FD;&#x662F; <code>null/undefined</code> &#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x8BF7;&#x6309;&#x9700;&#x8981;&#x5206;&#x522B;&#x68C0;&#x67E5;&#x5B83;&#x7684;&#x53D6;&#x503C;&#x60C5;&#x51B5;&#x3002;</li>
</ul>
<p>&apos;2&apos; &gt; &apos;12&apos;  true</p>
<p>js &#x7684; || &#x80FD;&#x591F;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x771F;&#x503C;&#x6216;&#x8005;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5047;&#x503C;</p>
<p>&#x4E24;&#x4E2A;&#x975E;&#x8FD0;&#x7B97; <code>!!</code> &#x6709;&#x65F6;&#x5019;&#x7528;&#x6765;&#x5C06;&#x67D0;&#x4E2A;&#x503C;&#x8F6C;&#x5316;&#x4E3A;&#x5E03;&#x5C14;&#x7C7B;&#x578B;</p>
<p>labelName</p>
<p><strong>&#x7A7A;&#x503C;&#x7684;</strong> <code>return</code> <strong>&#x6216;&#x6CA1;&#x6709;</strong> <code>return</code> <strong>&#x7684;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;</strong> <code>undefined</code></p>
<p>&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5E94;&#x8BE5;&#x7B80;&#x77ED;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x529F;&#x80FD;</p>
<p>&#x5728;&#x5176;&#x4ED6;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;&#x53EA;&#x8981;&#x63D0;&#x5230;&#x51FD;&#x6570;&#x7684;&#x540D;&#x79F0;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x6267;&#x884C;&#xFF0C;&#x4F46; JavaScript &#x53EF;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#x3002;</p>
<p>&#x56DE;&#x8C03;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F20;&#x9012;&#x4E86;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x53D8;&#x91CF;&#xFF1F;</p>
<p><strong>&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x662F;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x201C;&#x884C;&#x4E3A;&#x201D;&#x7684;&#x503C;</strong></p>
<p>&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x884C;&#x4E3A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x53D8;&#x91CF;&#x4E4B;&#x95F4;&#x4F20;&#x9012;&#x5B83;</p>
<p>&#x51FD;&#x6570;&#x58F0;&#x660E;&#x662F;&#x5728;js&#x51C6;&#x5907;&#x811A;&#x672C;&#x9636;&#x6BB5;&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#x4F7F;&#x7528;&#x5B83;</p>
<p>&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x5BF9;&#x4E8E;&#x7B80;&#x5355;&#x884C;&#x4E3A;&#x6765;&#x8BF4;&#x5F88;&#x65B9;&#x4FBF;</p>
<p>&#x81EA;&#x52A8;&#x5206;&#x53F7;&#x63D2;&#x5165;&#xFF0C;&#x6709;&#x4E9B;&#x65F6;&#x5019;&#x5B83;&#x5E76;&#x4E0D;&#x81EA;&#x52A8;&#x63D2;&#x5165;&#xFF0C;&#x4EE3;&#x7801;&#x5757;&#x4E4B;&#x540E;&#x4E0D;&#x9700;&#x8981;&#x5206;&#x53F7;</p>
<p><img src="../image/image-20201223225900084.png" alt="image-20201223225900084"></p>
<p><img src="../image/image-20201223230334914.png" alt="image-20201223230334914"></p>
<p>&#x81EA;&#x63CF;&#x8FF0;&#x578B;&#x4EE3;&#x7801;</p>
<p>$event</p>
<p>&#x8BA1;&#x7B97;&#x5C5E;&#x6027;  &#x65B9;&#x62EC;&#x53F7;[]</p>
<p>&#x5C5E;&#x6027;&#x540D;&#x7B80;&#x5199;</p>
<p>&#x5BF9;&#x8C61;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x4EFB;&#x4F55;&#x5C5E;&#x6027;&#xFF0C;&#x5373;&#x4F7F;&#x8BE5;&#x5C5E;&#x6027;&#x4E0D;&#x5B58;&#x5728;&#x4E5F;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;</p>
<p>&#x4E00;&#x822C;&#x7528;in &#x6765;&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x800C;&#x4E0D;&#x662F;undefined</p>
<p>&#x8D4B;&#x503C;&#x4E86;&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x91CF;&#x5B58;&#x50A8;&#x7684;&#x4E0D;&#x662F;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#xFF0C;&#x800C;&#x662F;&#x8BE5;&#x5BF9;&#x8C61;&apos;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5730;&#x5740;&apos;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#x5C31;&#x662F;&#x5BF9;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;</p>
<p>&#x4EC5;&#x5F53;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x4E3A;&#x540C;&#x4E00;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4EEC;&#x624D;&#x53EB;&#x76F8;&#x7B49;</p>
<p>Object.assign(dest, [src1, src2, src3...])</p>
<p>&#x6DF1;&#x5C42;&#x514B;&#x9686;&#x6307;&#x7684;&#x662F;&#x5BF9;&#x8C61;&#x91CC;&#x9762;&#x7684;&#x5BF9;&#x8C61;&#x4E5F;&#x62F7;&#x8D1D;&#x8FC7;&#x53BB;</p>
<p>&#x5783;&#x573E;&#x56DE;&#x6536;&#x673A;&#x5236;&#xFF0C;&#x53EF;&#x8FBE;&#x6027;</p>
<p>&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x7684;&#x51FD;&#x6570;&#x79F0;&#x4E3A;&#x65B9;&#x6CD5;</p>
<p>&#x5728;js&#x4E2D;&#xFF0C;this&#x5173;&#x952E;&#x5B57;&#x548C;&#x5176;&#x5B83;&#x591A;&#x6570;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E0D;&#x540C;&#xFF0C;js&#x4E2D;&#x7684;this&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x4EFB;&#x4F55;&#x51FD;&#x6570;&#xFF0C;&#x5373;&#x4F7F;&#x4ED6;&#x4E0D;&#x662F;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;this&#x7684;&#x503C;&#x662F;&#x5728;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x65F6;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;</p>
<p>this&#x7684;&#x5E76;&#x4E0D;&#x53D6;&#x51B3;&#x4E8E;&#x65B9;&#x6CD5;&#x58F0;&#x660E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;&#x662F;&#x53D6;&#x51B3;&#x4E8E;&#x70B9;&#x7B26;&#x53F7;&#x524D;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x5BF9;&#x8C61;&#xFF08;this&#x7684;&#x91CD;&#x8981;&#x6027;&#x5C31;&#x662F;c&#x91CC;&#x9762;&#x7684;&#x6307;&#x9488;</p>
<p>&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x6CA1;&#x6709;&#x81EA;&#x5DF1;&#x7684;this&#xFF0C;&#x5B83;&#x53D6;&#x51B3;&#x4E8E;&#x5916;&#x90E8;&#x7684;&#x6B63;&#x5E38;&#x51FD;&#x6570;</p>
<p>this&#x901A;&#x8FC7;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x624D;&#x6709;&#x610F;&#x4E49;</p>
<p>&#x7406;&#x89E3; <a href="https://zhuanlan.zhihu.com/p/42145138" target="_blank">this</a>&#xFF1A;</p>
<ul>
<li>this &#x6C38;&#x8FDC;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;</li>
<li>this&#x7684;&#x6307;&#x5411;&#x5B8C;&#x5168;&#x53D6;&#x51B3;&#x4E8E;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x4F4D;&#x7F6E;</li>
</ul>
<p>js &#x4E2D;&#x4E00;&#x5207;&#x90FD;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x51FD;&#x6570;&#x5B9E;&#x5728;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0B;&#x8FD0;&#x884C;&#xFF0C;&#x800C;this&#x5C31;&#x662F;&#x51FD;&#x6570;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x6240;&#x5728;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x73AF;&#x5883;&#xFF09;&#xFF0C;&#x4F46;&#x662F;js&#x652F;&#x6301;&#x73AF;&#x5883;&#x7684;&#x52A8;&#x6001;&#x5207;&#x6362;&#xFF0C;&#x7B80;&#x5355;&#x7684;&#x8BF4;&#x5C31;&#x662F; this &#x7684;&#x6307;&#x5411;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x5F88;&#x96BE;&#x4E8B;&#x5148;&#x786E;&#x5B9A;&#x5230;&#x5E95;&#x6307;&#x5411;&#x54EA;&#x91CC;</p>
<p>&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#xFF1A;&#x884C;&#x5185;&#x7ED1;&#x5B9A;&#xFF0C;&#x52A8;&#x6001;&#x7ED1;&#x5B9A;&#xFF0C;&#x4E8B;&#x4EF6;&#x76D1;&#x542C;</p>
<p>&#x6784;&#x9020;&#x51FD;&#x6570;&#x4EE5;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x5F00;&#x5934;&#xFF0C;&#x53EA;&#x80FD;&#x6709;&apos;new&apos; &#x64CD;&#x4F5C;&#x7B26;&#x6765;&#x6267;&#x884C;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4F7F;&#x7528;new&#x64CD;&#x4F5C;&#x7B26;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x5B83;&#x6309;&#x7167;&#x6B65;&#x9AA4;&#x4E3A;&#xFF1A;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x521B;&#x5EFA;&#x5E76;&#x5206;&#x914D;&#x7ED9;this&#xFF1B;&#x51FD;&#x6570;&#x4F53;&#x6267;&#x884C;&#xFF0C;&#x901A;&#x5E38;&#x5B83;&#x4F1A;&#x4FEE;&#x6539;this&#xFF0C;&#x4E3A;&#x5176;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x5C5E;&#x6027;&#xFF1B;&#x8FD4;&#x56DE;this&#x7684;&#x503C;&#x3002;&#x9690;&#x5F0F;&#x521B;&#x5EFA;&#xFF0C;&#x9690;&#x5F0F;&#x8FD4;&#x56DE;</p>
<p>&#x53EF;&#x9009;&#x94FE;  &#xFF1F;.  &#x4F7F;&#x7528;&#x5728;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5730;&#x65B9;</p>
<p>symbol &#x7C7B;&#x578B;    symbol&#x4E0D;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x8F6C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;</p>
<p>&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#x952E;&#x53EA;&#x80FD;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x6216;&#x5219;symbol&#x7C7B;&#x578B;&#xFF0C;symbol&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x88AB;&#x91CD;&#x5199;</p>
<p>symbol&#x5C5E;&#x6027;&#x4E0D;&#x53C2;&#x4E0E;for...in&#x5FAA;&#x73AF;</p>
<p>&#x9664;null &#x548C; undefined &#x4EE5;&#x5916;&#x7684;&#x539F;&#x59CB;&#x7C7B;&#x578B;&#x90FD;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x6709;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4ECE;&#x5F62;&#x5F0F;&#x6765;&#x8BF4;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x4E34;&#x65F6;&#x5BF9;&#x8C61;&#x5DE5;&#x4F5C;</p>
<p>Math.floor   Math.ceil    Math.round</p>
<p>&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x6574;&#x6570;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5BB9;&#x6613;&#x8FB9;&#x7F18;&#x503C;&#x7684;&#x6982;&#x7387;&#x4F1A;&#x4F4E;&#x4E24;&#x500D;</p>
<p>js&#x4E2D;&#x5B57;&#x7B26;&#x4E32;&#x4E0D;&#x53EF;&#x66F4;&#x6539;</p>
<p>str.indexOf()   &#x66F4;&#x73B0;&#x4EE3;&#x7684;&#x65B9;&#x6CD5;&#x662F;  str.includes(substr, pos)  </p>
<p>str.startsWith(str)   str.endsWith(str)    str.slice(start [,end])  str.substr(start, [, length])    </p>
<p>&#x5BF9;&#x8C61;&#x80FD;&#x591F;&#x5B58;&#x50A8;&#x952E;&#x503C;&#x96C6;&#x5408;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x5230;&#x4E86;&#x6570;&#x7EC4;&#x4E86;</p>
<p>&#x6570;&#x7EC4;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x5143;&#x7D20; pop  push shift unshift    &#x4ECE;&#x672C;&#x8D28;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x6570;&#x7EC4;&#x4ECD;&#x7136;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;</p>
<p>&#x5C06;&#x6570;&#x7EC4;&#x89C6;&#x4E3A;&#x6709;&#x5E8F;&#x6570;&#x636E;&#x7684;&#x7279;&#x6B8A;&#x7ED3;&#x6784;</p>
<p>for... in  &#x5FAA;&#x73AF;&#x4F1A;&#x904D;&#x5386;&#x6240;&#x6709;&#x6570;&#x7EC4;&#x6240;&#x6709;&#x5C5E;&#x6027;&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x8FD9;&#x4E9B;&#x6570;&#x5B57;&#x5C5E;&#x6027;   &#x7C7B;&#x6570;&#x7EC4;&#x5BF9;&#x8C61;</p>
<p>&#x4E0D;&#x5E94;&#x8BE5;&#x7528; for ... in &#x5904;&#x7406;&#x6570;&#x7EC4;</p>
<p>&#x6211;&#x4EEC;&#x4FEE;&#x6539;&#x6570;&#x7EC4;&#x7684;&#x65F6;&#x5019;&#xFF0C;length &#x5C5E;&#x6027;&#x4F1A;&#x81EA;&#x52A8;&#x66F4;&#x65B0;</p>
<p>&#x6570;&#x7EC4;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x65B9;&#x62EC;&#x53F7;</p>
<p>&#x6570;&#x7EC4;&#x6709;&#x81EA;&#x5DF1;&#x7684; toString &#x5B9E;&#x73B0;&#xFF0C;&#x8FD4;&#x56DE;&#x5DF2;&#x9017;&#x53F7;&#x9694;&#x5F00;&#x7684;&#x5143;&#x7D20;&#x5217;&#x8868;</p>
<p>&#x4E0D;&#x8981;&#x4F7F;&#x7528; == &#x6BD4;&#x8F83;&#x6570;&#x7EC4;</p>
<p>&#x4EC5;&#x5F53;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x5F15;&#x7528;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4EEC;&#x624D;&#x76F8;&#x7B49;&#xFF0C;&#x5982;&#x679C;==&#x5DE6;&#x53F3;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x539F;&#x59CB;&#x7C7B;&#x578B;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x5BF9;&#x8C61;&#x5C31;&#x4F1A;&#x8F6C;&#x6362;&#x4E3A;&#x539F;&#x59CB;&#x7C7B;&#x578B;</p>
<p>=== &#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x7C7B;&#x578B;&#x8F6C;&#x6362;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; == &#x6BD4;&#x8F83;&#x6570;&#x7EC4;&#xFF0C;&#x9664;&#x975E;&#x5B83;&#x4EEC;&#x4E24;&#x4E2A;&#x5F15;&#x7528;&#x4E86;&#x7EDF;&#x4E00;&#x6570;&#x7EC4;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5426;&#x5219;&#x5B83;&#x4EEC;&#x6C38;&#x8FDC;&#x4E0D;&#x76F8;&#x7B49;&#xFF0C;&#x8981;&#x7528;&#x8FED;&#x4EE3;&#x7684;&#x65B9;&#x6CD5;&#x9010;&#x9879;&#x7684;&#x6BD4;&#x8F83;&#x5B83;&#x4EEC;</p>
<p>&#x904D;&#x5386;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;&#xFF1A;</p>
<p>for( let i=0; i&lt;arr.length; ++i)   &#x8FD0;&#x884C;&#x7684;&#x6700;&#x5FEB;&#xFF0C;&#x53EF;&#x517C;&#x5BB9;&#x5C31;&#x6D4F;&#x89C8;&#x5668;</p>
<p>for ( let item of arr)     &#x73B0;&#x4EE3;&#x8BED;&#x6CD5;&#xFF0C;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;items</p>
<p>for (let i in arr)             &#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x7528;&#x8FD9;&#x4E2A;</p>
<p>&#x4F20;&#x5165;call &#x548C; apply &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x4F1A;&#x88AB;&#x770B;&#x4F5C;&#x51FD;&#x6570;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#x540E;&#x7EED;&#x7684;&#x53C2;&#x6570;</p>
<p>&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x7684;this&#x4E0E;&#x58F0;&#x660E;&#x6240;&#x5728;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x76F8;&#x540C;</p>
<p>&#x8C03;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x9690;&#x5F0F;&#x7684;&#x4F20;&#x5165;this&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x662F;&#x4ECE;&#x5B9A;&#x4E49;&#x65F6;&#x7684;&#x51FD;&#x6570;&#x7EE7;&#x627F;&#x4E0A;&#x4E0B;&#x6587;</p>
<p>&#x6240;&#x6709;&#x51FD;&#x6570;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;bind&#x65B9;&#x6CD5;&#xFF0C; &#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x7ED1;&#x5B9A;&#x5230;&#x4F20;&#x5165;&#x7684;&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x8C03;&#x7528;bind&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#x539F;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x662F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x51FD;&#x6570;</p>
<p>this &#x8868;&#x793A;&#x51FD;&#x6570;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C; &#x5373;&#x4E0E;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x76F8;&#x5173;&#x8054;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x51FD;&#x6570;&#x7684;&#x5B9A;&#x4E49;&#x65B9;&#x5F0F;&#x548C;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x51B3;&#x5B9A;&#x4E86;this&#x7684;&#x53D6;&#x503C;</p>
<p>&#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x6709;&#x56DB;&#x79CD;&#xFF1A;</p>
<ul>
<li>&#x4F5C;&#x4E3A;&#x51FD;&#x6570;&#x8C03;&#x7528; skulk()</li>
<li>&#x4F5C;&#x4E3A;&#x65B9;&#x6CD5;&#x8C03;&#x7528;  ele.skulk()</li>
<li>&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x8C03;&#x7528; new Skulk()</li>
<li>&#x901A;&#x8FC7;apply &#x548C; call&#x65B9;&#x6CD5;&#x8C03;&#x7528; skulk.apply(ele) skulk.call(ele)</li>
</ul>
<p>&#x51FD;&#x6570;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x5F71;&#x54CD;this&#x7684;&#x53D6;&#x503C;&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;&#x4F5C;&#x4E3A;&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF0C;&#x975E;&#x4E25;&#x683C;&#x6A21;&#x5F0F;&#x4E0B;&#x6307;&#x5411;window&#x5BF9;&#x8C61;&#xFF0C; &#x4E25;&#x683C;&#x6A21;&#x5F0F;&#x4E0B;&#x6307;&#x5411;undefined</li>
<li>&#x4F5C;&#x4E3A;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#xFF0C;this&#x901A;&#x5E38;&#x6307;&#x5411;&#x8C03;&#x7528;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF0C;this&#x6307;&#x5411;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x503C;</li>
<li>&#x901A;&#x8FC7;call &#x6216; apply &#x8C03;&#x7528;&#xFF0C;this &#x6307;&#x5411; call &#x6216; apply &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;</li>
</ul>
<p>&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x548C;bind&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#x90FD;&#x662F;&#x7ED1;&#x5B9A;&#x7684;&#x611F;&#x89C9;</p>
<p>&#x95ED;&#x5305;&#x5141;&#x8BB8;&#x51FD;&#x6570;&#x8BBF;&#x95EE;&#x5E76;&#x64CD;&#x4F5C;&#x51FD;&#x6570;&#x5916;&#x90E8;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x53EA;&#x8981;&#x51FD;&#x6570;&#x6216;&#x53D8;&#x91CF;&#x5B58;&#x5728;&#x4E8E;&#x58F0;&#x660E;&#x51FD;&#x6570;&#x65F6;&#x7684;&#x4F5C;&#x7528;&#x57DF;&#x5185;&#xFF0C;&#x95ED;&#x5305;&#x5373;&#x53EF;&#x4F7F;&#x51FD;&#x6570;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x53D8;&#x91CF;&#x548C;&#x51FD;&#x6570;</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMaxSubSum</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">let</span> maxSum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> partialSum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> arr) {
        partialSum += item
        maxSum = <span class="hljs-built_in">Math</span>.max(maxSum, partialSum)
        <span class="hljs-keyword">if</span>(partialSum&lt;<span class="hljs-number">0</span>) paritalSum = <span class="hljs-number">0</span>
    }
    <span class="hljs-keyword">return</span> maxSum
}
</code></pre>
<p>arr.splice &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x5904;&#x7406;&#x6570;&#x7EC4;&#x7684;&#x745E;&#x58EB;&#x519B;&#x5200;  arr.slice &#x590D;&#x5236;&#x4E00;&#x90E8;&#x5206;&#x503C;   arr.concat &#x8FDE;&#x63A5;&#x591A;&#x4E2A;&#x6570;&#x7EC4;    </p>
<p>arr.forEach &#x65B9;&#x6CD5;&#x5141;&#x8BB8;&#x4E3A;&#x6570;&#x7EC4;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x51FD;&#x6570; </p>
<p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf" target="_blank">arr.indexOf</a>&#x3001;<a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf" target="_blank">arr.lastIndexOf</a> &#x548C; <a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank">arr.includes</a> &#x65B9;&#x6CD5;&#x4E0E;&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x8BED;&#x6CD5;&#xFF0C;&#x5E76;&#x4E14;&#x4F5C;&#x7528;&#x57FA;&#x672C;&#x4E0A;&#x4E5F;&#x4E0E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65B9;&#x6CD5;&#x76F8;&#x540C;</p>
<p>&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6570;&#x7EC4;&#xFF0C;&#x53EF;&#x4EE5;&#x7528; arr.find()  &#x65B9;&#x6CD5;&#x627E;&#x5230;&#x5177;&#x6709;&#x7279;&#x5B9A;&#x6761;&#x4EF6;&#x7684;&#x5BF9;&#x8C61;  &#x540C;&#x7406;&#x6709; arr.findIndex  &#x548C;  arr.filter</p>
<p>arr.map &#x65B9;&#x6CD5;&#x5BF9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x8C03;&#x7528;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x6570;&#x7EC4;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x548C;forEach &#x5F88;&#x50CF;&#xFF0C;&#x4F46;&#x662F;forEach &#x5E76;&#x4E0D;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5E94;&#x8BE5;&#x662F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x4E86;</p>
<p>arr.sort() &#x65B9;&#x6CD5;&#x5BF9;&#x6570;&#x7EC4;&#x8FDB;&#x884C; &#x539F;&#x4F4D;(in-place) &#x6392;&#x5E8F;&#xFF0C;&#x66F4;&#x6539;&#x5143;&#x7D20;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x4F46;&#x662F;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x6309;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x8981;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</p>
<p>&#x5BF9;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x6BD4;&#x8F83;&#x7B97;&#x6CD5;&#xFF0C;&#x6700;&#x597D;&#x662F;&#x4F7F;&#x7528; str.localeCompare &#x65B9;&#x6CD5;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x5B57;&#x6BCD;&#x8FDB;&#x884C;&#x6392;&#x5E8F;</p>
<p>arr.split &#x4E0E; arr.join  &#x6070;&#x597D;&#x76F8;&#x53CD;</p>
<p>arr.reduce  &#x6839;&#x636E;&#x6570;&#x7EC4;&#x8BA1;&#x7B97;&#x5355;&#x4E2A;&#x503C;</p>
<p>Array.isArray</p>
<p>thisArg  &#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;</p>
<p><code>sort</code>&#xFF0C;<code>reverse</code> &#x548C; <code>splice</code> &#x65B9;&#x6CD5;&#x4FEE;&#x6539;&#x7684;&#x662F;&#x6570;&#x7EC4;&#x672C;&#x8EAB;&#x3002;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> prices = {
  banana: <span class="hljs-number">1</span>,
  orange: <span class="hljs-number">2</span>,
  meat: <span class="hljs-number">4</span>,
};

<span class="hljs-keyword">let</span> doublePrices = <span class="hljs-built_in">Object</span>.fromEntries(
  <span class="hljs-comment">// &#x8F6C;&#x6362;&#x4E3A;&#x6570;&#x7EC4;&#xFF0C;&#x4E4B;&#x540E;&#x4F7F;&#x7528; map &#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7; fromEntries &#x518D;&#x8F6C;&#x56DE;&#x5230;&#x5BF9;&#x8C61;</span>
  <span class="hljs-built_in">Object</span>.entries(prices).map(([key, value]) =&gt; [key, value * <span class="hljs-number">2</span>])
);
</code></pre>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5EFA;&#x7ACB;&#x5F3A;&#x5927;&#x7684;&#x8F6C;&#x6362;&#x94FE;, Object.keys, values, entries</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(obj).length;
}
</code></pre>
<p>JS&#x4E2D;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E24;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;Object &#x548C; Array&#xFF0C; &#x5BF9;&#x8C61;&#x80FD;&#x8BA9;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x952E;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x9879;&#x7684;&#x5355;&#x4E2A;&#x5B9E;&#x4F53;&#xFF0C; &#x6570;&#x7EC4;&#x5219;&#x8BA9;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5C06;&#x6570;&#x636E;&#x6536;&#x96C6;&#x5230;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x7684;&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x628A;&#x5B83;&#x4EEC;&#x4F20;&#x9012;&#x7ED9;&#x51FD;&#x6570;&#x65F6;&#xFF0C; &#x51FD;&#x6570;&#x53EF;&#x80FD;&#x53EA;&#x9700;&#x8981;&#x5355;&#x4E2A;&#x5757;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> [firstName, surname] = <span class="hljs-string">&quot;Ilya Kantor&quot;</span>.split(<span class="hljs-string">&apos; &apos;</span>);
</code></pre>
<p>&#x89E3;&#x6784;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;&#x7834;&#x574F;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> user = {
  name: <span class="hljs-string">&quot;John&quot;</span>,
  age: <span class="hljs-number">30</span>
};

<span class="hljs-comment">// &#x5FAA;&#x73AF;&#x904D;&#x5386;&#x952E;&#x2014;&#x503C;&#x5BF9;</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [key, value] <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.entries(user)) {
  alert(<span class="hljs-string">`<span class="hljs-subst">${key}</span>:<span class="hljs-subst">${value}</span>`</span>); <span class="hljs-comment">// name:John, then age:30</span>
}
</code></pre>
<p>&#x5185;&#x5EFA;&#x5BF9;&#x8C61;&#xFF1A; &#x65E5;&#x671F;&#xFF08;Date&#xFF09;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E86;&#x65E5;&#x671F;/&#x65F6;&#x95F4;&#x7684;&#x7BA1;&#x7406;&#x65B9;&#x6CD5;</p>
<p>JS &#x63D0;&#x4F9B;&#x4E86;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;</p>
<p>JSON.stringify  &#x5C06;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;JSON, JSON.parse &#x5C06; JSON &#x8F6C;&#x6362;&#x56DE;&#x5BF9;&#x8C61;</p>
<p>&#x4E00;&#x4E9B;&#x7279;&#x5B9A;&#x4E8E; JS &#x7684;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x4F1A;&#x88AB;JSON.stringify &#x8DF3;&#x8FC7;&#xFF0C;&#x5373;&#xFF1A;&#x51FD;&#x6570;&#x5C5E;&#x6027;&#x3001; Symbol&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x3001;&#x5B58;&#x50A8;undefined&#x7684;&#x5C5E;&#x6027;</p>
<pre><code class="lang-js"><span class="hljs-built_in">JSON</span>.stringify(user, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)        <span class="hljs-comment">// &#x9996;&#x884C;&#x7F29;&#x8FDB; 2 &#x4E2A;&#x5B57;&#x7B26;</span>
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">&apos;{&quot;title&quot;:&quot;Conference&quot;,&quot;date&quot;:&quot;2017-11-30T12:00:00.000Z&quot;}&apos;</span>;

<span class="hljs-keyword">let</span> meetup = <span class="hljs-built_in">JSON</span>.parse(str, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>{
  <span class="hljs-keyword">if</span> (key == <span class="hljs-string">&apos;date&apos;</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(value);
  <span class="hljs-keyword">return</span> value;
});

alert( meetup.date.getDate() ); <span class="hljs-comment">// &#x73B0;&#x5728;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x4E86;&#xFF01;</span>
</code></pre>
<p>&#x51FD;&#x6570;&#x8FDB;&#x9636;&#x5185;&#x5BB9;</p>
<p>&#x6240;&#x6709;&#x51FD;&#x6570;&#x7684;&#x5904;&#x7406;&#x90FD;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<ol>
<li>&#x5F53;&#x524D;&#x4E0A;&#x4E0B;&#x6587;&#x88AB;&#x8BB0;&#x5F55;&#x5728;&#x5806;&#x6808;&#x7684;&#x9876;&#x90E8;</li>
<li>&#x4E3A;&#x5B50;&#x8C03;&#x7528;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4E0A;&#x4E0B;&#x6587;</li>
<li>&#x5F53;&#x5B50;&#x8C03;&#x7528;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4ECE;&#x5806;&#x6808;&#x4E2D;&#x5F39;&#x51FA;&#xFF0C;&#x5E76;&#x7EE7;&#x7EED;&#x6267;&#x884C;</li>
</ol>
<p>&#x9012;&#x5F52;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x8981;&#x8003;&#x8651;&#x5806;&#x6808;&#x7684;&#x6DF1;&#x5EA6;</p>
<p>Rest &#x53C2;&#x6570;&#x5FC5;&#x987B;&#x653E;&#x5230;&#x53C2;&#x6570;&#x5217;&#x8868;&#x7684;&#x672B;&#x5C3E;</p>
<p>arguments&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x6570;&#x7EC4;</p>
<p>&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x662F;&#x6CA1;&#x6709;arguments&#x7684;</p>
<p>spread&#x8BED;&#x6CD5;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x591A;&#x4E2A;&#x53EF;&#x8FED;&#x4EE3;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5408;&#x5E76;&#x6570;&#x7EC4;&#xFF0C;&#x548C;Array.from() &#x5F88;&#x50CF;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x8005;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x64CD;&#x4F5C;&#x7C7B;&#x6570;&#x7EC4;</p>
<p>&#x5728; JS &#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x8FD0;&#x884C;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4EE3;&#x7801;&#x5757;&#x4EE5;&#x53CA;&#x6574;&#x4E2A;&#x811A;&#x672C;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x6210;&#x4E3A;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;(Lexical Environment) &#x7684;&#x5185;&#x90E8;&#x9690;&#x85CF;&#x7684;&#x5173;&#x8054;&#x5BF9;&#x8C61;</p>
<p>&#x8BCD;&#x6CD5;&#x73AF;&#x5883;&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;</p>
<ol>
<li>&#x73AF;&#x5883;&#x8BB0;&#x5F55;(Environment Record)&#xFF1A;&#x4E00;&#x4E2A;&#x5B58;&#x50A8;&#x6240;&#x6709;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x4F5C;&#x4E3A;&#x5176;&#x5C5E;&#x6027;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x5BF9;&#x5916;&#x90E8;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x4E0E;&#x5916;&#x90E8;&#x4EE3;&#x7801;&#x76F8;&#x5173;&#x8054;</li>
</ol>
<p>&#x53D8;&#x91CF;&#x662F;&#x7279;&#x6B8A;&#x5185;&#x90E8;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x4E0E;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x5757;/&#x51FD;&#x6570;/&#x811A;&#x672C;&#x6709;&#x5173;&#xFF0C;&#x64CD;&#x4F5C;&#x53D8;&#x91CF;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x64CD;&#x4F5C;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;</p>
<p>&#x5F53;&#x4EE3;&#x7801;&#x8981;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#xFF0C;&#x9996;&#x5148;&#x56DE;&#x641C;&#x7D22;&#x5185;&#x90E8;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;&#xFF0C;&#x7136;&#x540E;&#x641C;&#x7D22;&#x5916;&#x90E8;&#x73AF;&#x5883;&#xFF0C;&#x7136;&#x540E;&#x641C;&#x7D22;&#x66F4;&#x5916;&#x90E8;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x76F4;&#x5230;&#x5168;&#x5C40;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;</p>
<p>&#x5728;JS&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x51FD;&#x6570;&#x90FD;&#x662F;&#x5929;&#x751F;&#x95ED;&#x5305;&#x7684;&#xFF0C;&#x95ED;&#x5305;&#x5C31;&#x662F;&#x6307;&#x5185;&#x90E8;&#x51FD;&#x6570;&#x603B;&#x662F;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x6240;&#x5728;&#x7684;&#x5916;&#x90E8;&#x51FD;&#x6570;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;&#x548C;&#x53C2;&#x6570;</p>
<p>&#x8BCD;&#x6CD5;&#x73AF;&#x5883;&#x4EC5;&#x5728;&#x53EF;&#x8FBE;&#x65F6;&#x624D;&#x4F1A;&#x4FDD;&#x7559;&#x5728;&#x5185;&#x5B58;&#x4E2D;</p>
<p>debugger</p>
<p>&#x7406;&#x8BBA;&#x4E0A;&#x5F53;&#x51FD;&#x6570;&#x53EF;&#x8FBE;&#x65F6;&#xFF0C;&#x5B83;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x4E5F;&#x90FD;&#x5C06;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x5728;&#x65F6;&#x95F4;&#x4E2D;&#xFF0C;JS&#x5F15;&#x64CE;&#x4F1A;&#x8BD5;&#x56FE;&#x4F18;&#x5316;&#x5B83;&#xFF0C;&#x5982;&#x679C;&#x4ECE;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x660E;&#x663E;&#x770B;&#x51FA;&#x6240;&#x6709;&#x672A;&#x4F7F;&#x7528;&#x7684;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x5C06;&#x5B83;&#x5220;&#x9664;&#xFF0C;&#x6B64;&#x7C7B;&#x53D8;&#x91CF;&#x5728;&#x8C03;&#x8BD5;&#x4E2D;&#x5C06;&#x4E0D;&#x53EF;&#x7528;</p>
<p>&#x4ECE;&#x7A0B;&#x5E8F;&#x8FDB;&#x5165;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x90A3;&#x4E00;&#x523B;&#x5F00;&#x59CB;&#xFF0C;&#x53D8;&#x91CF;&#x5C31;&#x5F00;&#x59CB;&#x8FDB;&#x5165;&#x201C;&#x672A;&#x521D;&#x59CB;&#x5316;&#x201D;&#x72B6;&#x6001;&#xFF0C;&#x5B83;&#x4E00;&#x76F4;&#x4FDD;&#x6301;&#x672A;&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;&#xFF0C;&#x76F4;&#x81F3;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x5230;&#x76F8;&#x5E94;&#x7684;let&#x8BED;&#x53E5;</p>
<p>var &#x6CA1;&#x6709;&#x5757;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x7528;var&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4E0D;&#x662F;&#x51FD;&#x6570;&#x4F5C;&#x7528;&#x57DF;&#x5C31;&#x662F;&#x5168;&#x5C40;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;var &#x7684;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x58F0;&#x660E;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x58F0;&#x660E;&#x524D;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x58F0;&#x660E;&#x4F1A;&#x63D0;&#x5347;&#xFF0C;&#x4F46;&#x662F;&#x8D4B;&#x503C;&#x4E0D;&#x4F1A;</p>
<p>(function{...})&#xFF0C;&#x7ACB;&#x5373;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x58F0;&#x660E;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x4ECA;&#x6CA1;&#x6709;&#x7406;&#x7531;&#x8FD9;&#x4E48;&#x6765;&#x7F16;&#x5199;&#x4EE3;&#x7801;</p>
<p>&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x662F; &apos;window&apos; &#xFF0C; &#x5BF9; Node.js &#x800C;&#x8A00;&#xFF0C;&#x5B83;&#x7684;&#x540D;&#x5B57;&#x662F; &apos;global&apos; &#xFF0C;&#x6700;&#x8FD1; globalThis &#x88AB;&#x4F5C;&#x4E3A;&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#x7684;&#x6807;&#x51C6;&#x540D;&#x79F0;&#x52A0;&#x5165;&#x4E86;JS</p>
<p>&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#x7684;&#x6240;&#x6709;&#x5C5E;&#x6027;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;</p>
<p>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;var &#x58F0;&#x660E;&#x7684;&#x5168;&#x5C40;&#x51FD;&#x6570;&#x548C;&#x53D8;&#x91CF;&#x4F1A;&#x53D8;&#x6210;&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;</p>
<p>&#x628A;&#x51FD;&#x6570;&#x60F3;&#x6210;&#x4E00;&#x4E2A;&#x53EF;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x884C;&#x4E3A;&#x5BF9;&#x8C61;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5B83;&#x4EEC;&#xFF0C;&#x8FD8;&#x80FD;&#x628A;&#x5B83;&#x5F53;&#x4F5C;&#x5BF9;&#x8C61;&#x6765;&#x5904;&#x7406;&#xFF0C;&#x51FD;&#x6570;&#x5BF9;&#x8C61;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x4FBF;&#x4E8E;&#x4F7F;&#x7528;&#x7684;&#x5C5E;&#x6027;</p>
<p>name length   &#x51FD;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x4E8E;&#x95ED;&#x5305;</p>
<p>&#x7ED9;&#x51FD;&#x6570;&#x8868;&#x8FBE;&#x5F0F;&#x6DFB;&#x52A0;&#x540D;&#x5B57;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5C40;&#x90E8;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4EE5;&#x9632;&#x5916;&#x9762;&#x7684;&#x88AB;&#x66F4;&#x6539;&#x6389;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x53EF;&#x9760;&#x7684;&#x5185;&#x90E8;&#x540D;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5427;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x5199;&#x6210;&#x51FD;&#x6570;&#x8868;&#x8FBE;&#x5F0F;</p>
<p>&#x51FD;&#x6570;&#x540D;&#x540E;&#x9762;&#x8DDF;&#x7740;&#x591A;&#x4E2A;&#x62EC;&#x53F7;&#xFF0C;&#x4E3A;&#x4E86;&#x51FD;&#x6570;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x662F;&#x51FD;&#x6570;&#x7684;&#x7ED3;&#x679C;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeCounter</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">counter</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> count++;
  }

  counter.set = value =&gt; count = value;

  counter.decrease = () =&gt; count--;

  <span class="hljs-keyword">return</span> counter;
}
</code></pre>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a</span>) </span>{

  <span class="hljs-keyword">let</span> currentSum = a;

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">b</span>) </span>{
    currentSum += b;
    <span class="hljs-keyword">return</span> f;
  }

  f.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> currentSum;
  };

  <span class="hljs-keyword">return</span> f;
}
</code></pre>
<p>js&#x7684;&#x51FD;&#x6570;&#x53D8;&#x91CF;&#x662F;&#x771F;&#x7684;&#x597D;&#x7528;&#x554A;</p>
<p>&quot;new Function&quot; &#x5F88;&#x5C11;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x65F6;&#x5019;&#x53EA;&#x80FD;&#x9009;&#x62E9;&#x5B83;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5C06;&#x4EFB;&#x610F;&#x5B57;&#x7B26;&#x4E32;&#x53D8;&#x4E3A;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x51FD;&#x6570;&#x5E76;&#x6267;&#x884C;&#x5B83;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x79CD;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x52A8;&#x6001;&#x7684;&#x521B;&#x5EFA;&#x51FD;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x53EF;&#x80FD;&#x624D;&#x4F1A;&#x4F7F;&#x7528;&#x5230;&#x8FD9;&#x4E2A;&#x8BED;&#x6CD5;</p>
<p>&#x901A;&#x5E38;&#xFF0C;&#x95ED;&#x5305;&#x662F;&#x6307;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x5C5E;&#x6027; [[Environment]] &#x6765;&#x8BB0;&#x5F55;&#x51FD;&#x6570;&#x81EA;&#x8EAB;&#x521B;&#x5EFA;&#x65F6;&#x7684;&#x73AF;&#x5883;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x5177;&#x4F53;&#x6307;&#x5411;&#x4E86;&#x51FD;&#x6570;&#x521B;&#x5EFA;&#x65F6;&#x7684;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;</p>
<p>setTimeout &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5C06;&#x51FD;&#x6570;&#x63A8;&#x8FDF;&#x5230;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x4E4B;&#x540E;&#x518D;&#x6267;&#x884C;</p>
<p>setInterval  &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x91CD;&#x590D;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x4ECE;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x4E4B;&#x540E;&#x5F00;&#x59CB;&#x8FD0;&#x884C;&#xFF0C;&#x4E4B;&#x540E;&#x4EE5;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x91CD;&#x590D;&#x8FD0;&#x884C;</p>
<p>clearTimeout   clearInterval</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> delay = <span class="hljs-number">5000</span>
<span class="hljs-keyword">let</span> timerId = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params"></span>)</span>{
    ...
    if(request failen due to server overload){
        delay *= <span class="hljs-number">2</span>
    }
    timerId = setTimeout(request, delay);        <span class="hljs-comment">// &#x611F;&#x89C9;&#x8FD9;&#x5C31;&#x662F;&#x9012;&#x5F52;&#x4E86;</span>
}, delay)
</code></pre>
<p>&#x5D4C;&#x5957;&#x7684;setTimeout &#x80FD;&#x591F;&#x7CBE;&#x786E;&#x7684;&#x8BBE;&#x7F6E;&#x4E24;&#x6B21;&#x6267;&#x884C;&#x4E4B;&#x95F4;&#x7684;&#x5EF6;&#x65F6;&#xFF0C; &#x800C; setInterval &#x5374;&#x4E0D;&#x80FD;</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slow</span>(<span class="hljs-params">x</span>) </span>{
  <span class="hljs-comment">// &#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x91CD;&#x8D1F;&#x8F7D;&#x7684; CPU &#x5BC6;&#x96C6;&#x578B;&#x5DE5;&#x4F5C;</span>
  alert(<span class="hljs-string">`Called with <span class="hljs-subst">${x}</span>`</span>);
  <span class="hljs-keyword">return</span> x;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cachingDecorator</span>(<span class="hljs-params">func</span>) </span>{
  <span class="hljs-keyword">let</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">if</span> (cache.has(x)) {    <span class="hljs-comment">// &#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x7ED3;&#x679C;</span>
      <span class="hljs-keyword">return</span> cache.get(x); <span class="hljs-comment">// &#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;</span>
    }

    <span class="hljs-keyword">let</span> result = func(x);  <span class="hljs-comment">// &#x5426;&#x5219;&#x5C31;&#x8C03;&#x7528; func</span>

    cache.set(x, result);  <span class="hljs-comment">// &#x7136;&#x540E;&#x5C06;&#x7ED3;&#x679C;&#x7F13;&#x5B58;&#xFF08;&#x8BB0;&#x4F4F;&#xFF09;&#x4E0B;&#x6765;</span>
    <span class="hljs-keyword">return</span> result;
  };
}
</code></pre>
<p>&#x4E00;&#x65E6;&#x65B9;&#x6CD5;&#x88AB;&#x4F20;&#x9012;&#x5230;&#x4E0E;&#x5BF9;&#x8C61;&#x5206;&#x5F00;&#x7684;&#x67D0;&#x4E2A;&#x5730;&#x65B9;&#xFF0C;this&#x5C31;&#x4E22;&#x5931;</p>
<p>setTimeout &#x65B9;&#x6CD5;&#x7684;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x8BBE;&#x5B9A;&#x4E86; this =  window</p>
<p>&#x8FD9;&#x4E2A;&#x9700;&#x6C42;&#x5F88;&#x5178;&#x578B;&#xFF1A;&#x6211;&#x4EEC;&#x60F3;&#x5C06;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;&#x4F20;&#x9012;&#x5230;&#x522B;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8BE5;&#x4F4D;&#x7F6E;&#x8C03;&#x7528;&#x5B83;&#xFF0C;&#x5982;&#x4F55;&#x786E;&#x4FDD;&#x5728;&#x6B63;&#x786E;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x8C03;&#x7528;&#x5B83;</p>
<pre><code class="lang-js">setTimeout(user.sayHi, <span class="hljs-number">1000</span>); <span class="hljs-comment">// Hello, undefined!</span>
setTimeout(() =&gt; user.sayHi(), <span class="hljs-number">1000</span>); <span class="hljs-comment">// Hello, John!</span>
</code></pre>
<p>&#x6700;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5305;&#x88C5;&#x51FD;&#x6570;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x4E0D;&#x9519;&#xFF0C;&#x5982;&#x679C;&#x5728;setTimeout&#x89E6;&#x53D1;&#x524D;&#x4E00;&#x79D2;user&#x7684;&#x503C;&#x6709;&#x6539;&#x53D8;&#x7684;&#x8BDD;&#x5C31;&#x9519;&#x8BEF;&#x4E86;</p>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x5185;&#x5EFA;&#x65B9;&#x6CD5; bind, &#x5B83;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;this</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> boundFunc = func.bind(context)
</code></pre>
<p><code>func.bind(context)</code> &#x7684;&#x7ED3;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x7C7B;&#x4F3C;&#x4E8E;&#x51FD;&#x6570;&#x7684;&quot;&#x5916;&#x6765;&#x5BF9;&#x8C61;&quot;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x50CF;&#x51FD;&#x6570;&#x4E00;&#x6837;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x900F;&#x660E;&#x5730;&#x5C06;&#x8C03;&#x7528;&#x4F20;&#x9012;&#x7ED9;func&#x5E76;&#x5C06;this=context</p>
<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6709;&#x591A;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;bindAll</p>
<p>&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;this&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x53C2;&#x6570;&#xFF08;arguments&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x5C11;&#x8FD9;&#x4E48;&#x505A;</p>
<p>&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x91CD;&#x7ED1;&#x5B9A;</p>
<p>bind&#x4E4B;&#x540E;&#xFF0C;&#x51FD;&#x6570;&#x4F1A;&#x4E22;&#x5931;&#x539F;&#x6765;&#x7684;&#x51FD;&#x6570;&#x5C5E;&#x6027;</p>
<p>bind &#x548C; &#x5305;&#x88C5;&#x90FD;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x4E00;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5305;&#x88C5;&#x53EF;&#x80FD;&#x5728;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7684;&#x573A;&#x666F;&#x4E0B;&#x5931;&#x6548;</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">askPassword</span>(<span class="hljs-params">ok, fail</span>) </span>{
  <span class="hljs-keyword">let</span> password = prompt(<span class="hljs-string">&quot;Password?&quot;</span>, <span class="hljs-string">&apos;&apos;</span>);
  <span class="hljs-keyword">if</span> (password == <span class="hljs-string">&quot;rockstar&quot;</span>) ok();
  <span class="hljs-keyword">else</span> fail();
}

<span class="hljs-keyword">let</span> user = {
  name: <span class="hljs-string">&apos;John&apos;</span>,

  login(result) {
    alert( <span class="hljs-keyword">this</span>.name + (result ? <span class="hljs-string">&apos; logged in&apos;</span> : <span class="hljs-string">&apos; failed to log in&apos;</span>) );
  }
};

askPassword(()=&gt;user.login(<span class="hljs-literal">true</span>), ()=&gt;user.login(<span class="hljs-literal">false</span>))
askPassword(user.login.bind(user, <span class="hljs-literal">true</span>), user.login.bind(user, <span class="hljs-literal">false</span>))
</code></pre>
<p>&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x4E0D;&#x4EC5;&#x662F;&#x7B80;&#x6D01;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x8FD8;&#x5177;&#x6709;&#x4E00;&#x4E9B;&#x7279;&#x6027;</p>
<p>JS &#x7684;&#x7CBE;&#x9AD3;&#x5728;&#x4E8E;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x9012;&#x5230;&#x67D0;&#x4E2A;&#x5730;&#x65B9;&#xFF0C;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4E0D;&#x60F3;&#x79BB;&#x5F00;&#x5F53;&#x524D;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;i&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x7684;&#x4E3B;&#x6218;&#x573A;</p>
<p>.bind(this)  &#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8BE5;&#x51FD;&#x6570;&#x7684;&quot;&#x7ED1;&#x5B9A;&#x7248;&#x672C;&quot;&#xFF0C;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x6CA1;&#x6709;&#x521B;&#x5EFA;&#x4EFB;&#x4F55;&#x7ED1;&#x5B9A;&#xFF0C;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x53EA;&#x662F;&#x6CA1;&#x6709;this&#xFF0C;this&#x7684;&#x67E5;&#x627E;&#x4E0E;&#x5E38;&#x89C4;&#x53D8;&#x91CF;&#x7684;&#x641C;&#x7D22;&#x65B9;&#x5F0F;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#xFF1A;&#x5728;&#x5916;&#x90E8;&#x8BCD;&#x6CD5;&#x73AF;&#x5883;&#x4E2D;&#x67E5;&#x627E;</p>
<p>&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x5C5E;&#x6027;&#xFF0C;&#x4F46;&#x662F;&#x76EE;&#x524D;&#x7684;&#x5C5E;&#x6027;&#x5BF9;&#x6211;&#x6765;&#x8BF4;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&quot;&#x952E;&#x503C;&#x5BF9;&quot;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#x5C5E;&#x6027;&#x662F;&#x66F4;&#x7075;&#x6D3B;&#x548C;&#x5F3A;&#x5927;&#x7684;&#x4E1C;&#x897F;</p>
<p>&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x9664;&#x4E86;value&#xFF0C;&#x8FD8;&#x6709;&#x4E09;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x7279;&#x6027;&#xFF1A;writable&#x3001; enumerable&#x3001; configurable</p>
<p>getOwnPropertyDescriptor    defindeProperty    defineProperties</p>
<p>&#x9664;&#x4E86;&#x6570;&#x636E;&#x5C5E;&#x6027;&#xFF0C;&#x8FD8;&#x6709;&#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x4EEC;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x7528;&#x4E8E;&#x83B7;&#x53D6;&#x548C;&#x8BBE;&#x7F6E;&#x503C;&#x7684;&#x51FD;&#x6570;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> user = {
  name: <span class="hljs-string">&quot;John&quot;</span>,
  surname: <span class="hljs-string">&quot;Smith&quot;</span>,

  get fullName() {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${this.name}</span> <span class="hljs-subst">${this.surname}</span>`</span>;
  }
};
alert(user.fullName); <span class="hljs-comment">// John Smith</span>
</code></pre>
<p>&#x4ECE;&#x5916;&#x8868;&#x770B;&#xFF0C;&#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#x770B;&#x8D77;&#x6765;&#x5C31;&#x662F;&#x666E;&#x901A;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> user = {
  name: <span class="hljs-string">&quot;John&quot;</span>,
  surname: <span class="hljs-string">&quot;Smith&quot;</span>,

  get fullName() {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${this.name}</span> <span class="hljs-subst">${this.surname}</span>`</span>;
  },

  set fullName(value) {
    [<span class="hljs-keyword">this</span>.name, <span class="hljs-keyword">this</span>.surname] = value.split(<span class="hljs-string">&quot; &quot;</span>);
  }
};

<span class="hljs-comment">// set fullName &#x5C06;&#x4EE5;&#x7ED9;&#x5B9A;&#x503C;&#x6267;&#x884C;</span>
user.fullName = <span class="hljs-string">&quot;Alice Cooper&quot;</span>;

alert(user.name); <span class="hljs-comment">// Alice</span>
alert(user.surname); <span class="hljs-comment">// Cooper</span>
</code></pre>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x5C5E;&#x6027;&#xFF0C;&#x800C;&#x4E14;&#x4ED6;&#x662F;&#x53EF;&#x8BFB;&#x53EF;&#x5199;&#x7684;</p>
<p>&#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#x6CA1;&#x6709; value &#x548C; writable&#xFF0C; &#x4F46;&#x662F;&#x6709; get &#x548C; set &#x51FD;&#x6570;</p>
<p>Getter/Setter &#x53EF;&#x4EE5;&#x7528;&#x4F5C;&#x201D;&#x771F;&#x5B9E;&#x201C;&#x5C5E;&#x6027;&#x503C;&#x7684;&#x5305;&#x88C5;&#x5176;&#xFF0C;&#x4EE5;&#x4FBF;&#x8FDB;&#x884C;&#x66F4;&#x591A;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x5982;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x547D;&#x540D;&#x7684;&#x65F6;&#x5019;&#x5224;&#x65AD;name&#x662F;&#x4E0D;&#x662F;&#x592A;&#x77ED;</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">User</span>(<span class="hljs-params">name, birthday</span>) </span>{
  <span class="hljs-keyword">this</span>.name = name;
  <span class="hljs-keyword">this</span>.birthday = birthday;

  <span class="hljs-comment">// &#x5E74;&#x9F84;&#x662F;&#x6839;&#x636E;&#x5F53;&#x524D;&#x65E5;&#x671F;&#x548C;&#x751F;&#x65E5;&#x8BA1;&#x7B97;&#x5F97;&#x51FA;&#x7684;</span>
  <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>, <span class="hljs-string">&quot;age&quot;</span>, {
    get() {
      <span class="hljs-keyword">let</span> todayYear = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();
      <span class="hljs-keyword">return</span> todayYear - <span class="hljs-keyword">this</span>.birthday.getFullYear();
    }
  });
}

<span class="hljs-keyword">let</span> john = <span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">1992</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>));

alert( john.birthday ); <span class="hljs-comment">// birthday &#x662F;&#x53EF;&#x8BBF;&#x95EE;&#x7684;</span>
alert( john.age );      <span class="hljs-comment">// &#x2026;&#x2026;age &#x4E5F;&#x662F;&#x53EF;&#x8BBF;&#x95EE;&#x7684;</span>
</code></pre>
<p>&#x5728;&#x7F16;&#x7A0B;&#x4E2D;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x50CF;&#x83B7;&#x53D6;&#x5E76;&#x6269;&#x5C55;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x539F;&#x578B;&#x7EE7;&#x627F;(Prototypal inheritance) &#x8FD9;&#x4E2A;&#x8BED;&#x8A00;&#x7279;&#x6027;&#x80FD;&#x591F;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x4E2A;&#x9700;&#x6C42;</p>
<p>&#x5728; JS&#x4E2D;&#xFF0C;&#x5BF9;&#x8C61;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x9690;&#x85CF;&#x5C5E;&#x6027; [[Prototype]] &#xFF0C;&#x5B83;&#x8981;&#x4E48;&#x4E3A; null&#xFF0C;&#x8981;&#x4E48;&#x5C31;&#x662F;&#x5BF9;&#x53E6;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;&#x88AB;&#x79F0;&#x4E3A;&#x539F;&#x578B;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x4ECE; object&#x4E2D;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x7F3A;&#x5931;&#x7684;&#x5C5E;&#x6027;&#x65F6;&#xFF0C;JS&#x4F1A;&#x81EA;&#x52A8;&#x4ECE;&#x539F;&#x578B;&#x4E2D;&#x83B7;&#x53D6;&#x8BE5;&#x5C5E;&#x6027;&#xFF0C;&#x5728;&#x7F16;&#x7A0B;&#x4E2D;&#xFF0C;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x88AB;&#x79F0;&#x4E3A;&#x539F;&#x578B;&#x7EE7;&#x627F;</p>
<p><code>rabbit.__proto__ = animal</code>   &#x8FD9;&#x79CD;&#x611F;&#x89C9;&#x548C;&#x95ED;&#x5305;&#x6709;&#x70B9;&#x50CF;&#x554A;&#xFF0C;&#x90FD;&#x662F;&#x7EE7;&#x627F;&#x7684;&#x5173;&#x7CFB;</p>
<p>&#x539F;&#x578B;&#x7EE7;&#x627F;&#x6709;&#x4E24;&#x4E2A;&#x9650;&#x5236;</p>
<ul>
<li>&#x5F15;&#x7528;&#x4E0D;&#x80FD;&#x5F62;&#x6210;&#x95ED;&#x73AF;<ul>
<li><code>__proto__</code>&#x7684;&#x503C;&#x53EF;&#x4EE5;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F; <code>null</code> &#xFF0C;&#x800C;&#x5176;&#x5B83;&#x7C7B;&#x578B;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;</li>
</ul>
</li>
</ul>
<p><code>__proto__</code> &#x662F; <code>[[Prototype]]</code>&#x4E0D;&#x4E00;&#x6837;</p>
<p>&#x5199;&#x5165;&#x4E0D;&#x9002;&#x7528;&#x539F;&#x578B;&#xFF0C;&#x539F;&#x578B;&#x4EC5;&#x7528;&#x4E8E;&#x8BFB;&#x53D6;&#x5C5E;&#x6027;&#xFF0C;&#x8BBF;&#x95EE;&#x5668;&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5916;&#xFF0C;&#x56E0;&#x4E3A;&#x5206;&#x914D;&#x64CD;&#x4F5C;&#x662F;&#x7531;setter&#x51FD;&#x6570;&#x5904;&#x7406;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5199;&#x5165;&#x6B64;&#x7C7B;&#x5C5E;&#x6027;&#x5B9E;&#x9645;&#x4E0A;&#x4E0E;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x76F8;&#x540C;</p>
<p>&#x65E0;&#x8BBA;&#x5728;&#x54EA;&#x91CC;&#x627E;&#x5230;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x8FD8;&#x662F;&#x5728;&#x539F;&#x578B;&#x4E2D;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x4E2D;&#xFF0C;this&#x59CB;&#x7EC8;&#x662F;  .  &#x524D;&#x9762;&#x7684;&#x5BF9;&#x8C61;</p>
<p>for ... in  &#x5FAA;&#x73AF;&#x4E5F;&#x4F1A;&#x8FED;&#x4EE3;&#x7EE7;&#x627F;&#x7684;&#x5C5E;&#x6027;</p>
<p>&#x5C5E;&#x6027;&#x67E5;&#x627E;&#x548C;&#x6267;&#x884C;&#x662F;&#x4E24;&#x56DE;&#x4E8B;&#xFF0C;&#x5148;&#x4ECE;&#x539F;&#x578B;&#x4E2D;&#x627E;&#x5230;&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x7ED9;&#x5F53;&#x524D;&#x7684;this &#x6267;&#x884C;</p>
<p>&#x6240;&#x6709;&#x63CF;&#x8FF0;&#x7279;&#x5B9A;&#x5BF9;&#x8C61;&#x72B6;&#x6001;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x90FD;&#x5E94;&#x8BE5;&#x88AB;&#x5199;&#x5165;&#x6539;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4E00;&#x4E9B;&#x95EE;&#x9898;</p>
<p>Obejct.create(proto, [descriptors])     Object.getPrototypeOf(obj)         Object.setPrototypeOf(obj, proto)</p>
<p>&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x95F4;&#x6CA1;&#x6709;&#x9017;&#x53F7;&#xFF0C;&#x5728;JavaScript&#x4E2D;&#xFF0C;&#x7C7B;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x51FD;&#x6570;&#xFF0C;&#x51C6;&#x786E;&#x7684;&#x8BF4;&#x662F;&#x6784;&#x9020;&#x65B9;&#x6CD5;</p>
<p>&#x6709;&#x4E9B;&#x4EBA;&#x8BF4;class&#x662F;&#x4E00;&#x79CD;&#x8BED;&#x6CD5;&#x7CD6;&#xFF0C;&#x4F46;&#x662F;&#x4ECD;&#x6709;&#x4E00;&#x4E9B;&#x533A;&#x522B;&#xFF0C;&#x9996;&#x5148;&#x901A;&#x8FC7;&#x4ECE;class&#x521B;&#x5EFA;&#x7684;&#x51FD;&#x6570;&#x5177;&#x6709;&#x7279;&#x6B8A;&#x7684;&#x5185;&#x90E8;&#x5C5E;&#x6027;&#x6807;&#x8BB0;&#xFF0C;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x4E0D;&#x80FD;&#x679A;&#x4E3E;&#xFF0C;&#x7C7B;&#x5B9A;&#x4E49;&#x5C06;&#x201C;prototype&#x201D;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x7684;enumerable&#x6807;&#x5FD7;&#x8BBE;&#x7F6E;&#x4E3A;false&#xFF0C;&#x7C7B;&#x91CC;&#x9762;&#x603B;&#x662F;&#x4F7F;&#x7528; use strict</p>
<p>&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x4E0D;&#x662F;&#x67D0;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x6574;&#x4E2A;class&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x641C;&#x7D22;/&#x4FDD;&#x5B58;/&#x5220;&#x9664;&#xFF0C;&#x9759;&#x6001;&#x5C5E;&#x6027;&#x540C;&#x7406;</p>
<p>&#x9759;&#x6001;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#x662F;&#x53EF;&#x88AB;&#x7EE7;&#x627F;&#x7684;</p>
<p>&#x5728;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#x5206;&#x4E3A;&#x4E24;&#x7EC4;&#xFF1A;</p>
<ul>
<li>&#x5185;&#x90E8;&#x63A5;&#x53E3;&#xFF1A;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x7C7B;&#x7684;&#x5176;&#x5B83;&#x65B9;&#x6CD5;&#x8BBF;&#x95EE;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x4ECE;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;</li>
<li>&#x5916;&#x90E8;&#x63A5;&#x53E3;&#xFF1A;&#x53EF;&#x4EE5;&#x4ECE;&#x7C7B;&#x7684;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;</li>
</ul>
<p>&#x53D7;&#x4FDD;&#x62A4;&#x7684;&#x5C5E;&#x6027;&#x901A;&#x5E38;&#x4EE5;&#x4E0B;&#x5212;&#x7EBF;_&#x4F5C;&#x4E3A;&#x524D;&#x7F00;</p>
<p>&#x5185;&#x5EFA;&#x7684;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x8FD4;&#x56DE;&#x7684;&#x6269;&#x5C55;&#x5185;&#x5EFA;&#x7C7B;</p>
<p>&#x7C7B;&#x68C0;&#x67E5; instanceof &#x64CD;&#x4F5C;&#x7B26;&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5C5E;&#x4E8E;&#x67D0;&#x4E2A;&#x7279;&#x5B9A;&#x7684;class</p>
<p>&#x8981;&#x4F7F; try ... catch  &#x80FD;&#x5DE5;&#x4F5C;&#xFF0C;&#x4EE3;&#x7801;&#x5FC5;&#x987B;&#x662F;&#x53EF;&#x6267;&#x884C;&#x7684;   try ... catch  &#x540C;&#x6B65;&#x5DE5;&#x4F5C;&#xFF0C;&#x5982;setTimeout</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981; error &#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C; catch &#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x5B83;</p>
<p>throw &#x64CD;&#x4F5C;&#x7B26;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A; error &#x5BF9;&#x8C61;</p>
<p>try ... catch ... finally</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadScript</span>(<span class="hljs-params">src, callback</span>)</span>{
    <span class="hljs-keyword">let</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;script&apos;</span>)
    script.src = src
    script.onload = () =&gt; callback(script)
    <span class="hljs-built_in">document</span>.head.append(script)
}
loadScript(<span class="hljs-string">&apos;/my/test.js&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{newFunction()})
</code></pre>
<p>&#x8FD9;&#x88AB;&#x79F0;&#x4E3A;&#x201D;&#x57FA;&#x4E8E;&#x56DE;&#x8C03;&#x201C;&#x7684;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#x98CE;&#x683C;&#xFF0C;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x67D0;&#x9879;&#x529F;&#x80FD;&#x7684;&#x51FD;&#x6570;&#x5E94;&#x8BE5;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;callback &#x53C2;&#x6570;&#x7528;&#x4E8E;&#x5728;&#x76F8;&#x5E94;&#x4E8B;&#x4EF6;&#x5B8C;&#x6210;&#x662F;&#x8C03;&#x7528;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>)</span>{
    <span class="hljs-comment">// executer</span>
})
</code></pre>
<p>promise  &#x6211;&#x611F;&#x89C9;&#x548C; setTimeOut  &#x7684;&#x533A;&#x522B;&#x5C31;&#x662F;&#x533A;&#x5206;&#x7684;&#x4E86;&#x6210;&#x529F;&#x548C;&#x5931;&#x8D25;&#xFF0C;&#x6210;&#x529F;&#x4E86;&#x5C31; resolve&#xFF0C; &#x5931;&#x8D25;&#x4E86;&#x5C31; reject</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{
  setTimeout(() =&gt; reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;Whoops!&quot;</span>)), <span class="hljs-number">1000</span>);
});

<span class="hljs-comment">// reject &#x8FD0;&#x884C; .then &#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x51FD;&#x6570;</span>
promise.then(
  result =&gt; alert(result), <span class="hljs-comment">// &#x4E0D;&#x8FD0;&#x884C;</span>
  error =&gt; alert(error) <span class="hljs-comment">// 1 &#x79D2;&#x540E;&#x663E;&#x793A; &quot;Error: Whoops!&quot;</span>
);
promise.then(alert); <span class="hljs-comment">// &#x53EA;&#x5BF9;&#x6210;&#x529F;&#x611F;&#x5174;&#x8DA3;</span>
promise.catch(alert);        <span class="hljs-comment">// &#x53EA;&#x5BF9;&#x5931;&#x8D25;&#x611F;&#x5174;&#x8DA3;</span>
</code></pre>
<p>promise  &#x57FA;&#x4E8E;&#x56DE;&#x8C03;&#x7684;&#x6A21;&#x5F0F;&#x7684;&#x4E00;&#x4E9B;&#x597D;&#x5904;&#xFF1A;</p>
<ul>
<li>promise &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x6309;&#x7167;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#xFF0C;&#x9996;&#x5148;&#x5141;&#x8BB8;&#x51FD;&#x6570;&#x7136;&#x540E;&#x5229;&#x7528; .then &#x6765;&#x5904;&#x7406;&#x7ED3;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x591A;&#x6B21; .then  &#xFF0C;&#x79F0;&#x4E4B;&#x4E3A; Promise&#x94FE;</li>
</ul>
<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x5BF9;resolve&#x7684;&#x8C03;&#x7528;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x6B21;&#x5BF9; reject/resolve &#x7684;&#x8C03;&#x7528;&#x624D;&#x4F1A;&#x88AB;&#x5904;&#x7406;</p>
<pre><code class="lang-js">cnew <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) </span>{

  setTimeout(() =&gt; resolve(<span class="hljs-number">1</span>), <span class="hljs-number">1000</span>); <span class="hljs-comment">// (*)</span>

}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{ <span class="hljs-comment">// (**)</span>

  alert(result); <span class="hljs-comment">// 1</span>
  <span class="hljs-keyword">return</span> result * <span class="hljs-number">2</span>;

}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{ <span class="hljs-comment">// (***)</span>

  alert(result); <span class="hljs-comment">// 2</span>
  <span class="hljs-keyword">return</span> result * <span class="hljs-number">2</span>;

}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{

  alert(result); <span class="hljs-comment">// 4</span>
  <span class="hljs-keyword">return</span> result * <span class="hljs-number">2</span>;

});
</code></pre>
<p>&#x4ECE;&#x6280;&#x672F;&#x4E0A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x591A;&#x4E2A; .then &#x6DFB;&#x52A0;&#x5230;&#x4E00;&#x4E2A;promise&#x4E0A;&#xFF0C;&#x4F46;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;promise&#x94FE;</p>
<p>&#x5728;&#x524D;&#x7AEF;&#x7F16;&#x7A0B;&#x4E2D;&#xFF0C; promise&#x901A;&#x5E38;&#x88AB;&#x7528;&#x4E8E;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x4E5F;&#x53EF;&#x4F7F;&#x7528; fetch &#x65B9;&#x6CD5;&#x4ECE;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;</p>
<p>Fetch</p>
<p>JS &#x53EF;&#x4EE5;&#x5C06;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E76;&#x5728;&#x9700;&#x8981;&#x65F6;&#x52A0;&#x8F7D;&#x65B0;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x4E8E;&#x6765;&#x81EA; JS &#x7684;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x603B;&#x79F0;&#x672F;&#x8BED; AJAX&#xFF08;Asynchronous JavaScript and XML&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4E0D;&#x5FC5;&#x4F7F;&#x7528;XML&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x4E00;&#x8D77;&#x7684;&#x4E86;</p>
<p><code>let promise = fetch(url, [options])</code></p>
<ul>
<li>url &#x8981;&#x8BBF;&#x95EE;&#x7684;url</li>
<li>options &#x53EF;&#x9009;&#x53C2;&#x6570;&#xFF1A;method&#xFF0C;header</li>
</ul>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;options&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; get &#x8BF7;&#x6C42;&#xFF0C;&#x4E0B;&#x8F7D;url &#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x7ACB;&#x5373;&#x542F;&#x52A8;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x8BE5;&#x8C03;&#x7528;&#x4EE3;&#x7801;&#x7528;&#x6765;&#x83B7;&#x53D6;&#x7ED3;&#x679C;&#x7684;promise</p>
<p>&#x83B7;&#x53D6;&#x54CD;&#x5E94;&#x901A;&#x5E38;&#x9700;&#x8981;&#x7ECF;&#x5386;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#xFF0C;&#x5F53;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x4E86;&#x54CD;&#x5E94;&#x5934;&#xFF08;response header&#xFF09;&#xFF0C;fetch &#x8FD4;&#x56DE;&#x7684; promise &#x5C31;&#x4F7F;&#x7528;&#x5185;&#x5EFA;&#x7684; Response class &#x5BF9;&#x8C61;&#x6765;&#x5BF9;&#x54CD;&#x5E94;&#x5934;&#x8FDB;&#x884C;&#x89E3;&#x6790;</li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x68C0;&#x67E5;&#x54CD;&#x5E94;&#x5934;&#x6765;&#x68C0;&#x67E5;HTTP&#x72B6;&#x6001;&#x4EE5;&#x786E;&#x5B9A;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x54CD;&#x5E94;&#x4F53;&#xFF08;response body&#xFF09;&#xFF0C;&#x90A3;&#x4E48;promise&#x5C31;&#x4F1A;reject&#xFF0C;&#x5F02;&#x5E38;&#x7684;HTTP&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;error&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;response&#x4E2D;&#x770B;&#x5230;http&#x72B6;&#x6001;&#xFF1A; status&#x3001;ok</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(url)
<span class="hljs-keyword">if</span>(res.ok){}
</code></pre>
<ul>
<li>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF0C;&#x4E3A;&#x4E86;&#x83B7;&#x53D6;response body&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5176;&#x5B83;&#x65B9;&#x6CD5;&#x8C03;&#x7528;</li>
</ul>
<p>response&#x63D0;&#x4F9B;&#x4E86;&#x5F88;&#x591A;&#x57FA;&#x4E8E;promise&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x683C;&#x5F0F;&#x6765;&#x8BBF;&#x95EE;body&#xFF1A;response.text(), response.json(), response.formData(), response.blob(),</p>
<p>&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x9009;&#x62E9;&#x4E00;&#x79CD;&#x8BFB;&#x53D6;body&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x7B2C;&#x4E8C;&#x6B21;&#x7684;&#x662F;&#x5DF2;&#x7ECF;&#x88AB;&#x5904;&#x7406;&#x8FC7;&#x7684;</p>
<p>response header &#x4F4D;&#x4E8E; response.headers &#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E; Map &#x7684;header &#x5BF9;&#x8C61;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> user = {
    name: <span class="hljs-string">&apos;John&apos;</span>,
    surname: <span class="hljs-string">&apos;Smith&apos;</span>
}
<span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">&apos;/article/fetch&apos;</span>,{
    method: <span class="hljs-string">&apos;POST&apos;</span>,
    headers: {
        <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json;charset=utf-8&apos;</span>
    },
    body: <span class="hljs-built_in">JSON</span>.stringify(user)
})
<span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> res.json()
alert(res.message)
</code></pre>
<p>&#x540C;&#x6837;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;  Blob &#x6216; BufferSource &#x5BF9;&#x8C61;&#x901A;&#x8FC7; fetch &#x63D0;&#x4EA4;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x56FE;&#x7247;</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin:0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&apos;canvasElem&apos;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&apos;100&apos;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&apos;80&apos;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&apos;border:1px solid&apos;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&apos;button&apos;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&apos;Submit&apos;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&apos;submit()&apos;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        canvasElem.onmousemove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
            <span class="hljs-keyword">let</span> ctx = canvasElem.getContext(<span class="hljs-string">&apos;2d&apos;</span>)
            ctx.lineTo(e.lientX, e.e.clientY)
            ctx.stroke()
        }
        <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">submit</span>(<span class="hljs-params"></span>)</span>{
            <span class="hljs-keyword">let</span> blob = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(resolve=&gt;canvasElem.toBlob(resolve, <span class="hljs-string">&apos;image/png&apos;</span>))
            <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">&apos;/article/fetch/post/image&apos;</span>,{
                method:<span class="hljs-string">&apos;POST&apos;</span>,
                body: blog
            })
           <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> res.json()
           alert(result.message)
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>&#x5178;&#x578B;&#x7684;fetch &#x8BF7;&#x6C42;&#x7531;&#x4E24;&#x4E2A; await &#x7EC4;&#x6210;</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(url, [options])
<span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> res.json()

<span class="hljs-comment">// &#x6216;&#x8005;&#x662F;</span>
fetch(url, options)
    .then(res =&gt; res.json())
    .then(result =&gt; <span class="hljs-comment">/* ... */</span>)
</code></pre>
<p>&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6709;&#x610F;&#x601D;&#xFF0C;promise&#x548C;fetch&#x4E00;&#x8D77;&#x8054;&#x5408;&#x5199;&#x7684;&#xFF1A;</p>
<pre><code class="lang-js"><span class="hljs-comment">// &#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5BF9; user.json &#x7684;&#x8BF7;&#x6C42;</span>
fetch(<span class="hljs-string">&apos;/article/promise-chaining/user.json&apos;</span>)
  <span class="hljs-comment">// &#x5C06;&#x5176;&#x52A0;&#x8F7D;&#x4E3A; JSON</span>
  .then(response =&gt; response.json())
  <span class="hljs-comment">// &#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5230; GitHub &#x7684;&#x8BF7;&#x6C42;</span>
  .then(user =&gt; fetch(<span class="hljs-string">`https://api.github.com/users/<span class="hljs-subst">${user.name}</span>`</span>))
  <span class="hljs-comment">// &#x5C06;&#x54CD;&#x5E94;&#x52A0;&#x8F7D;&#x4E3A; JSON</span>
  .then(response =&gt; response.json())
  <span class="hljs-comment">// &#x663E;&#x793A;&#x5934;&#x50CF;&#x56FE;&#x7247;&#xFF08;githubUser.avatar_url&#xFF09;3 &#x79D2;&#xFF08;&#x4E5F;&#x53EF;&#x4EE5;&#x52A0;&#x4E0A;&#x52A8;&#x753B;&#x6548;&#x679C;&#xFF09;</span>
  .then(githubUser =&gt; {
    <span class="hljs-keyword">let</span> img = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;img&apos;</span>);
    img.src = githubUser.avatar_url;
    img.className = <span class="hljs-string">&quot;promise-avatar-example&quot;</span>;
    <span class="hljs-built_in">document</span>.body.append(img);

    setTimeout(() =&gt; img.remove(), <span class="hljs-number">3000</span>); <span class="hljs-comment">// (*)</span>
  });
</code></pre>
<p>&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E2A;&#x4E3A;&#x9898;&#xFF0C; * &#x884C;&#x5934;&#x50CF;&#x663E;&#x793A;&#x7ED3;&#x675F;&#x540E;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8FD8;&#x60F3;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x7F16;&#x8F91;&#x7684;&#x8868;&#x5355;&#x662F;&#x505A;&#x4E0D;&#x5230;&#x7684;&#xFF0C;&#x4E3A;&#x4E86;&#x4F7F;&#x5F97;&#x94FE;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x5728;&#x5934;&#x50CF;&#x7ED3;&#x675F;&#x65F6;&#x8FDB;&#x884C; resolve &#x7684; promise</p>
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x5F02;&#x6B65;&#x884C;&#x4E3A;&#x5E94;&#x8BE5;&#x59CB;&#x7EC8;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise</p>
<p>promise &#x7684; executor &#x5468;&#x56F4;&#x5B58;&#x5728;&#x9690;&#x5F0F;&#x7684; try...catch &#x81EA;&#x52A8;&#x83B7;&#x53D6;&#x4E86; error&#xFF0C; &#x5E76;&#x5C06;&#x5176;&#x53D8;&#x4E3A; rejected promise</p>
<p>promise.all  &#x5E76;&#x884C;&#x6267;&#x884C;&#x591A;&#x4E2A; promise</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> names = [<span class="hljs-string">&apos;iliakan&apos;</span>, <span class="hljs-string">&apos;remy&apos;</span>, <span class="hljs-string">&apos;jeresig&apos;</span>];

<span class="hljs-keyword">let</span> requests = names.map(name =&gt; fetch(<span class="hljs-string">`https://api.github.com/users/<span class="hljs-subst">${name}</span>`</span>));

<span class="hljs-built_in">Promise</span>.all(requests)
  .then(responses =&gt; {
    <span class="hljs-comment">// &#x6240;&#x6709;&#x54CD;&#x5E94;&#x90FD;&#x88AB;&#x6210;&#x529F; resolved</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> response <span class="hljs-keyword">of</span> responses) {
      alert(<span class="hljs-string">`<span class="hljs-subst">${response.url}</span>: <span class="hljs-subst">${response.status}</span>`</span>); <span class="hljs-comment">// &#x5BF9;&#x5E94;&#x6BCF;&#x4E2A; url &#x90FD;&#x663E;&#x793A; 200</span>
    }

    <span class="hljs-keyword">return</span> responses;
  })
  <span class="hljs-comment">// &#x5C06;&#x54CD;&#x5E94;&#x6570;&#x7EC4;&#x6620;&#x5C04;&#xFF08;map&#xFF09;&#x5230; response.json() &#x6570;&#x7EC4;&#x4E2D;&#x4EE5;&#x8BFB;&#x53D6;&#x5B83;&#x4EEC;&#x7684;&#x5185;&#x5BB9;</span>
  .then(responses =&gt; <span class="hljs-built_in">Promise</span>.all(responses.map(r =&gt; r.json())))
  <span class="hljs-comment">// &#x6240;&#x6709; JSON &#x7ED3;&#x679C;&#x90FD;&#x88AB;&#x89E3;&#x6790;&#xFF1A;&quot;users&quot; &#x662F;&#x5B83;&#x4EEC;&#x7684;&#x6570;&#x7EC4;</span>
  .then(users =&gt; users.forEach(user =&gt; alert(user.name)));
</code></pre>
<p>Async/await &#x662F;&#x4EE5;&#x66F4;&#x8212;&#x9002;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;promise&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x8BED;&#x6CD5;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x975E;&#x5E38;&#x6613;&#x4E8E;&#x7406;&#x89E3;&#x548C;&#x4F7F;&#x7528;</p>
<p>async &#x8FD9;&#x4E2A;&#x5355;&#x8BCD;&#x8868;&#x8FBE;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5373;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x603B;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;promise&#xFF0C; &#x5176;&#x5B83;&#x503C;&#x5C06;&#x81EA;&#x52A8;&#x88AB;&#x5305;&#x88C5;&#x5728;&#x4E00;&#x4E2A;resolved&#x7684;promise&#x4E2D;</p>
<p>await &#x53EA;&#x5728;async &#x4E2D;&#x5DE5;&#x4F5C;&#xFF0C;&#x5173;&#x952E;&#x5B57;await &#x8BA9;JS&#x5F15;&#x64CE;&#x7B49;&#x5F85;&#x76F4;&#x5230; promise &#x5B8C;&#x6210;&#xFF08;settle&#xFF09;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF0C;await &#x5B9E;&#x9645;&#x4E0A;&#x4F1A;&#x6682;&#x505C;&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x77E5;&#x9053;promise&#x7684;&#x72B6;&#x6001;&#x53D8;&#x4E3A;settled&#xFF0C;&#x7136;&#x540E;&#x4EE5;promise&#x7684;&#x7ED3;&#x679C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x8FD9;&#x4E2A;&#x884C;&#x4E3A;&#x4E0D;&#x4F1A;&#x8017;&#x8D39;&#x4EFB;&#x4F55;CPU&#x8D44;&#x6E90;&#xFF0C;&#x56E0;&#x4E3A; JS&#x5F15;&#x64CE;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5904;&#x7406;&#x5176;&#x5B83;&#x811A;&#x672C;</p>
<p>await &#x4E0D;&#x80FD;&#x5728;&#x9876;&#x5C42;&#x4EE3;&#x7801;&#x4E2D;&#x8FD0;&#x884C;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5305;&#x88F9;&#x5728;&#x4E00;&#x4E2A;&#x533F;&#x540D; async &#x51FD;&#x6570;&#x4E2D;</p>
<pre><code class="lang-js">(<span class="hljs-keyword">async</span>()=&gt;{
    <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> fetch(<span class="hljs-comment">/*...*/</span>)
})()
</code></pre>
<p>async/await &#x53EF;&#x4EE5;&#x548C; promise.all &#x4E00;&#x8D77;&#x4F7F;&#x7528;</p>
<p>&#x5E38;&#x89C4;&#x51FD;&#x6570;&#x53EA;&#x4F1A;&#x8FD4;&#x56DE;&#x5355;&#x4E00;&#x503C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x4E0D;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x4F46;generator &#x53EF;&#x4EE5;&#x6309;&#x9700;&#x4E00;&#x4E2A;&#x63A5;&#x4E00;&#x4E2A;&#x7684;&#x8FD4;&#x56DE;&#xFF08;&#x201C;yeild&#x201D;&#xFF09;&#x591A;&#x4E2A;&#x503C;&#xFF0C;&#x4ED6;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0E;iterable&#x5B8C;&#x7F8E;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x7684;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x6D41;</p>
<p>&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;generator&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x8BED;&#x6CD5;&#x7ED3;&#x6784;&#xFF1A;function*</p>
<p>&#x5F02;&#x6B65;&#x8FED;&#x4EE3;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5BF9;&#x6309;&#x9700;&#x901A;&#x8FC7;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#x800C;&#x5F97;&#x5230;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x5206;&#x6BB5;&#xFF08;chunk-by-chunk&#xFF09;&#x4E0B;&#x8F7D;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F02;&#x6B65;&#x751F;&#x6210;&#x5668;&#xFF08;generator&#xFF09;&#x662F;&#x8FD9;&#x4E00;&#x6B65;&#x9AA4;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;</p>
<p>&#x968F;&#x7740;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x5C06;&#x5176;&#x62C6;&#x5206;&#x6210;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5373;&#x6240;&#x8C13;&#x7684;&#x6A21;&#x677F;&#xFF08;module&#xFF09;&#xFF0C;&#x4E00;&#x4E2A;&#x6A21;&#x677F;&#x53EF;&#x4EE5;&#x7528;&#x6237;&#x5305;&#x542B;&#x7528;&#x4E8E;&#x7279;&#x5B9A;&#x76EE;&#x7684;&#x7684;&#x7C7B;&#x548C;&#x51FD;&#x6570;&#x5E93;</p>
<p>&#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x52A0;&#x8F7D;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7279;&#x6B8A;&#x7684;&#x6307;&#x4EE4;export&#x548C;import&#x6765;&#x4EA4;&#x6362;&#x529F;&#x80FD;&#xFF0C;&#x4ECE;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x8C03;&#x7528;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x51FD;&#x6570;</p>
<p>import &#x6307;&#x4EE4;&#x901A;&#x8FC7;&#x76F8;&#x5F53;&#x4E8E;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#xFF0C;&#x5E76;&#x5C06;&#x5BFC;&#x5165;&#x7684;&#x51FD;&#x6570;&#x5206;&#x914D;&#x7ED9;&#x76F8;&#x5E94;&#x7684;&#x53D8;&#x91CF;</p>
<p>&#x6A21;&#x5757;&#x59CB;&#x7EC8;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528; use strict</p>
<p>&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x9876;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#xFF0C;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x4E2D;&#x7684;&#x9876;&#x7EA7;&#x4F5C;&#x7528;&#x57DF;&#x53D8;&#x91CF;&#x548C;&#x51FD;&#x6570;&#x5728;&#x5176;&#x5B83;&#x811A;&#x672C;&#x4E2D;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x771F;&#x7684;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; window-level &#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x660E;&#x786E;&#x7684;&#x8D4B;&#x503C;&#x7ED9; window</p>
<p>&#x5982;&#x679C;&#x540C;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x88AB;&#x5BFC;&#x5165;&#x5230;&#x591A;&#x4E2A;&#x5176;&#x5B83;&#x4F4D;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x4EE3;&#x7801;&#x4EC5;&#x4F1A;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#x6267;&#x884C;&#xFF0C;</p>
<p>&#x5728;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x4E2D;&#xFF0C;this &#x662F; undefined</p>
<p>&#x6A21;&#x5757;&#x811A;&#x672C;&#x603B;&#x662F;&#x5EF6;&#x8FDF;&#x7684;&#xFF0C;&#x6A21;&#x5757;&#x811A;&#x672C;&#x56DE;&#x7B49;&#x5230;HTML&#x6587;&#x6863;&#x5B8C;&#x5168;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x7136;&#x540E;&#x624D;&#x4F1A;&#x8FD0;&#x884C;&#xFF0C;&#x4FDD;&#x6301;&#x811A;&#x672C;&#x7684;&#x76F8;&#x5BF9;&#x987A;&#x5E8F;&#xFF0C;&#x5728;&#x6587;&#x6863;&#x4E2D;&#x6392;&#x5728;&#x524D;&#x9762;&#x7684;&#x811A;&#x672C;&#x5148;&#x6267;&#x884C;</p>
<p>&#x5982;&#x679C;&#x5185;&#x8054;&#x811A;&#x672C;&#x5177;&#x6709; async &#x7279;&#x79CD;&#xFF0C;&#x5B83;&#x5C31;&#x4E0D;&#x4F1A;&#x7B49;&#x5F85;&#x4EFB;&#x4F55;&#x4E1C;&#x897F;</p>
<pre><code class="lang-js">&lt;!-- &#x6240;&#x6709;&#x4F9D;&#x8D56;&#x90FD;&#x83B7;&#x53D6;&#x5B8C;&#x6210;&#xFF08;analytics.js&#xFF09;&#x7136;&#x540E;&#x811A;&#x672C;&#x5F00;&#x59CB;&#x8FD0;&#x884C; --&gt;
&lt;!-- &#x4E0D;&#x4F1A;&#x7B49;&#x5F85; HTML &#x6587;&#x6863;&#x6216;&#x8005;&#x5176;&#x4ED6; &lt;script&gt; &#x6807;&#x7B7E; --&gt;
&lt;script async type=&quot;module&quot;&gt;
  import {counter} from &apos;./analytics.js&apos;;

  counter.count();
&lt;/script&gt;
</code></pre>
<p>import &#x5FC5;&#x987B;&#x7ED9;&#x51FA;&#x76F8;&#x5BF9;&#x6216;&#x7EDD;&#x5BF9;&#x7684; url &#x8DEF;&#x5F84;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x8DEF;&#x5F84;&#x7684;&#x6A21;&#x5757;&#x88AB;&#x6210;&#x4E3A;&#x88F8;&#x6A21;&#x5757;&#xFF0C;&#x5728;import&#x4E2D;&#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x8FD9;&#x79CD;&#x6A21;&#x5757;&#x7684;</p>
<p>&#x5728;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x6A21;&#x5757;&#x5F88;&#x5C11;&#x88AB;&#x4EE5;&#x201D;&#x539F;&#x59CB;&#x201C;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x4F1A;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x5DE5;&#x5177;&#xFF0C;&#x5982;Webpack&#x5C06;&#x5B83;&#x4EEC;&#x6253;&#x5305;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x7136;&#x540E;&#x90E8;&#x7F72;&#x5230;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x6253;&#x5305;&#x5DE5;&#x5177;&#x7684;&#x4E00;&#x4E2A;&#x597D;&#x5904;&#x662F;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x7684;&#x63A7;&#x5236;&#x6A21;&#x5757;&#x7684;&#x89E3;&#x6790;&#x65B9;&#x5F0F;&#xFF0C;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x88F8;&#x6A21;&#x5757;&#x548C;&#x66F4;&#x591A;&#x529F;&#x80FD;&#xFF0C;&#x4F8B;&#x5982;css/html &#x6A21;&#x5757;&#x7B49;</p>
<p>&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#x505A;&#x4EE5;&#x4E0B;&#x8FD9;&#x4E9B;&#x4E8B;&#xFF1A;</p>
<ul>
<li>&#x4ECE;&#x4E00;&#x4E2A;&#x6253;&#x7B97;&#x653E;&#x5728; HTML &#x4E2D;&#x7684; `<script type="module">  ”主“模块开始</li>
<li>分析它的依赖，它的导入，它的导入的导入等</li>
<li>使用所有模块构建一个文件或者多个文件，并用打包函数（bundler function）替代原生的import调用，以使其正常工作，还支持像 html/css 模块等特殊的模块类型</li>
<li>在处理过程中进行一些优化</li>
</ul>
<p>我们可以通过在声明之前防止export来标记任意声明为导出，在类或者函数前的export不会让它们变成函数表达式，尽管被导出了，但它仍然是一个函数声明，不建议在函数和类声明后使用分号</p>
<p>通通导入一般不可取，如果明确列出我们需要的导入的内容，优化器（optimizer）就会检测到它，从而是构建更小，这就是所谓的”摇树（tree-shaking）“</p>
<p> import as 可以让导入具有不同的名字</p>
<p>eval  执行代码字符串，代码字符串可能会比较长，eval的结果是最后一条语句的结果</p>
<h2>A re-introduction to JavaScript</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript">A re-introduction to JavaScript</a></p>
<h3>Numbers</h3>
<p><code>console.log(3/2)     // 1.5, not 1​</code></p>
<p>an apparent integer is fact implicitly a float</p>
<ul>
<li>parseInt</li>
</ul>
<pre><code class="lang-javascript">parseInt(&#39;123&#39;, 10); // 123
parseInt(&#39;010&#39;, 10); // 10
parseInt(&#39;11&#39;, 2); // 3
parseInt(&#39;0x10&#39;); // 16
</code></pre>
<p><code>parseFloat()</code> always uses base 10.</p>
<p>You can also use the unary + operator to convert values to numbers: </p>
<pre><code class="lang-javascript">+ &#39;42&#39;;   // 42
+ &#39;010&#39;;  // 10
+ &#39;0x10&#39;; // 16
</code></pre>
<p>A special value called NaN(not a number) is returned if the string is non-numeric:  <code>parseInt(&#39;hello&#39;)</code></p>
<p>NaN is toxic: if you provide it as an operand to any mathematical operation, the result will also be NaN</p>
<pre><code class="lang-javascript">+&#39;10.2abc&#39;        // NaN
parseFloat(&#39;10.2abc&#39;)        // 10.2
</code></pre>
<h3>String</h3>
<p>Strings are sequences of Unicode characters.</p>
<pre><code class="lang-javascript">&#39;hello&#39;.charAt(0); // &quot;h&quot;
&#39;hello, world&#39;.replace(&#39;world&#39;, &#39;mars&#39;); // &quot;hello, mars&quot;
&#39;hello&#39;.toUpperCase(); // &quot;HELLO&quot;
</code></pre>
<ul>
<li>null: only accessible through the null keyword.</li>
<li>undefined: a value hasn&#39;t even been assigned yet.</li>
</ul>
<p>undefined is actually a constant</p>
<p>You can perform this conversion explicitly using the <code>Boolean()</code> function:</p>
<pre><code class="lang-javascript">Boolean(&#39;&#39;);  // false
Boolean(234); // true
</code></pre>
<ol>
<li><code>false</code>, <code>0</code>, empty strings (<code>&quot;&quot;</code>), <code>NaN</code>, <code>null</code>, and <code>undefined</code> all become <code>false</code>.</li>
<li>All other values become <code>true</code>.</li>
</ol>
<h3>Variables</h3>
<p>let, const or var</p>
<p>let allows you to declare block-level variables, the declared variable is available from the block it is enclosed in.</p>
<pre><code class="lang-javascript">// myLetVariable is *not* visible out here

for (let myLetVariable = 0; myLetVariable &lt; 5; myLetVariable++) {
  // myLetVariable is only visible in here
}

// myLetVariable is *not* visible out here
</code></pre>
<p>const allows you to declare variables whose values are never intended to change. The variable is available from the blcok.</p>
<p>var does not have the restrictions, a variable declared with the var keyword is available from the function it is declared in.</p>
<pre><code class="lang-javascript">// myVarVariable *is* visible out here

for (var myVarVariable = 0; myVarVariable &lt; 5; myVarVariable++) {
  // myVarVariable is visible to the whole function
}

// myVarVariable *is* visible out here
</code></pre>
<p>An important difference between JavaScript and other languages like Java is that in JavaScript, blocks do not have scope, only functions have a scope.</p>
<h3>Operators</h3>
<p>The + operator also does string concatenation: <code>&#39;hello&#39; + &#39;world&#39;</code></p>
<p>Adding an empty string to something is a useful way of converting it to a string itself: <code>&#39; &#39; + 5</code></p>
<p>==: the double-equals operator performs type coercion if you tive it different types.</p>
<pre><code class="lang-javascript">123 == &#39;123&#39;; // true
1 == true; // true
</code></pre>
<p>to avoid type coercion, user the triple-equals operator:  ===</p>
<h3>Control structures</h3>
<p>The &amp;&amp; and || operators use short-circuit logic, which means whether they will execute their second operand is dependent on the first. </p>
<h3>Objects</h3>
<p>JavaScript objects can be thought of as simple collections of name-value pairs.</p>
<p>The &#39;name&#39; part is a JavaScript string, while the value can be any JavaScript value -- including more objects.</p>
<p>Attribute access can be chained together: <code>obj.details.color       obj[&#39;details&#39;][&#39;size&#39;]</code></p>
<p>The following example creates an object prototype and an instance of that prototype:</p>
<pre><code class="lang-javascript">function Person(name, age) {
  this.name = name;
  this.age = age;
}

// Define an object
var you = new Person(&#39;You&#39;, 24);
// We are creating a new person named &quot;You&quot; aged 24.
</code></pre>
<pre><code class="lang-javascript">obj.for = &#39;Simon&#39;; // Syntax error, because &#39;for&#39; is a reserved word
obj[&#39;for&#39;] = &#39;Simon&#39;; // works fine
</code></pre>
<h3>Array</h3>
<p>Arrays in JavaScripts are actually a special type of object. The work very much like regular objects but they have one magic property called &#39;length&#39;.</p>
<p>Note that array.length isn&#39;t necessarily the number of items of the array.Consider the following:</p>
<pre><code class="lang-javascript">var a = [&#39;dog&#39;]
a[100] = &#39;fox&#39;
a.length;        // 101
</code></pre>
<p>Remember -- the length of the array is one more than the highest index</p>
<p>If you query a non-existent array index, you&#39;ll get a value of undefined in return: <code>typeof a[90];   // undefined</code></p>
<p>ES2.15 introduced the more concise <code>for...of</code> loop for iterable objects such as array.</p>
<p><code>for..in</code> this does not iterate over the array elements, but the array indeces. Futhermore, if someone added new properties to <code>Array.prototype</code>, they would also be iterated overby such a loop.</p>
<p>forEach(): <code>[&#39;dog&#39;, &#39;cat&#39;, &#39;hen&#39;].forEach(function(currentValue, index, array)) { }</code></p>
<h3>Functions</h3>
<p>If no return statement is used(or an empty return with no value), JavaScript returns undefined.</p>
<p>Functions have access to an additional variable inside their body called arguments.</p>
<p><code>...variable</code> will include within that variable the entire list of uncaptured arguments that the function was called with.</p>
<p>JavaScript let you call a function with an arbitrary of arguments, using the <code>apply()</code> method of any function object.</p>
<h3>Anonymous functions</h3>
<p>Anonymous functions are typically used as arguments to other functions or are made callable by immediately assigning them to a variable that can be used to invoke the function.</p>
<pre><code class="lang-javascript">(function() {
  // …
})();
</code></pre>
<h3>Recursive functions</h3>
<h3>Custom objects</h3>
<p>JavaScript uses functions as classes</p>
<pre><code class="lang-javascript">function makePerson(first, last) {
  return {
    first: first,
    last: last
  };
}
function personFullName(person) {
  return person.first + &#39; &#39; + person.last;
}
function personFullNameReversed(person) {
  return person.last + &#39;, &#39; + person.first;
}

var s = makePerson(&#39;Simon&#39;, &#39;Willison&#39;);
personFullName(s); // &quot;Simon Willison&quot;
personFullNameReversed(s); // &quot;Willison, Simon&quot;
</code></pre>
<p>This works, but it&#39;s pretty ugly. What we really need is a way to attach a function to an object. Since functions are objects, this is easy:</p>
<pre><code class="lang-javascript">function makePerson(first, last) {
  return {
    first: first,
    last: last,
    fullName: function() {
      return this.first + &#39; &#39; + this.last;
    },
    fullNameReversed: function() {
      return this.last + &#39;, &#39; + this.first;
    }
  };
}

var s = makePerson(&#39;Simon&#39;, &#39;Willison&#39;);
s.fullName(); // &quot;Simon Willison&quot;
s.fullNameReversed(); // &quot;Willison, Simon&quot;
</code></pre>
<p>We can take advantage of the this keyword to imporove our function: </p>
<pre><code class="lang-javascript">function Person(first, last) {
  this.first = first;
  this.last = last;
  this.fullName = function() {
    return this.first + &#39; &#39; + this.last;
  };
  this.fullNameReversed = function() {
    return this.last + &#39;, &#39; + this.first;
  };
}
var s = new Person(&#39;Simon&#39;, &#39;Willison&#39;);
</code></pre>
<p><code>new</code> is strongly related to this. It creates a brand new empty object, and then calls the function specified, with this set to that new object. Functions that are designed to be called by new are called constructor functions.</p>
<pre><code class="lang-javascript">function personFullName() {
  return this.first + &#39; &#39; + this.last;
}
function personFullNameReversed() {
  return this.last + &#39;, &#39; + this.first;
}
function Person(first, last) {
  this.first = first;
  this.last = last;
  this.fullName = personFullName;
  this.fullNameReversed = personFullNameReversed;
}
</code></pre>
<p>That&#39;s better: we are creating the method functions only once, and assigning references to them inside the constructor. Can we do any better than that? The answer is yes:</p>
<pre><code class="lang-javascript">function Person(first, last) {
  this.first = first;
  this.last = last;
}
Person.prototype.fullName = function() {
  return this.first + &#39; &#39; + this.last;
};
Person.prototype.fullNameReversed = function() {
  return this.last + &#39;, &#39; + this.first;
};
</code></pre>
<p><code>Person.prototype</code> is an object shared by all instances of <code>Person</code>. </p>
<p>The first argument to <code>apply()</code> is the object that should be treated as &#39;<code>this</code>&#39;.</p>
<p><code>apply()</code> has a sister function named <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>call</code></a>, which again lets you set <code>this</code> but takes an expanded argument list as opposed to an array.</p>
<p>An important detail of nested functions in JavaScript is that they can access variables in their parent function&#39;s scope.</p>
<h3>Closures</h3>
<pre><code class="lang-javascript">function makeAdder(a) {
  return function(b) {
    return a + b;
  };
}
var add5 = makeAdder(5);
var add20 = makeAdder(20);
add5(6); // ?
add20(7); // ?
</code></pre>
<p>This allow you to write many similar functions.</p>
<h2>课外</h2>
<h3>JS_轮询</h3>
<p><a href="https://segmentfault.com/a/1190000014460305">思否</a></p>
<p>轮询其实就是一个循环了</p>
<pre><code class="lang-html">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;轮询的坑&lt;/title&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  function getData() {
      return new Promise((resolve,reject) =&gt; {
          setTimeout(() =&gt; {
              resolve({data:666})
          },500)
      })
  }
  // 轮询
  async function start () {
    const { data } = await getData() // 模拟请求
    console.log(data)
    timerId = setTimeout(start, 1000)
  }
  start ()
&lt;/script&gt;
&lt;/html&gt;
</code></pre>
<p>想暂停，就是清除 timeId 了，继续就是重新轮询</p>
<pre><code class="lang-html">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;轮询的坑&lt;/title&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;button id=&quot;button&quot;&gt;暂停&lt;/button&gt;
&lt;/body&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  let timerId = null
  function getData() {
      return new Promise((resolve,reject) =&gt; {
          setTimeout(() =&gt; {
              resolve({data:666})
          },500)
      })
  }
  // 轮询
  async function start () {
    const { data } = await getData() // 模拟请求
    console.log(data)
    timerId = setTimeout(start, 1000)
  }
  // 暂停
  function stop () {
    clearTimeout(timerId)
  }

  start ()

  const botton = document.querySelector(&quot;#button&quot;)
  let isPlay = true
  botton.addEventListener(&quot;click&quot;, function(){
    isPlay = !isPlay
    botton.innerHTML = isPlay ? &#39;暂停&#39; : &#39;播放&#39;
    isPlay ? start() : stop()
  }, false)
&lt;/script&gt;
&lt;/html&gt;
</code></pre>
<p>有bug，因为js是单线程，如果快速点击或则异步的运行很久的话，就会有几个轮询的情况出现，所以应该有个标记，但是一个变量的 true false 不满足快速点击的情况</p>
<pre><code class="lang-html">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;轮询的坑&lt;/title&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;button id=&quot;button&quot;&gt;暂停&lt;/button&gt;
&lt;/body&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  let timerId = 1 // 模拟计时器id，唯一性
  let timerObj = {} // 计时器存储器
  function getData() {
      return new Promise((resolve,reject) =&gt; {
          setTimeout(() =&gt; {
              resolve({data:666})
          },500)
      })
  }
  // 轮询
  function start () {
    const id = timerId++
    timerObj[id] = true
    async function timerFn () {
      if (!timerObj[id]) return
      const { data } = await getData() // 模拟请求
      console.log(data)
      setTimeout(timerFn, 1000)
    }
    timerFn()
  }
  // 暂停
  function stop () {
    timerObj = {}
  }

  start ()

  const botton = document.querySelector(&quot;#button&quot;)
  let isPlay = true
  botton.addEventListener(&quot;click&quot;, function(){
    isPlay = !isPlay
    botton.innerHTML = isPlay ? &#39;暂停&#39; : &#39;播放&#39;
    isPlay ? start() : stop()
  }, false)
&lt;/script&gt;
&lt;/html&gt;
</code></pre>
<h3>Promise</h3>
<p><a href="https://zh.javascript.info/">现代JavaScript教程</a></p>
<p>Promise 这部分知识挺有用的，仔细看一遍，当时是 Promise 链没有看熟悉，回头重新看看</p>
<h4>简介：回调</h4>
<h5>什么是回调</h5>
<p>JavaScript 主机（host）环境提供了许多函数，这些函数允许我们计划异步行为（action），现在看是执行的行为，但是在稍后才完成。eg：setTimeout 函数</p>
<p>例如加载脚本的一个函数：</p>
<pre><code class="lang-js">function loadScript(src) {
    let script = document.createElement(&#39;script&#39;)
    script.src = src
    document.head.append(script)
}
loadScript(&#39;/my/test1.js&#39;)
console.log(&#39;test1&#39;)
</code></pre>
<p>在执行loadScript 的函数的时候是异步，函数会在异步执行这个函数的时候接着往下走，如果我们想用这个脚本中的函数，我们其实并不知道什么时候这个异步行为能结束，虽然我们不知道这个异步行为什么时候结束，但是我们可以传递一个函数作为参数，只要它一结束就可以执行这个传递的函数，这就是回调</p>
<pre><code class="lang-js">function loadScript(src, callback) {
    let script = document.createElement(&#39;script&#39;)
    script.src = src
    document.head.append(script)
    script.onload = () =&gt; callback()        // 脚本加载完之后执行
}
loadScript(&#39;my/test1.js&#39;, () =&gt; {console.log(&#39;append test1.js&#39;)})
</code></pre>
<h5>回调中回调</h5>
<p>如何在第一个回调后结束第二个回调，自然的想法就是第一个执行的回调中有第二个回调</p>
<pre><code class="lang-js">loadScript(&#39;/my/test1.js&#39;, () =&gt; {
    console.log(&#39;append test1.js&#39;)
    loadScrit(&#39;my/test2.js&#39;, () =&gt; {console.log(&#39;append test2.js&#39;)})
})
</code></pre>
<p>每一个新的行为（action）都在回调的内部，如果只是几个行为还好，如果行为多了，就会出现回调地狱</p>
<h5>处理Error</h5>
<p>在上述的例子当中，我们都没有考虑出现error的情况，如果脚本加载失败怎么办？回调需要能对此做出反应</p>
<pre><code class="lang-js">function loadScript(src, callback) {
    script = document.createElement(&#39;script&#39;)
    script.src = src
    script.onload = () =&gt; callback(src)
    script.onerror = () =&gt; callback(new Error(`append error for ${src}`))
    document.head.append(script)
}
loadScript(&#39;my/test1.js&#39;, (err, src) =&gt; {
    if(err) {
        console.error(&#39;error: &#39;, err)
        return
    }
    console.log(`${src} append success.`)
})
</code></pre>
<p>Error 优先回调（error-first callback）风格，约定是：</p>
<ul>
<li>callback的第一个参数是为 error 而保留的，一点出现 error，callback(err) 就会被调用</li>
<li>第二个参数及以后的参数用于成功的结果，此时 callback(null, result1, result2, ...) 就会被调用</li>
</ul>
<h5>厄运金字塔</h5>
<p>看起来这是一种可行的异步编程方式，的确对于一个或两个嵌套的调用看起来还不错，但是对于一个接一个的多个异步行为，代码会变成这样：</p>
<pre><code class="lang-js">loadScript(&#39;1.js&#39;, function(error, script) {

  if (error) {
    handleError(error);
  } else {
    // ...
    loadScript(&#39;2.js&#39;, function(error, script) {
      if (error) {
        handleError(error);
      } else {
        // ...
        loadScript(&#39;3.js&#39;, function(error, script) {
          if (error) {
            handleError(error);
          } else {
            // ...加载完所有脚本后继续 (*)
          }
        });

      }
    });
  }
});
</code></pre>
<p>嵌套调用的“金字塔”随着每个异步行为会向右增长，很快它就失控了，解决方法是独立函数，但是这些函数都是一次性使用的，代码看起来就像是撕裂的表格，可读性很差，在阅读的时候需要在各个代码块之间跳转。解决方法最好的办法之一就是 “promise”</p>
<h4>Promise</h4>
<p>e.g: 想象一下，你是一个顶尖的歌手，粉丝没日没夜的问你什么时候发新歌，终于你忍受不了了，然后想了一个解决方案：你发了一个订阅列表，愿意的粉丝在上面填上自己的邮箱，你承诺一首歌出来（或者出了事故不能发歌）的时候立马向这个列表的邮箱发送消息。</p>
<p>Promise 与这个例子的类比：</p>
<ol>
<li>“生产者代码（producing code）”：做事情，但是需要一段时间</li>
<li>“消费者代码（consuming code）”：想要在“生产者代码（producing code）”出现的第一时间获得结果</li>
<li>Promise 是将“生产者代码”和“消费者代码”连接在一起的的一个特殊的 JavaScript 对象，就好比前面说的订阅列表</li>
</ol>
<p>Promise 对象的构造器（constructor）语法如下：</p>
<pre><code class="lang-js">let promise = new Promise((resolve, reject) =&gt; {
    // executor 生产者代码
})
</code></pre>
<p>传递给 <code>new Promise</code> 的代码被称为 executor，当 new Promise 被创建，executor 会自动运行，它包含最终应产出结果的生产者代码</p>
<p>当 executor 获得了结果，无论或早或晚都可以，它应该调用以下回调之一：</p>
<ul>
<li>resolve(value)：如果任务成功完成并带有结果 value</li>
<li>reject(err)：如果出现了error</li>
</ul>
<p>Promise 对象具有以下内部属性：</p>
<ul>
<li>state：最初是 pending，然后再 resolve 被调用的时候变成 fulfilled，或者在 reject 被调用时变成 rejected</li>
<li>result：最初是 undefined，然后在 resolve 被调用的时候变为 value，或者在 reject 被调用的时候变成 error</li>
</ul>
<p><img src="../image//image-20211213150924510.png" alt="image-20211213150924510"></p>
<div align='center'>promise 状态变化</div>

<p>小提示：</p>
<ul>
<li>与最初的 &quot;pending&quot; promise 相反，一个 resolved 或 rejected 都会被称为 &quot;settled&quot;，任何状态的更改都是最终的，也就是只能调用一个 resolve 或者 一个 reject</li>
<li>如果什么出了问题，exector 应该调用 reject，这可以使用任何类型的参数来完成，但是建议使用 Error 对象</li>
<li>state 和 result 是内部的，Promise 对象的 state 和 result 属性都是内部的，我们无法直接访问它们，但我们可以对它们使用 .then / .catch / .finally 方法</li>
</ul>
<h5>消费者：then，catch，finally</h5>
<p>promise 对象充当的是 executor 和消费者代码之间的连接，后者将接收结果或者 error，通过使用 .then / .catch / .finally 来为消费者函数注册</p>
<p>踩了一个坑，如果executor中有异常，则promise 必须要有 catch 的错误回调函数，否则会报错，所以说写promise随手写 catch 是一个好习惯</p>
<p>最重要最基础的就是 then， then 的第二个参数可以是执行失败的回调函数：</p>
<pre><code class="lang-js">let promise = new Promise((resolve, reject) =&gt; {
    setTimeout(resolve(&#39;done&#39;), 1000)
})
promise.then(
    value =&gt; console.log(&#39;value: &#39;, value),        // 执行
    err =&gt; console.error(&#39;error: &#39;, err)    // 不执行
)
let promise2 = new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; reject(new Error(&#39;not&#39;)))
})
promise2.then(
    value =&gt; console.log(&#39;value: &#39;, value),        // 不执行
    err =&gt; console.error(&#39;error: &#39;, err)    // 执行
)
</code></pre>
<p>如果我们只对成功的完成感兴趣，那么可以只为 .then 提供一个函数参数：</p>
<pre><code class="lang-js">let promise = new Promise((resolve, reject) =&gt; {
    setTimeout(resolve(&#39;done&#39;), 1000)
})
promise.then(console.log)
</code></pre>
<p>如果我们只对 error 感兴趣，那么我们可以使用 null 作为 .then 的第一个参数或者使用 .catch，这两者是一样的：</p>
<pre><code class="lang-js">let promise = new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; reject(new Error(&#39;not done&#39;)), 1000)
})
promise.catch(console.log)
</code></pre>
<p>.finally(f) 调用和 .then(f, f)，类似，在某种意义上，f 总是在 promise 被 settled 时执行，finally 是执行清理（cleanup）的很好的程序（handler），它们之间有一些细微的区别：</p>
<ul>
<li>finally 处理程序时没有参数，也不知道 promise 是否成功</li>
<li>finally 处理程序将结果和 error 传递给力下一个处理程序</li>
</ul>
<p>JavaScript 不具有 sleep() 函数，但是可以尝试使用 setTImeout 和 promise 来共同实现它，也可以使用 Date.now  直接阻塞主线程（但是一般不考虑这个），一个同步一个异步</p>
<pre><code class="lang-js">// 用 promise 模拟 sleep 函数
let delay = (time = 0) =&gt; {return new Promise((resolve, reject) =&gt; setTimeout(resolve, time))}
console.log(&#39;delay time: &#39;, new Date().toLocaleTimeString())
delay(3000).then(() =&gt; console.log(&#39;runs after 3 seconds first at &#39;, new Date().toLocaleTimeString()))
// 使用 Date.now() 阻塞主线程
let delay2 = (time = 0) =&gt; {
    let record = Date.now()
    while(Date.now() - record &lt; time) ;
}
delay2(3000)
console.log(&#39;delay2 time: &#39;, new Date().toLocaleTimeString())
console.log(&#39;runs after 3 seconds second at &#39;, new Date().toLocaleTimeString())
</code></pre>
<h4>Promise 链</h4>
<p>回调我们提过，有一系列的异步任务要一个接一个地执行，加载脚本，利用 Promise 链我们可以写出更好的代码，它看起来就像这样：</p>
<pre><code class="lang-js">new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; resolve(1), 1000)
}).then(value =&gt;{
    console.log(&#39;value: &#39;, value)
    return 2
}).then(value =&gt; {
    console.log(&#39;value: &#39;, value)
    return 3
}).then(value =&gt; {
    console.log(&#39;value: &#39;, value)
    console.log(&#39;finished.&#39;)
})
</code></pre>
<p>它的理念是将 result 通过 .then 处理程序（handler）链进行传递</p>
<p><img src="../image/1639551486_image-20211215145805750.png" alt="image-20211215145805750"></p>
<div align='center'>Promise 链</div>

<p>新手常犯的一个经典错误：将多个 .then 添加到一个 promise 上，但这并不是 promise 链（chaining）：</p>
<pre><code class="lang-js">let promise = new Promise(function(resolve, reject) {
  setTimeout(() =&gt; resolve(1), 1000);
});

promise.then(function(result) {
  alert(result); // 1
  return result * 2;
});

promise.then(function(result) {
  alert(result); // 1
  return result * 2;
});

promise.then(function(result) {
  alert(result); // 1
  return result * 2;
});
</code></pre>
<p><img src="../image/1639551603_image-20211215150003300.png" alt="image-20211215150003300"></p>
<div align='center'>Promise 多处理程序情况</div>

<p>同一个 promise 上的所有 .then 获得的结果都相同，实际上我们极少遇到一个 promise 需要多处理程序（handler）的情况</p>
<h5>返回Promise</h5>
<p>.then（handler）中所使用的处理程序（handler）可以创建并返回一个 Promise，在这种情况下，其它的处理程序（handler）将等待它 settled 后再获得其结果（result）</p>
<pre><code class="lang-js">new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; resolve(1), 1000)
}).then(value =&gt; {
    console.log(&#39;value: &#39;, value)
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; resolve(99), 1000)
    })
}).then(value =&gt; {
    console.log(&#39;value: &#39;, value)
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; resolve(8), 1000)
    })
}).then(value =&gt; {
    console.log(&#39;value: &#39;, value, &#39;\nfinished.&#39;)
})
</code></pre>
<p>返回 promise 让我们能够构建异步行为链</p>
<h5>更复杂的示例：fetch</h5>
<p>一个好的做法，异步行为应该始终返回一个 promise，这样就可以使得我们计划后续的行为成为可能，即使我们现在不打算对链进行扩展，但我们之后可能会需要</p>
<pre><code class="lang-js">function loadJson(url) {
    return fetch(url)
    .then(response =&gt; response.json())
}
function loadGithubUser(name) {
    return fetch(`https://api.github.com/users/${name}`)
    .then(response =&gt; response.json())
}
function showAvatar(githubUser) {
    return new Promise((resolve, reject) =&gt; {
        let img = document.createElement(&#39;img&#39;)
        img.src = githubUser.avatar_url
        img.className = &#39;promise-avatar-examle&#39;
        document.body.append(img)

        setTimeout(() =&gt; {
            img.remove()
            resolve(githubUser)
        }, 3000)
    })
}
loadJson(&#39;/user.json&#39;)
.then(user =&gt; loadGithubUser(user.name))
.then(showAvatar)
.then(githubUser =&gt; alert(`Finished showing ${githubUer.name}`))
</code></pre>
<p>如果 .then （或 catch/finally 都可以）处理程序（handler）返回一个promise，那么链的其余部分将会等待，知道它的状态变为 settled。当它被 settled 后，其 result（或 error）将被进一步传递下去</p>
<p><img src="../image/1639555594_image-20211215160634310.png" alt="image-20211215160634310"></p>
<div align='center'> Promise chain flow chart</div>

<h4>使用 promise 进行错误处理</h4>
<p>Promise 链在错误（error）处理中十分强大。当一个 promise 被 reject 时，控制权将移交给最近的 rejection 处理程序。</p>
<pre><code class="lang-js">fetch(&#39;/article/promise-chaining/user.json&#39;)
  .then(response =&gt; response.json())
  .then(user =&gt; fetch(`https://api.github.com/users/${user.name}`))
  .then(response =&gt; response.json())
  .then(githubUser =&gt; new Promise((resolve, reject) =&gt; {
    let img = document.createElement(&#39;img&#39;);
    img.src = githubUser.avatar_url;
    img.className = &quot;promise-avatar-example&quot;;
    document.body.append(img);

    setTimeout(() =&gt; {
      img.remove();
      resolve(githubUser);
    }, 3000);
  }))
  .catch(error =&gt; alert(error.message));
</code></pre>
<p>.catch 不必是立即的，它可能在一个或多个 .then 之后出现，捕获所有 error 最简单的方法是，将 .catch 附加到链的末尾</p>
<p>Promise 的执行者（executor） 和 promise 的处理程序（handler）周围有一个“隐式”的 try...catch 。如果发生异常，它就会被捕获，并被视为 rejection 进行处理，一下这两段代码是等价的</p>
<pre><code class="lang-js">new Promise((resolve, reject) =&gt; {
    throw new Error(&#39;error&#39;)
}).catch(console.log)
new Promise((resolve, reject) =&gt; {
    reject(new Error(&#39;error&#39;))
}).catch(console.log)
</code></pre>
<h5>再次抛出（rethrowing）</h5>
<p>正如我们所注意到的，链尾端的 .catch 的表现有点像 try...catch，我们可能由许多个 .then 处理程序（handler），然后在尾端使用一个 .catch 处理上面所有的 error</p>
<p>在常规的 try...catch 中，我们可以分析错误（error），如果我们无法处理它，可以将其再次抛出，对于promise来说，这样也是可以的</p>
<p>如果我们在 .catch 中 throw，那么控制权就会被移交到下一个最近的 error 处理程序，如果我们处理该 error 并正常完成，那么它将继续到最近的成功的 .then 处理程序</p>
<pre><code class="lang-js">new Promise((resolve, reject) =&gt; {
    reject(new Error(&#39;err&#39;))
})
.catch(console.log)
.then(() =&gt; console.log(&#39;finish&#39;))
</code></pre>
<p>catch 立马继续 throw，忽略 then 处理程序，传给下一个 catch 处理程序</p>
<pre><code class="lang-js">new Promise((resolve, reject) =&gt; {
    reject(new Error(&#39;err&#39;))
})
.catch(err =&gt; {
    if(err instanceof URIError) {
        // handle it
    } else {
        throw err 
    }
})
.then(() =&gt; console.log(&#39;no handle&#39;))
.catch(err =&gt; console.log(&#39;unknown err: &#39;, err))
</code></pre>
<h5>未处理的 rejection</h5>
<p>当一个 error 没有被处理，未被 try...catch 捕获，那么脚本就死了，并在控制台留下来一个信息，同理在 promise 中未被处理的rejection 也会发生类似的事</p>
<p>JavaScript 引擎会跟踪此类 rejection，在这种情况下会生成一个全局的 error，在浏览器中我们可以使用 unhandledrejection 事件来捕获这类 error：</p>
<pre><code class="lang-js">window.addEventListener(&#39;unhandledrejection&#39;, (event) =&gt; {
    console.log(event.promise)
    console.log(event.reason)
})
</code></pre>
<p>通常此类 error 是无法恢复的，所以我们最好的解决方案是将问题告知用户，并且可以将事件报告给服务器，在 Node.js 等非浏览器环境中，有其他用于跟踪未处理的 error 的方法</p>
<h5>Fetch 错误处理示例</h5>
<p>当请求无法发出时，fetch reject 会返回 promise，但是如果远程服务器返回错误响应 404 或者是 500，这些都被认为是合法的响应，但是这应该当作错误来处理，并且无论是 404 或者 500 的响应，它的response都会被当成 json 处理，都会报 SyntaxError ，但是实际上并不是这个错误，错误只是落在了链上，并没有相关细节信息</p>
<pre><code class="lang-js">fetch(&#39;test.json&#39;)
.then(response =&gt; response.json())
.catch(console.log)    // SyntaxError: Unexpected token &lt; in JSON at position 0
</code></pre>
<p>所以我们可以为 HTTP 错误 创建一个自定义类用来区分 HTTP 错误和其它类型错误，这个新类有一个 constructor，它接受response 对象，并将其保存到 error 中</p>
<p>然后我们将请求和错误处理代码包装进一个函数，它能 fetch url 并将所有状态码不是 200 的视为错误，我们通常需要这样的逻辑</p>
<pre><code class="lang-js">// fetch 请求 github 用户
function printOneGithubUser() {
    let name = prompt(&#39;Enter your name&#39;, &#39;name&#39;)

    fetch(`https://api.github.com/users/${name}`)
    .then(response =&gt; {
        if(response.status == 200) {
            return response.json()
        } else {
            throw new HttpError(response)
        }
    })
    .then(user =&gt; console.log(&#39;user: &#39;, user))
    .catch(err =&gt;{
        if(err instanceof HttpError &amp;&amp; err.response.status != 200) {
            console.log(&#39;no such user&#39;)
            return printOneGithubUser()
        } else {
            console.log(&#39;other error: &#39;, err)
        }
    })
}
printOneGithubUser()
</code></pre>
<p>如果我们有加载指示（load-indication），finally 就是一个很好的处理程序，在 fetch 完成时停止。try...catch 结构只能抓捕同步的错误。</p>
<h4>Promise API</h4>
<p>在 Promise 类中，有 5 中静态方法</p>
<h5>Promise.all</h5>
<p>假设我们需要并行执行多个 promise，并等待所有 promise 都准备就绪，比如并行下载交给 URL，并等到所有内容都下载完毕后再对它们进行处理。</p>
<pre><code class="lang-js">// promise.all 简单使用
Promise.all([
    new Promise(resolve =&gt; setTimeout(() =&gt; resolve(1), 1000)),
    new Promise(resolve =&gt; setTimeout(() =&gt; resolve(2), 2000)),
    new Promise(resolve =&gt; setTimeout(() =&gt; resolve(3), 3000))])
.then(console.log)
let urls = [&#39;https://api.github.com/users/Ting-xin&#39;, &#39;https://api.github.com/users/Ting-xin&#39;]
Promise.all(urls.map(url =&gt; fetch(url)))
.then(responses =&gt; responses.forEach(response =&gt; {
    console.log(&#39;response: &#39;, response)
}))
</code></pre>
<p>一个更加实际的例子是 response.json()，应该有一个 promise.all 专门来处理这个，踩了一个坑，第二个Promise.all 使用 {} 会有问题，暂时我也不知道为啥：</p>
<pre><code class="lang-js">let urls = [&#39;https://api.github.com/users/Ting-xin&#39;, &#39;https://api.github.com/users/Ting-xin&#39;]
Promise.all(urls.map(url =&gt; fetch(url)))
.then(responses =&gt; Promise.all(responses.map(response =&gt; response.json())))
.then(resultArr =&gt; resultArr.forEach(result =&gt; console.log(&#39;name: &#39;, result.name)))
</code></pre>
<p>如果任意一个 promise 被 reject，由 Promise.all 返回的 promise 就会立即 reject，并且带有这个error，其它的 promise 将被忽略，其中一个失败，但是其余的 fetch 操作仍然会继续执行，但是结果还是会被忽略，promise 中没有取消的概念，只能通过 AbortController 来取消</p>
<p><code>Promise.all(iterable)</code> 允许在 <code>iterable</code> 中使用 non-promise 的“常规”值</p>
<h5>Promise.allSettled</h5>
<p>在 Promise.all 中，如果任意的 promise reject，整个都会 reject，当我们需要所有的结果，无论结果是啥的时候，就可以用 Promise.allSettled</p>
<p>例如，我们想要获取多个用户的信息，即使其中一个请求失败，我们仍然对其它的感兴趣，就可以使用 Promise.allSettled</p>
<pre><code class="lang-js">let urls = [
  &#39;https://api.github.com/users/iliakan&#39;,
  &#39;https://api.github.com/users/remy&#39;,
  &#39;https://no-such-url&#39;
];

Promise.allSettled(urls.map(url =&gt; fetch(url)))
  .then(results =&gt; { // (*)
    results.forEach((result, num) =&gt; {
      if (result.status == &quot;fulfilled&quot;) {
        alert(`${urls[num]}: ${result.value.status}`);
      }
      if (result.status == &quot;rejected&quot;) {
        alert(`${urls[num]}: ${result.reason}`);
      }
    });
  });
</code></pre>
<h5>Promise.race</h5>
<p>与 Promise.all 类似，但只等待一个 settled 的 promise 并获取其结果</p>
<pre><code class="lang-js">Promise.race([
  new Promise((resolve, reject) =&gt; setTimeout(() =&gt; resolve(1), 1000)),
  new Promise((resolve, reject) =&gt; setTimeout(() =&gt; reject(new Error(&quot;Whoops!&quot;)), 2000)),
  new Promise((resolve, reject) =&gt; setTimeout(() =&gt; resolve(3), 3000))
]).then(alert); // 1
</code></pre>
<h5>Promise.resolve、Promise.reject</h5>
<p>已经过时了，因为 async/await 语法</p>
<h4>Promisification</h4>
<p>Promisification 是指将一个接收回调的函数转换为一个返回promise的函数。由于许多函数和库都是基于回调的，因此在实际开发中经常会需要进行这种转换，因为使用 promise 更加方便，所以将基于回调的函数和库 promisfy 是有意义的</p>
<pre><code class="lang-js">function loadScript(src, callback) {
    let script = document.createElement(&#39;script&#39;)
}
</code></pre>
<h3>await 处理 promise 返回 reject 报错的问题</h3>
<p><a href="https://blog.csdn.net/fesfsefgs/article/details/107438395">blog</a></p>
<p>promise 用 async，awati 优化，不仅是为了更优雅的书写和阅读，通过优化把异步代码写成同步，也是为了更加符合人正常的思维方式</p>
<h4>ES5的异常捕获</h4>
<pre><code class="lang-js">try{
    throw new Error(3)
} catch(e) {
    console.log(e)
}
</code></pre>
<p><img src="../image/image-20211118105217837.png" alt="image-20211118105217837"></p>
<p>这是ok的，但是如果try中出现了异步的代码呢</p>
<pre><code class="lang-js">try{
    setTimeout(() =&gt; {
        throw new Error(3)
    }, 1000)
} catch(e) {
    console.log(e)
}
</code></pre>
<p><img src="../image/image-20211118105226403.png" alt="image-20211118105226403"></p>
<p>try-catch 是同步的，setTimeout 是在异步任务队列中的，同步任务执行完再从任务队列中的回调函数拿来执行就出错了</p>
<p>改正</p>
<pre><code class="lang-js">setTimeout(() =&gt; {
    try{
        throw new Error(3)
    } catch(e) {
        console.log(e)
    }
}, 0)
</code></pre>
<h4>ES6 promise 方式的错误捕获</h4>
<p>异步任务完成调用 resolve 的做法：</p>
<pre><code class="lang-js">function fn() {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve(&#39;ok&#39;)
        }, 1000)
    })
}
fn().then(res =&gt; {
    console.log(res)
})
</code></pre>
<p>异步任务失败的，调用reject的捕获异常方法：</p>
<pre><code class="lang-js">function fn() {
    return new Promise((resolve,  reject) =&gt; {
        setTimeout(() =&gt; {
            reject(3)
        }, 1000)
    })
}
fn().catch(err =&gt; console.log(err))
</code></pre>
<h4>ES6 通过 async， await优化promise时的异常捕获</h4>
<p>问题，通过 async，await的方式去优化promise，只能接收到成功 resolve() 的结果，对与 reject() 的记过是回报错的</p>
<pre><code class="lang-js">// resolve情况，正常
function fn1() {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve(&#39;ok&#39;)
        }, 0)
    })
}
async function test1() {
    let res = await fn1()
    console.log(res)
}
test1()
// reject情况，异常
function fn2() {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            reject(&#39;error&#39;)
        }, 0)
    })
}
async function test2() {
    let res = await fn2()
    console.log(res)
}
test2()
</code></pre>
<p><img src="../image/image-20211118111932371.png" alt="image-20211118111932371"></p>
<h4>解决async/await 的promise 返回错误 reject 的问题及错误捕获</h4>
<p>方式一：async/await 已经把异步代码优化成了同步代码，同步代码可以通过 try, catch捕获异常</p>
<pre><code class="lang-js">function fn() {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            reject(&#39;error&#39;)
        }, 0)
    })
}
async function test() {
    try{
        let test = await fn()
    } catch (e) { console.log(e) }
}
test()
</code></pre>
<p>方式2：通过返回一个pending 状态的结果，中断promise链的方式处理错误</p>
<pre><code class="lang-js">function fn() {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            // reject(&#39;error&#39;)
            return new Promise(() =&gt; {})    // 中断 promise 链
        })
    })
}
async function test() {
    let res = await fn()
    console.log(res)
}
test()
</code></pre>
<p>方法2不会出现多余且不好看的代码，但是根本不能拿到错误了呀</p>
<h3>正则表达式</h3>
<h4>为什么要学习字符串 处理</h4>
<p><a href="http://yphuang.github.io/blog/2016/03/15/regular-expression-and-strings-processing-in-R/">为什么学习字符串处理</a></p>
<p>传统的统计学教育几乎没有告诉过我们如何进行文本的统计建模分析。然而我们日常生活中接触到的大部分数据都是以文本的形式存在，文本分析与挖掘在业界有着非常广泛的应用。</p>
<p>由于文本数据大多数属于非结构化数据，要想对文本数据进行传统的统计模型分析，必须要经过层层的数据清洗和整理，正则表达式就用来干这个的。</p>
<p>和建立酷炫的模型比起来，数据的清洗与整理似乎是一种低档次的工作。如果吧建模比作高级厨师的工作，那么数据清洗就类似于切菜洗碗打扫卫生的活儿。然而想要成为资深的“数据玩家”，这种看似低档次的工作是必不可少的，并且这种工作极有可能占据整个建模流程的 80% 的时间。如果我们能掌握高效的数据清洗工作，那么我们将拥有更多的时间来选择模型和参数选择。</p>
<h4>教程</h4>
<p>以前一直都是草草了事，这次一定要把这个好好看懂</p>
<p><a href="https://zh.javascript.info/regexp-introduction">教程</a></p>
<h4>模式（Paterns）和修饰符（flags）</h4>
<p>正则表达式是搜索和替换字符串的一种强大方式，在JavaScript中，正则表达式通过内置的“RegExp”类的对象实现，并与字符串集成</p>
<p>创建正则表达式有两种语法</p>
<pre><code class="lang-js">// 较长的语法
regexp = new RegExp(&quot;pattern&quot;, &quot;flags&quot;)
// 较短的语法
regexp = /pattern/;        // 没有修饰符
regexp = /pattern/gmi;        // 伴随修饰符 g m i
</code></pre>
<p>如果要在字符串种进行搜索，可以使用search 方法</p>
<pre><code class="lang-js">let str = &#39;I love JavaScript&#39;
let regexp = /love/
alert(str.search(regexp))        // 2
// 上面这段代码等价于
let str = &#39;I love JavaScript&#39;
let substr = &#39;love&#39;
alert(str.search(substr))        // 2
</code></pre>
<p><code>str.search</code> 方法会查找模式 <code>/love/</code> ，然后返回匹配项在字符串中的位置</p>
<p>通常我们使用的都是简短语法 <code>/../</code> 。但是它不接受任何变量的插入，<code>new RegExp</code> 允许从字符串中动态的构造模式</p>
<pre><code class="lang-js">let search = prompt(&#39;What you want to search?&#39;, &#39;love&#39;)
let regexp = new RegExp(search)
alert(&#39;I love JavaScript&#39;.search(regexp))
</code></pre>
<p>正则表达式的修饰符可能会影响搜索结果，在JavaScript中有5个修饰符</p>
<ul>
<li>i    不区分大小写</li>
<li>g   查找所有的匹配项，而不只是第一个</li>
<li>m   多行模式</li>
<li>u    开启完整的 unicode 支持，能修正对于代理对的处理</li>
<li>y    粘滞模式</li>
</ul>
<pre><code class="lang-js">alert(&#39;love&#39;.search(/LOVE/))    // -1，没找到
alert(&#39;love&#39;.search(/LOVE/i))    // 0
</code></pre>
<p>如果不使用我们后面将会学到的修饰符和特殊标志，正则表达式的搜索就等同于字符串查找了</p>
<h4>字符类</h4>
<p>字符类（character classes）是一个特殊的符号，匹配特定集合中的任何符号</p>
<p><code>str.match(regexp)</code> 方法在字符串中 <code>str</code> 中找到匹配 <code>regexp</code> 的字符</p>
<pre><code class="lang-js">// 考虑一个实际的例子，只保留字符中的所有数字
console.log(&#39;+1,3,5,,,,&#39;.match(/\d/g).join(&#39;&#39;));        // 135
</code></pre>
<p>常用的字符类有：</p>
<ul>
<li>\d    d 来自 digit，从 0 到 9 的字符</li>
<li>\s    s 来自 space，空格符号，包括空格，制表符\t，换行符\n，及其他稀有字符，如 \v，\f 和 \r</li>
<li>\w   w 来自 word，拉丁字符或数字或下划线</li>
</ul>
<p>正则表达式可能同时包含常规符号和字符类，匹配项（每个正则表达式字符类都有对应的结果字符）</p>
<p><img src="../image/image-20211119222056851.png" alt="image-20211119222056851"></p>
<p>对于每个字符类，都有一个反向类，用相同的字符表示，但是要大写，反向代表它与所有其它字符匹配</p>
<ul>
<li>\D    非数字，匹配除 \d 以外的所有字符</li>
<li>\S    非空格字符，匹配除 \s 以外的所有字符</li>
<li>\W    非单字字符，匹配除 \w 以外的所有字符</li>
</ul>
<pre><code class="lang-js">// 考虑一个实际的例子，只保留字符中的所有数字
console.log(&#39;+1,3,5,,,,&#39;.match(/\d/g).join(&#39;&#39;));        // 135
// 另一种快捷的方式是将所有的非数字字符找到，并直接删除
console.log(&#39;+1,3,5,,,&#39;.replace(/\D/g, &#39;&#39;));        // 135
</code></pre>
<p>点（.）是一种特殊的字符类，匹配任何字符，点表示任何字符，而不是缺少字符，必须有一个与之匹配的字符</p>
<p>默认情况下，点与换行符 \n 不匹配，但在很多情况下，当我们希望用点来表示任何字符（包括换行符\n时），就要用到标识符 s</p>
<pre><code class="lang-js">console.log(&#39;a\nb&#39;.match(/a.b/))        // null
console.log(&#39;a\nb&#39;.match(/a.b/s))        // a\nb 的 object
</code></pre>
<p>但是 \s 的方式不是所有的浏览器都适用，有一种替代方法在任何地方都适用，可以使用 <code>[\s\S]</code> 之类的正则表达式来匹配任何字符</p>
<pre><code class="lang-js">alert(&quot;a\nb&quot;.match(/a[\s\S]b)/)        // a\nb
</code></pre>
<p>在正则表达式中，所有字符都很重要，空格也很重要</p>
<h4>Unicode：修饰符 &#39;u&#39; 和 class  \n{...}</h4>
<p>很久以前，当JavaScript被发明出来的时候，Unicode的编码要更加简单：当时并没有 4 个字节长的字符，所以一部分语言特性在现在仍旧无法队Unicode进行正确的处理</p>
<p>与字符串有所不同的是，正则表达式有一个修饰符 u 被用以解决这类问题，但一个正则表达式使用了这个修饰符后，4个字节长的字符将被正确的处理</p>
<p>我们可以查找具有某种属性的字符，写作 <code>\p{...}</code> ，为了顺利使用 <code>\p{...}</code>，一个正则表达式必须使用修饰符u</p>
<p><code>\p{Letter}</code> 表示任何语言中的一个字母，可以使用 <code>\p{L}</code> 代替</p>
<pre><code class="lang-js">let str = &quot;A ბ ㄱ&quot;        // 英语，格鲁吉亚语，韩语字母
console.log(str.match(/\p{L}/gu))        // [&#39;A&#39;, &#39;ბ&#39;, &#39;ㄱ&#39;]
console.log(str.match(/\p{L}/g))        // null
</code></pre>
<p>一个 16 进制数字可以表示为 <code>\p{Hex_Digit}</code>：</p>
<pre><code class="lang-javascript">let regexp = /x\p{Hex_Digit}\p{Hex_Digit}/u;

alert(&quot;number: xAF&quot;.match(regexp)); // xAF
</code></pre>
<p>有一个 unicode 属性 <code>Script</code> （一个书写系统），这个属性可以有一个值：<code>Cyrillic</code>，<code>Greek</code>，<code>Arabic</code>，<code>Han</code> （中文）等等</p>
<pre><code class="lang-js">let regexp = /\p{sc=Han}/gu;        // 返回中文
console.log(`Hello Привет 你好 123_456`.match(regexp).join(&#39;&#39;))        // 你好
</code></pre>
<p>接着是一个数字”的价格文本：</p>
<pre><code class="lang-javascript">let regexp = /\p{Sc}\d/gu;

let  str = `Prices: $2, €1, ¥9`;

alert( str.match(regexp) ); // $2,€1,¥9
</code></pre>
<p>修饰符 <code>u</code> 在正则表达式中提供对 Unicode 的支持。</p>
<p>这意味着两件事：</p>
<ol>
<li>4 个字节长的字符被以正确的方式处理：被看成单个的字符，而不是 2 个 2 字节长的字符。</li>
<li>Unicode 属性可以被用于查找中 <code>\p{…}</code>。</li>
</ol>
<p>有了 unicode 属性我们可以查找给定语言中的词，特殊字符（引用，货币）等等。</p>
<h4>锚点（anchors）： 字符串开始^和末尾$</h4>
<p>插入符号 ^匹配文本开头，而美元符号 $ 匹配文本末尾</p>
<p>测试完全匹配，这两个锚点放在一起常常被用于测试一个字符串是否完全匹配一个模式</p>
<pre><code class="lang-js">// 测试字符是否属于 12:34 的格式
let goodInput = &#39;12:34&#39;
let errInput = &#39;12:345&#39;
let regexp = /^\d\d:\d\d$/
console.log(regexp.test(goodInput))        // true 
console.log(regexp.test(errInput))        // false
</code></pre>
<p>锚点 <code>^</code> 和 <code>$</code> 属于测试。它们的宽度为零。</p>
<p>换句话来说，它们并不匹配一个具体的字符，而是让正则引擎测试所表示的条件（文本开头/文本末尾）</p>
<h4>多行模式Flag &quot;m&quot;</h4>
<p>通过flag /.../m 可以开启多行模式，这仅仅影响 ^ 和 $ 锚符的行为，在多行模式下，它们不仅仅匹配文本的开始和结束，还匹配每一行的开始和结束</p>
<pre><code class="lang-js">let str = `1st place: Winnie
2nd place: Piglet
33rd place: Eeyore`;
console.log(str.match(/^\d+/gm))        // [&#39;1&#39;, &#39;2&#39;, &#39;33&#39;]
</code></pre>
<h4>词边界 \b</h4>
<p>词边界 \b 是一种检查，就像 ^ 和 $ 一样，match 返回的应该是一个类数组</p>
<pre><code class="lang-js">console.log(&#39;hello, java&#39;.match(/\bjava\b/))        // [&#39;java&#39;]
console.log(&#39;hello, javascript&#39;.match(/\bjava\b/))        // null
</code></pre>
<p>\b 既可以用于单词，也可以用于数字</p>
<p>例如，模式 <code>\b\d\d\b</code> 查找独立的两位数。换句话说，它查找的是两位数，其周围是与 <code>\w</code> 不同的字符，例如空格或标点符号（或文本开头/结尾）。</p>
<h4>转义，特殊字符</h4>
<p>所有特殊字符的列表：[ \ ^ $ . | ? * + ( )</p>
<p>如果要把特殊字符作为常规字符来使用，只需要在它的前面加一个反斜杠</p>
<p>斜杠符号 / 并不是一个特殊符号，他被用于在 JavaScript 中开启和关闭正则匹配</p>
<pre><code class="lang-js">console.log(&#39;/&#39;.match(/\//))        // &#39;/&#39;
console.log(&#39;/&#39;.match(new RegExp(&#39;/&#39;)))        // &#39;/&#39;
</code></pre>
<p>在字符串中的反斜杠表示转义或者类似 <code>\n</code> 这种只能在字符串中使用的特殊字符。这个引用会“消费”并且解释这些字符，所以调用 new RegExp 会获得一个灭有反斜杠的字符串，如果要修复这个，需要双斜杠</p>
<ul>
<li>要在字面（意义）上搜索特殊字符 <code>[ \ ^ $ . | ? * + ( )</code>，我们需要在它们前面加上反斜杠 <code>\</code>（“转义它们”）。</li>
<li>如果我们在 <code>/.../</code> 内部（但不在 <code>new RegExp</code> 内部），还需要转义 <code>/</code>。</li>
<li>传递一个字符串（参数）给 <code>new RegExp</code> 时，我们需要双倍反斜杠 <code>\\</code>，因为字符串引号会消费其中的一个。</li>
</ul>
<h4>集合和范围 [...]</h4>
<p>在方括号 [...] 中的几个字符或者字符类意味着”搜索给定的字符中的任意一个&quot;</p>
<pre><code class="lang-js">console.log(&#39;Mop top&#39;.match(/[tm]op/gi))    // [&#39;Mop&#39;, &#39;top&#39;]
</code></pre>
<p>请注意尽管在集合中有多个字符，但它们只会对应其中一个</p>
<p>方括号可以包含字符范围，比如说 [a-z]， [0-5]</p>
<p>[0-8A-F] 表示两个范围：它搜索一个字符，满足其中一个条件，如果我们还想查找小写字母，则可以添加范围 <code>a-f</code>：<code>[0-9A-Fa-f]</code>。或添加标志 <code>i</code>。</p>
<p>由于字符类 <code>\w</code> 是简写的 <code>[a-zA-Z0-9_]</code>，因此无法找到中文象形文字</p>
<p>除了普通的范围匹配，还有类似 <code>[^...]</code> 的排除范围匹配</p>
<p>通过在匹配查询的开头添加插入符号 ^ 来表示，它会匹配所有除了给定的字符之外的任意字符</p>
<p><code>[^aeyo]</code> 匹配任何除了 a, e, y, o 之外的字符</p>
<p>在 [...] 中不转义， <code>[-().^+]</code> 会查找 <code>-().^+</code> 的其中任意一个字符：</p>
<p>范围和标志 &#39;u&#39; </p>
<pre><code class="lang-js">alert( &#39;𝒳&#39;.match(/[𝒳𝒴]/u) ); // 𝒳
</code></pre>
<h4>量词 +, *, ?, {n}</h4>
<p>数量 {n}  \d{5} 表示 5 位的数字</p>
<p>某个范围的位数： {3, 5}</p>
<p>大多数量词都可以有缩写</p>
<ul>
<li><code>+</code> 代表一个或者多个，相当于 {1,}</li>
<li><code>?</code> 代表一个或者0个，相当于{0, 1}</li>
<li><code>*</code> 代表零个或者多个，相当于 {0,}</li>
</ul>
<p>正则表达式越精确，它就越长且越复杂</p>
<h4>贪婪量词和惰性量词</h4>
<p>量词看上去很简单，但实际上它可能会很棘手，如果我们打算寻找比 /\d+/ 更加复杂的工作，就需要理解搜索工作是如何进行的</p>
<p>eg：有一个文本，我们需要用书名号： 《...》 来代理所有的 引号 “...”，第一想法是不是采用 <code>/&quot;.+&quot;/g</code> 的正则去寻找，但是实际情况并不是这样的</p>
<pre><code class="lang-js">str = &#39;&quot;str&quot; is &quot;test&quot; str&#39;
console.log(str.match(/&quot;.+&quot;/g))        // [&#39;&quot;str&quot; is &quot;test&quot;&#39;], 返回了一整个，而不是两个
</code></pre>
<ul>
<li>贪婪搜索</li>
</ul>
<p>为了查找到一个匹配项，正则表达式采用了以下算法：对于字符串中的每一个字符，用这个模式来匹配此字符，若无匹配，则移至下一个字符（回溯），在贪婪模式下（默认情况），量词都会尽可能的重复多次</p>
<ul>
<li>懒惰模式</li>
</ul>
<p>懒惰模式中的量词与贪婪模式中的是相反的，我们通过在量词后添加一个问好 ？ 来启用它，？它本身就是一个量词（0 或 1）</p>
<p>上例子中，正则表达式 <code>/&quot;.+?&quot;/g</code> 就会如预期工作了</p>
<pre><code class="lang-js">str = &#39;&quot;str&quot; is &quot;test&quot; str&#39;
console.log(str.match(/&quot;.+&quot;/g))        // [&#39;&quot;str&quot;&#39;, &#39;&quot;test&quot;&#39;], 返回了两个
</code></pre>
<p>懒惰模式只能通过带 ？ 的量词启用</p>
<pre><code class="lang-js">alert( &quot;123 456&quot;.match(/\d+ \d+?/g) ); // 123 4
</code></pre>
<p>总结：量词有两种工作模式，贪婪模式和懒惰模式</p>
<h4>捕获组</h4>
<p>模式的一部分可以用括号括起来，这称为捕获组，它有两个影响：</p>
<ul>
<li>它允许将匹配的一部分作为结果数组中的单独项</li>
<li>如果我们将量词放在括号后，则它将括号视为一个整体</li>
</ul>
<p>eg： gogogo</p>
<pre><code class="lang-js">&#39;Gogogo now&#39;.match(/(go)+/i)        // &#39;Gogogo&#39;
</code></pre>
<p>eg：域名</p>
<pre><code class="lang-js">let regexp = /(\w+\.)+\w+/g
&quot;site.com my.site.com&quot;.match(regexp)        //site.com my.site.com
</code></pre>
<p>eg: email  名称可以是任何单词，可以使用连字符和点，在正则表达式是 <code>[-.\w]+</code></p>
<pre><code class="lang-js">let regexp = /[-.\w]+@([\w-]+\.)+[\w-]+/g
&quot;my@mail.com @ his@site.com.uk&quot;.match(regexp)        // [&#39;my@mail.com&#39;, &#39;his@site.com&#39;]
</code></pre>
<p>eg： 匹配括号中的内容</p>
<p>括号可以嵌套，在这种情况下，编号从左往右</p>
<pre><code class="lang-js">let str = &#39;&lt;span class=&quot;my&quot;&gt;&#39;;
let regexp = /&lt;(([a-z]+)\s*([^&gt;]*))&gt;/;
let result = str.match(regexp);
alert(result[0]); // &lt;span class=&quot;my&quot;&gt;
alert(result[1]); // span class=&quot;my&quot;
alert(result[2]); // span
alert(result[3]); // class=&quot;my&quot;
</code></pre>
<p>可选组，即使组是可选的并且在匹配项中不存在，也存在相应的 result 数组项，并且等于 undefined</p>
<pre><code class="lang-js">let match = &#39;a&#39;.match(/a(z)?(c)?/);

alert( match.length ); // 3
alert( match[0] ); // a（完全匹配）
alert( match[1] ); // undefined
alert( match[2] ); // undefined
</code></pre>
<p>搜索所有具有组的匹配项：matchAll，由 <code>matchAll</code> 所返回的每个匹配，其格式与不带标志 <code>g</code> 的 <code>match</code> 所返回的格式相同：它是一个具有额外的 <code>index</code>（字符串中的匹配索引）属性和 <code>input</code>（源字符串）的数组</p>
<p>命名组：用数字记录组很困难。对于简单模式，它是可行的，但对于更复杂的模式，计算括号很不方便。我们有一个更好的选择：给括号起个名字。</p>
<pre><code class="lang-js">let dateRegexp = /(?&lt;year&gt;[0-9]{4})-(?&lt;month&gt;[0-9]{2})-(?&lt;day&gt;[0-9]{2})/;
let str = &quot;2019-04-30&quot;;

let groups = str.match(dateRegexp).groups;

alert(groups.year); // 2019
alert(groups.month); // 04
alert(groups.day); // 30
</code></pre>
<p>替换捕获组：方法 <code>str.replace(regexp, replacement)</code> 用 <code>replacement</code> 替换 <code>str</code> 中匹配 <code>regexp</code> 的所有捕获组。这使用 <code>$n</code> 来完成，其中 <code>n</code> 是组号</p>
<h4>模式中的反向引用： \N 和  \k <name></h4>
<p>我们可以将两种引号放在方括号中：<code>[&#39;&quot;](.*?)[&#39;&quot;]</code>，但它会找到带有混合引号的字符串，例如 <code>&quot;...&#39;</code> 和 <code>&#39;...&quot;</code>。当一种引号出现在另一种引号内，比如在字符串 <code>&quot;She&#39;s the one!&quot;</code> 中时，便会导致不正确的匹配：</p>
<pre><code class="lang-js">let str = `He said: &quot;She&#39;s the one!&quot;.`;

let regexp = /[&#39;&quot;](.*?)[&#39;&quot;]/g;

// 不是我们想要的结果
alert( str.match(regexp) ); // &quot;She&#39;
</code></pre>
<p>如我们所见，该模式找到了一个开头的引号 <code>&quot;</code>，然后文本被匹配，直到另一个引号 <code>&#39;</code>，该匹配结束。</p>
<p>为了确保模式查找的结束引号与开始的引号完全相同，我们可以将其包装到捕获组中并对其进行反向引用：<code>([&#39;&quot;])(.*?)\1</code>。</p>
<p>这是正确的代码：</p>
<pre><code class="lang-js">let str = `He said: &quot;She&#39;s the one!&quot;.`;

let regexp = /([&#39;&quot;])(.*?)\1/g;

alert( str.match(regexp) ); // &quot;She&#39;s the one!&quot;
</code></pre>
<h4>选择 |</h4>
<ul>
<li><code>gr(a|e)y</code> 严格等同 <code>gr[ae]y</code>。</li>
<li><code>gra|ey</code> 匹配 “gra” or “ey”。</li>
</ul>
<p>时间正则表达式</p>
<pre><code class="lang-js">// 错误版本
let reg = /[01]\d|2[0-3]:[0-5]\d/g;
alert(&quot;12&quot;.match(reg)); // 12 (matched [01]\d)
// 正确版本
let reg = /([01]\d|2[0-3]):[0-5]\d/g;
alert(&quot;00:00 10:10 23:59 25:99 1:2&quot;.match(reg)); // 00:00,10:10,23:59
</code></pre>
<p>正则表达式引擎查找选择模式的时是挨个查找的。意思是：它先匹配是否存在 <code>Java</code>，否则 —— 接着匹配 <code>JavaScript</code> 及其后的字符串。</p>
<ol>
<li>变更匹配顺序，长的字符串优先匹配：<code>JavaScript|Java|C\+\+|C|PHP</code>。</li>
<li>合并相同前缀：<code>Java(Script)?|C(\+\+)?|PHP</code>。</li>
</ol>
<p>运行代码如下：</p>
<pre><code class="lang-javascript">let reg = /Java(Script)?|C(\+\+)?|PHP/g;
let str = &quot;Java, JavaScript, PHP, C, C++&quot;;
alert( str.match(reg) ); // Java,JavaScript,PHP,C,C++
</code></pre>
<h4>前瞻断言与后瞻断言</h4>
<p>有时候我们需要匹配后面跟着特定模式的一段模式。比如，我们要从 <code>1 turkey costs 30€</code> 这段字符中匹配价格数值。</p>
<p>我们需要获取 <code>€</code> 符号前面的数值（假设价格是整数）。</p>
<p>那就是前瞻断言要做的事情。</p>
<ul>
<li>前瞻断言</li>
</ul>
<p>语法为：<code>x(?=y)</code>，它表示 “匹配 <code>x</code>, 仅在后面是 <code>y</code> 的情况&quot;”</p>
<p>语法为：<code>x(?!y)</code>，意思是 “查找 <code>x</code>, 但是仅在不被 <code>y</code> 跟随的情况下匹配成功”。</p>
<ul>
<li>后瞻断言</li>
</ul>
<p>前瞻断言允许添加一个“后面要跟着什么”的条件判断。</p>
<p>后瞻断言也是类似的，只不过它是在相反的方向上进行条件判断。也就是说，它只允许匹配前面有特定字符串的模式。</p>
<p>语法为:</p>
<ul>
<li>后瞻肯定断言：<code>(?&lt;=y)x</code>, 匹配 <code>x</code>, 仅在前面是 <code>y</code> 的情况。</li>
<li>后瞻否定断言：<code>(?&lt;!y)x</code>, 匹配 <code>x</code>, 仅在前面不是 <code>y</code> 的情况。</li>
</ul>
<h4>灾难性回溯</h4>
<p>有些正则表达式看上去很简单，但是执行起来耗时非常非常非常长，甚至会导致 JavaScript 引擎「挂起」。</p>
<p>开发者们很容易一不小心就写出这类正则表达式，所以我们迟早会面对这种意外问题。</p>
<p>典型的症状就是 —— 一个正则表达式有时能正常工作，但对于某些特定的字符串就会消耗 100% 的 CPU 算力，出现“挂起”现象。</p>
<p>在这种情况下，Web 浏览器会建议杀死脚本并重新载入页面。这显然不是我们愿意看到的。</p>
<p>在服务器端 JavaScript 中，在使用这种正则表达式处理用户数据时可能会引发程序漏洞。</p>
<h3>搭建一个图床</h3>
<p><a href="https://www.naeco.top/2020/08/11/private-oss-for-image/">利用Minio搭建私有图床</a></p>
<h4>简介</h4>
<p>图片存储服务，也叫图床，是博客需要具备的基础服务。过往我们采用的是公共免费的图床，但是这些服务有一些缺点：</p>
<ul>
<li>存储容量受限</li>
<li>稳定性，可能突然对方不提供服务了</li>
<li>安全性，没在自己这始终不放心</li>
</ul>
<p>因此，大家开始自建私有图床，参考的博客的采用的存储服务是<a href="https://min.io/">Minio</a></p>
<h4>AWS S3</h4>
<p><a href="http://www.thinkingincrowd.me/2020/03/10/aws-s3/">一文读懂 AWS S3</a></p>
<p>S3 的全名是 simple storage service，简单的存储服务。它的作用有：</p>
<ul>
<li>提供了同一的接口 REST/SOAP 来统一访问任何数据</li>
<li>对 S3 来说，存在里面的就是对象名和数据</li>
<li>不限量，单个文件最高可达 5 TB</li>
<li>高速，每个 bucket 下每秒可达 3500 put/copy/post/delete 或 5500 get/head 请求</li>
<li>具备版本、权限控制能力</li>
<li>具备数据生命周期管理能力</li>
</ul>
<p>每个对象最多指定 10 个标签（其实数据标签真的很有用）</p>
<h4>防盗链</h4>
<p><a href="https://juejin.cn/post/6844903825124360200">传说中防盗链的爱恨情仇</a></p>
<p>盗链是指自己的页面上展示一些并不在自己服务器上的内容。通常的做法是通过技术手段获得它人服务器上的资源地址，绕过别人的资源展示页面，直接在自己的页面上向最终用户提供此内容，比较常见的是一些小站盗用大站的资源</p>
<p>防盗链的原理：在HTTP协议中，如果从一个页面调到另一个页面，header字段里面会带个Referer，图片服务器通过检测Referer是否来自规定的域名来进行防盗链</p>
<h3>前端常用功能集合</h3>
<p><a href="https://juejin.cn/post/6844904066418491406#heading-1">掘金</a></p>
<p>这位大佬自己动手做了前端的一些无依赖，精简高效的东西，然后按需应用到实际项目中，小白也想要一个一个的试试，就当练手了</p>
<h4>http请求</h4>
<p>前端必备技能，也是使用最多的技能。</p>
<h5>基础知识</h5>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a>  (XHR) 对象用于与服务器交互，通过 XMLHttpRequest 可以在不刷新页面的情况下请求特定 URL，获取数据。这允许页面在不影响用户操作的情况下更行页面的局部内容，XMLHttpRequest 在 AJAX 编程中被大量使用。 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/AJAX">AJAX</a>(Asynchronous JavaScript And XML) 是一种使用 XMLHttpRequest 技术构建更复杂，动态的网页的编程实践。AJAX 允许只更新一个 HTML 页面的部分 DOM，而无须重新加载整个页面。AJAX 还允许异步工作，这意味着当网页的一部分正试图重新加载时，代码可以继续运行</p>
<h5>AJAX</h5>
<ol>
<li>发送请求</li>
</ol>
<p>为了使用 JavaScript 向服务器发送一个 http 请求，所以需要一个包含必要函数功能的对象实例，这就是为什么会有 XMLHttpRequest 的原因</p>
<p>创建一个 XMLHttpRequest 实例：</p>
<pre><code class="lang-js">// Old compatibility code, no longer needed.
if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+...
    httpRequest = new XMLHttpRequest()
} else {
    httpRequest = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)
}
</code></pre>
<p>发送一个请求后会收到响应，在这个阶段，需要告诉 XMLHttp 请求对象应该由哪一个 JavaScript 函数处理响应</p>
<pre><code class="lang-js">httpRequest.onreadystatechange = nameofTheFunction;        // 这个只是应用赋值，为了真正的调用，应该用个匿名函数
httpRequest.onreadystatechange = () =&gt; {
    // process the server response here.
}
</code></pre>
<p>接下来，通过调用 HTTP 请求对象的 open() 和 send() 方法：</p>
<pre><code class="lang-js">httpRequest.open(&#39;GET&#39;, &#39;http://www.example.org/some.file&#39;, true)
httpRequest.send()
</code></pre>
<ul>
<li><p>open 的第一个参数是 HTTP 请求，由 GET, POST, HEAD 以及服务器支持的其它方法，这些方法都是大写</p>
</li>
<li><p>第二个参数是你要发送的URL。由于安全原因，默认不能调用第三方 URL 域名。确保使用正确的域名，否则调用时会有&quot;permission denied&quot; 错误提示</p>
</li>
<li>第三个参数是设置请求是否异步，如果是 true 即代表是异步</li>
</ul>
<p>send() 方法的参数可以是任何你想发送给服务器的内容，如果是 POST 请求的话，发送表单数据应该用服务器可以解析的格式</p>
<ol>
<li>处理服务器响应</li>
</ol>
<p>在发送请求时，我们提供的JavaScript函数负责处理响应，这个函数首先检查请求的状态，如果状态值是 XMLHttpRequest.DONE(对应的值是4)，意味着服务器响应收到了并且是没有问题的，然后可以继续执行</p>
<pre><code class="lang-js">httpRequest.onreadystatechange = () =&gt; {
    if(httpRequest.readyState = XMLHttpRequest.DONE) {
        // everythin is good, the response is received.
    } else {
        // not ready yet.
    }
}
</code></pre>
<p>接下来通过检查 200 OK 判断AJAX有没有成功</p>
<pre><code class="lang-js">if (httpRequest.status === 200) {
    // perfect!
} else {

}
</code></pre>
<ol>
<li>一个简单的例子</li>
</ol>
<pre><code class="lang-js">&lt;button id=&#39;test&#39; type=&#39;button&#39;&gt;make a request&lt;/button&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
(function() {
    var httpRequest;
    document.getElementById(&#39;test&#39;).addEventListener(&#39;click&#39;, makeRequest)

    function makeRequest() {
        httpRequest = new XMLHttpRequest()
        if(!httpRequest) {
            alert(&#39;Browser don\&#39;t support XMLHttpRequest.&#39;)
            return
        }
        httpRequest.onreadystatechange = handleRequest
        httpRequest.open(&#39;GET&#39;, &#39;www.test.com/test.html&#39;)
        httpRequest.send()
    }

    function handleRequest() {
        if(httpRequest.readystate = XMLHttpRequest.DONE) {
            if(httpRequest.status = 200) {
                alert(httpRequest.responseText)
            } else {
                alert(&#39;Something wrong.&#39;)
            }
        }
    }
})
&lt;/script&gt;
</code></pre>
<p>在这个例子中：</p>
<ul>
<li>用户点击“make a request” 按钮</li>
<li>事件处理调用 makeRequest() 函数</li>
<li>请求通过 onreadystatechange 传给 handleRequest 函数</li>
<li>handleRequest 函数首先进行判断，然后处理</li>
</ul>
<p>提示：</p>
<ul>
<li>如果你向一个代码片段发送请求，将返回 XML，而不是静态 XML 文件，在 IE 浏览器上则必须要设置响应头才能正常工作。如果不设置响应头 Content-Type: application/xml，IE 浏览器会在访问你的 XML 元素的时候抛出 “Object Expected” 错误</li>
<li>如果不设置响应头 Cache-Control: no-cache，那么浏览器会把响应缓存下来而且再也无法重新提交请求。还有一种做法是添加一个总是不同的 GET 参数，比如时间戳或者随机数</li>
<li>如果变量 httpRequest 在全局范围内使用，那么它会在 makeRequest() 函数中被相互覆盖，从而导致资源竞争，为了避免这个情况，请求包含 AJAX 函数的闭包中声明 httpRequest 变量</li>
</ul>
<p>在通信错误的事件中（例如服务器宕机），在访问响应状态 onreadystatechange 方法中会掏出一个例外 exception，为了缓和这种情况，则可以使用 <code>try...catch...</code></p>
<pre><code class="lang-js">function handleRequest() {
    try{
        if(httpRequest.onreadystate === XMLHttpRequest.DONE) {
            if(httpRequest.status === 200) {
                // do something with httpRequest.responseText
            } else {
                alert(&#39;something wrong&#39;)
            }
        }
    } catch(e) {
        alert(&#39;Caught Exception: &#39; + e.description)
    }
}
</code></pre>
<p>XMLHttpRequest.readyState:</p>
<ul>
<li>0    未初始化 或 请求还未初始化</li>
<li>1    正在加载 或 已建立服务器链接</li>
<li>2    加载成功 或 请求已接收</li>
<li>3    交互 或 正在处理请求</li>
<li>4    完成 或 请求已完成并且响应已准备好</li>
</ul>
<p>XMLHttpRequest.status:</p>
<ul>
<li>100-199    信息响应</li>
<li>200-299    成功响应</li>
<li>300-399    重定向消息</li>
<li>400-499    客户端错误响应</li>
<li><p>500-599    服务端错误响应</p>
</li>
<li><p>处理 XML 响应</p>
</li>
</ul>
<p>在上一个例子中，在收到 HTTP 请求的响应后我们会使用对象的 responseText 属性，包含 test.html 文件的内容。现在我们试试 responseXML 属性</p>
<p>有效的 xml 文档：</p>
<pre><code class="lang-xml">&lt;?xml version=&#39;1.0&#39;&gt;
&lt;root&gt;test&lt;/root&gt;
</code></pre>
<p>将 <code>test.html</code> 改为 <code>test.xml</code> ，然后再把 <code>httpRequest.responseText</code> 改为：</p>
<pre><code class="lang-js">let xmlDoc = httpRequest.responseXML;
let rootNode = xmlDoc.getElementByTagName(&#39;root&#39;).item(0)
alert(rootNode.firstChild.data)
</code></pre>
<h5>Fetch API</h5>
<p>Fetch API 提供了一个获取资源的接口（包括跨域请求）。任何使用过 XMLHttpRequest 的人都能轻松上手，新的 API 提供了更强大和灵活的功能集。Fetch 提供了对 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Request"><code>Request</code></a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Response"><code>Response</code></a> （以及其他与网络请求有关的）对象的通用定义。使之今后可以被使用到更多的应用场景中：无论是service worker、cache api、又或者是其它处理请求和响应的方式、甚至是任何一种需要再自己程序中生成响应的方式</p>
<p>fetch() 必须接受一个参数：资源的路径。无论请求成功与否，它都返回一个 Promise 对象，resolve 对应请求的 Response</p>
<p>简单使用：</p>
<pre><code class="lang-js">fetch(&#39;http://example.com/movies.json&#39;).then(response =&gt; response.json()).then(data =&gt; console.log(data))
</code></pre>
<p>fetch() 接收第二个可选参数，一个可以控制不同配置的 init 对象：</p>
<pre><code class="lang-js">// example of post method implementation by fetch api
async function postData(url = &#39;&#39;, data = {}) {
    const response = await fetch(url, {
        // default option are marked with *
        method: &#39;POST&#39;,    // *GET, POST, PUT, DELETE, etc.
        mode: &#39;cors&#39;,    // no-cors, *cors, same-origin
        cache： &#39;no-cache&#39;,    // *default, no-cache, reload, force-cache, only-if-cached
        credentials: &#39;same-origin&#39;,        // include, *same-cache, omit
        headers: {
            &#39;Content-Type&#39;: &#39;application/json&#39;
            //&#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;
        },
        redirect: &#39;follow&#39;, //manual, *follow, error
        referrerPolicy: &#39;no-referrer&#39;,    // no-referrer, *no-refer-when-downgrade, etc.
        body: JSON.stringfy(data)    // body data type must match &quot;Content-Type&quot; header
    })
    return response.json()    // parses JSON response into native JavaScript objects
}
</code></pre>
<p>使用 fetch() 发送 json 数据：</p>
<pre><code class="lang-js">// Post json data by fetch api
fetch(url, {
    method: &#39;Post&#39;,
    headers: {
        &#39;Content-Type&#39;: &#39;application/json&#39;
    },
    body: JSON.stringfy(data)
})
.then(res =&gt; res.json())
.then(data =&gt; console.log(&#39;success: &#39;,data))
.catch((e) =&gt; {
    console.error(&#39;error: &#39;, e)
})
</code></pre>
<p>通过 HTML <code>&lt;input type=&#39;file&#39; /&gt;</code> 元素，<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData/FormData"><code>FormData()</code></a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/fetch"><code>fetch()</code></a> 上传文件：</p>
<pre><code class="lang-js">// Put file by fetch api
const formData = new FormData()
const fileField = document.querySelector(&#39;input[type=&quot;file&quot;]&#39;)
formData.append(&#39;name&#39;, &#39;test&#39;)
formData.append(&#39;file&#39;, fileField.files[0])
fetch(url, {
    method: &#39;PUT&#39;,
    body: formData
})
.then(res =&gt; res.json())
.then(data =&gt; console.log(&#39;success: &#39;, data))
.catch((e) =&gt; {
    console.error(&#39;error: &#39;, e)
})
</code></pre>
<p>通过 HTML <code>&lt;input type=&#39;file&#39; multiple /&gt;</code> 元素，<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData/FormData"><code>FormData()</code></a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/fetch"><code>fetch()</code></a> 上传文件：</p>
<pre><code class="lang-js">// Post files by fetch api
const filesField = document.querySelector(&#39;input[type=&quot;file&quot;][multiple]&#39;)
const formData2 = new FormData()
formData2.append(&#39;name&#39;, &#39;multiple files&#39;)
for(let i = 0; i &lt; filesField.files.length; ++i) {
    formData2.append(`file${i}`, filesField.files[i])
}
fetch(url, {
    method: &#39;POST&#39;,
    body: formData2
})
.then(res =&gt; response.json())
.then(data =&gt; console.log(&#39;success: &#39;, data))
.catch(e =&gt; console.error(&#39;error: &#39;, e))
</code></pre>
<p>从响应中读取的分块并不是按行分割的，并且是 Uint8Array 数组类型（不是字符串类型）。如果通过 fetch() 获取一个文本文件并逐行处理它，那需要自行处理这些复杂的情况：</p>
<pre><code class="lang-js">// Processing text files line by line
async function* makeTextFileLineIterator(fileURL) {
    const utf8Decoder = new TextDecoder(&#39;utf-8&#39;)
    const response = new fetch(fileURL)
    const reader = response.body.getReader()
    let { value: chunk, done: readerDone} = await reader.read()
    chunk = chunk ? utf8Decoder.decode(chunk): &#39;&#39;

    const re = /\n|\r|\r\n/gm;
    let startIndex = 0
    let result
    for(;;) {
        let result = re.exec(chunk)
        if(!result) {
            if(readerDone) {
                break
            }
            let remainder = chunk.substr(startIndex)
            ({ vlaue: chunk, done: readerDone} = await reader.read());
            chunk = remainder + (chunk ? utf8Decoder.decode(chunk): &#39;&#39;)
            startIndex = re.lastIndex = 0
            continue
        }
        yield chunk.substring(startIndex, result.index)
        startIndex = re.lastIndex
    }
    if(startIndex &lt; chunk.length) {
        yield chunk.substr(startIndex)
    }
}
async function run() {
    for await(let line of makeTextFileLineIterator(urlOfFile)) {
        processingLine(line)
    }
}
run()
</code></pre>
<p>如果遇到网络故障或者服务端的 CORS 配置错误时， fetch() promise 将会 reject，带上一个 TypeError 对象</p>
<pre><code class="lang-js">// Detecting the success of a request
fetch(&#39;test.jpg&#39;)
.then(response =&gt; {
    if(!response.ok) {
        throw new Error(&quot;Network response was not ok&quot;)
    }
    return response.blob()
})
.then(myBlob =&gt; {
    myImage.src = URL.createObjectURL(myBlob)
})
.catch(err =&gt; console.error(&#39;error: &#39;, error))
</code></pre>
<p>除了传给 fetch() 一个资源的地址，还可以通过 Request() 构造函数来创建一个 request 对象，然后在作为参数传给 fetch()：</p>
<pre><code class="lang-js">// Customizing the request object
const myHeader = new Headers()
const request = new Request(&#39;test.jpg&#39;, {
    method: &#39;GET&#39;,
    headers: myHeader,
    mode: &#39;cors&#39;,
    cache: &#39;default&#39;
})
fetch(request)
.then(response =&gt; response.blob())
.then(myBlob =&gt; myImage.src = URL.createObjectURL(myBlob))
</code></pre>
<p><strong>提示：</strong></p>
<p>当请求使用 <code>credentials: &#39;include&#39;</code> 时，响应的 <code>Access-Control-Allow-Origin</code> 不能使用通配符 <code>*</code>，在这种情况下， <code>Access-Control-Allow-Origin</code> 必须是当前请求的源</p>
<p>function<em> 是定义一个生成器函数（generator function），它返回一个 generator 对象，generator 函数在执行时能暂停，后面又能从暂停出继续执行。调用一个 generator 函数并不会马上执行它里面的语句，而是返回一个这个生成器的迭代器（iterator）对象。当这个迭代器的 next() 方法被首次（后续）调用时，其内的语句会执行到一个出现 yield 的位置为止，yield 后紧跟迭代器要返回的值，如果使用的是 yield</em> 则表示执行权移交给另一个生成器函数（当前生成器暂停执行）。当在生成器函数中显示 return 时，会导致生成器立即变成完成状态</p>
<p>Request()  构造器创建一个新的 Request 对象，语法： <code>let myRequest = new Request(input[, init])</code> </p>
<p>不管是请求还是响应都能够包含 body 对象，body 也可以是以下任意类型的实例：</p>
<ul>
<li>ArrayBuffer</li>
<li>ArrayBufferView(Uint8Array 等)</li>
<li>Blob/File</li>
<li>string</li>
<li>URLSearchParams</li>
<li>FormData</li>
</ul>
<p>Body 类定义了以下方法以获取 body 内容，这些方法都会返回一个别解析后的 Promise 对象和数据，相比于 XHR，这些方法让非文本化数据的使用更加简单：</p>
<ul>
<li>Request.arrayBuffer()</li>
<li>Request.blob()</li>
<li>Request.formData()</li>
<li>Request.json()</li>
<li>Request.text()</li>
</ul>
<h3>JSDoc</h3>
<p><a href="https://juejin.cn/post/6844903828123320334">使用JSDoc提高代码的可读性</a></p>
<p>讲的很好，脑容量要用到改用的地方，写出别人看不懂的代码不是什么能力，写出所有人能看懂的代码才是真的厉害</p>
<h3>RESTful</h3>
<h4>理解 RESTful 架构</h4>
<p><a href="https://www.ruanyifeng.com/blog/2011/09/restful.html">理解RESTful架构</a></p>
<p>越来越多的人意识到，网络即软件，而且是一种新型的软件，这种“互联网软件”采用客户端/服务端模式，建立在分布式体系上，通过互联网通信，具有高延时（hige latency），高并发等特点。网站开发，完全可以采用软件开发的模式，但是传统上，软件和网络是两个不同的领域，软件开发主要针对单机环境，网络则主要研究系统之间的通信。互联网的兴起，这两个领域开始融合，现在我们必须考虑，如何开发在互联网环境中使用的软件。</p>
<p>RESTful 架构是目前流行的一种互联网软件架构，它结构清晰、符合标准、易于理解、扩展方便，被多个网站所采用</p>
<h4>起源</h4>
<p>Fielding 在 2000 年的博士论文中提出，作者目的是在符合架构原理的前提下，理解和评估以网络为基础的应用软件的架构设计，得到一个功能强，性能好，适宜通信的架构。Fielding 将他对互联网软件的架构原则，定名为 REST，即 Representational State Transfer 的缩写，即 表现层状态变化。要理解 RESTful 架构，最好的方法就是去理解 Representational State Transfer 这个词组的意思。</p>
<h4>资源（Resources)</h4>
<p>REST 的名称“表现层状态转化”中，省略了主语，表现层其实指的是资源（Resorces）的表现层</p>
<p>所谓资源，就是网络上的一个实体，或者说是网络上的一个具体的信息，可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的 URI，要获取这个资源，访问相应的 URI 即可。上网其实就是与互联网上的一系列资源的互动，调用它的URI</p>
<h4>表现层（Representation）</h4>
<p>资源是一种信息实体，它可以有很多种外在表现形式。我们把资源具体呈现出来的形式，叫做它的表现层（Representation）。比如，文本可以用txt格式表现，也可以用 HTML 格式、 XML 格式、 JSON 格式呈现；图片可以用 JPG 格式表现，PNG 格式表现。URI 只代表资源的实体，不代表它的具体形式，它的具体表现形式应该在 HTTP 请求的头信息中用 Accept 和 Content-Type 字段指定。</p>
<h4>状态转化（State Transfer）</h4>
<p>访问一个网站，就代表了客户端和服务端的一个互动过程，在这个过程中，势必涉及到数据和状态的变化。互联网通信协议 HTTP 协议是一个无状态协议，这意味着所有的状态都保存在服务器端，如果客户端想要操作服务器，必须通过某种手段让服务器端发生“状态转化”（State Transfer），而这种状态变化是建立在表现层之上的，所以就是“表现层状态转化”</p>
<p>客户端用到的手段只能是 HTTP 协议，具体来说就是 HTTP 协议中四个表示操作方式的动词：GET、POST、POST、PUT、 DELETE。它们分别对应四种基本操作：GET 用来获取资源，POST 用来新建资源（也可以用来更新资源），PUT 用来更新资源，DELETE 用来删除资源。</p>
<h4>综述</h4>
<p>综上，我们总结一下什么是RESTful 架构：</p>
<ul>
<li>资源（Resource）：每一种 URI 表示一种资源</li>
<li>表现层（Representation）：客户端与服务器端传递这种资源的某种表现层</li>
<li>状态转化（State Transfer）：客户端通过 HTTP 四个动词对服务端资源进行操作，实现“表现层状态转化”</li>
</ul>
<p>RESTful 架构中不应该有动词</p>
<h3>深入理解浏览器</h3>
<p>原文：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Fupdates%2F2018%2F09%2Finside-browser-part1">Inside look at modern web browse</a></p>
<p>翻译：<a href="https://juejin.cn/post/7035791817803038728">深入了解现代浏览器</a></p>
<h4>精读</h4>
<h5>分层结构</h5>
<p>模块之间需要合理分工，一般称之为 renderer process 而不是 renderer thread，因为 process（进程）相比 thread（线程），之间的数据是被操作系统隔离的，为了网页间无法相互读取数据，浏览器必须为每个 tab 创建一个独立的进程，甚至每个 iframe 都必须是独立进程（但是我查询的 vue 中 tab 和 iframe 存在数据交互）</p>
<p>UI thread 处理浏览器 UI 的展现与用户交互，比如当前加载的状态变化，历史前进后退，浏览器地址的输入、校验与监听按下 Enter 等事件，但不会涉及诸如发送请求、解析网页内容、渲染等内容</p>
<p>network thread 仅处理网络相关的事情，它主要关心通信协议、安全协议，目标就是快速准确的找到网站服务器，并读取其内容。network thread 会读取内容头做一些前置判断，读取内容和 renderer process 做的事情是有一定重合，但是 network thread 读取内容头仅为了判断内容类型，以便交给渲染引擎或者下载管理器（content-type 等设置），所以为了不让渲染引擎知道下载管理器的存在，读取内容头必须交给 network thread 来做</p>
<p>browser process 做与 renderer process 的通信， 也就是 UI thread、network thread 一旦要创建或与 renderer process 通信，都会交由它们所在的 browser process 处理</p>
<p>renderer process 仅处理渲染逻辑，它不关心从哪来的，比如是网络请求来的，还是 service worker 拦截后修改的，也不关心当前浏览器的状态是什么，它只管按照约定的接口规范，在指定的节点抛出回调，而修改应用状态由其它关心的模块复杂，比如 onload 回调触发后，browser process 处理浏览器的状态就是一个例子</p>
<p>假如 renderer process 里点击了一个新的跳转链接，这个事情是发生在 renderer process，但会交给 browser process 处理，因为每个模块解耦的非常彻底，所以任何复杂工作都能找到一个能响应它的模块，而这个模块也只要处理这个复杂工作的一部分，其余部分交给其它模块就好了，这就是大型应用维护的秘诀（类比 GFS 中的一个 master 节点，这些不就是设计的一些思想吗，说起来设计模式也只是看了一个开头）</p>
<p>提到加速优化，Chrome 惯用技巧就是用资源换时间（其实硬盘现在都不值钱，都是资源换时间，分布式也是想要通过空间换取其它东西）。即宁可浪费潜在资源，也要让事物尽可能的并发，这些从提前创建 renderer process、提前发起 network proces 都能看出来</p>
<h5>从渲染分层看性能优化</h5>
<p>渲染有 5 个重要环节：解析、样式、布局、绘图、合成，这是前端开发者日常工作中对浏览器体感最深的部分，也是优化最常发生的部分</p>
<p>从性能优化角度来看，解析环节可以被替代为 JS 环节，因为现代 JS 框架往往没有什么 HTML 模板内容要解析，几乎全是 JS 操作 DOM，所以可以看作 5 个新的环节：JS、样式、布局、绘图、合成</p>
<p>几乎每层的计算都依赖上层的结果，但并不是每层都一定会重复计算，尤其是以下几点：</p>
<ul>
<li>修改元素的几何属性（位置、宽高等）会触发所有层的重新计算，因为这是一个非常重量级的修改</li>
<li>修改某个元素绘图属性（颜色、背景色），并不影响位置，则会跳过布局层</li>
<li>修改比如 transform 属性会跳过布局与绘图层，transform 的内容会提升到合成层并交由 GPU 渲染</li>
</ul>
<h5>隐式合成层、层爆炸、层自动合并</h5>
<p>除了 transform、will-change 属性外，还有很多种情况元素会提升到合成层，比如 video、canvas、iframe、fixed 元素，这些都有明确的规则，所以属于显式合成</p>
<p>而隐式合成是指元素没有被特别标记，但也被提升到合成层的情况，这种情况常见发生在 z-index 元素产生重叠时，下方的元素显式申明提升到合成层，则浏览器为了保证 z-index 覆盖关系，就要隐式把上方的元素提升到合成层</p>
<p>层爆炸是指隐式合成的原因，当 css 出现一些复杂行为时（比如轨迹动画），浏览器无法实时捕捉到哪些元素位于当前元素上方，所以只好把所有元素都提升到合成层，当合成层数量过多，主线程与 GPU 的通信可能会成为瓶颈，反而影响性能</p>
<p>浏览器也会支持层自动合并，比如隐式提升到合成层时，多个元素会自动合并到一个合成层里。但这种方式不总是靠谱的，自动处理毕竟猜不到开发者的意图，所以最好的优化方式就是开发自己主动干预</p>
<p>浏览器规范由于是逐步迭代的，因此看似都在描述位置的 css 属性其实背后实现原理都是不同的，虽然这个规则体现在 W3C 规范上，但如果仅从属性名是很难看出端倪的，因此想要做极致性能优化就必须了解浏览器实现原理</p>
<h4>深入理解浏览器一</h4>
<h5>CPU、GPU、操作系统、应用的关系</h5>
<p>cpu：可以处理几乎所有计算，现在的cpu是多核的</p>
<p>gpu：开始专门为图像处理设计，现在拥有大量并行处理简单事物的能力，非常适合矩阵运算，矩阵运算又是图形学的基础，所以大量用在可视化领域</p>
<p>这些硬件各自都提供了一些接口供汇编语言使用，而操作系统基于它们之上用 c 语言（如Linux）将硬件管理了起来，包括进程调度、内存分配、用户内核态切换等</p>
<p>运行在操作系统之上的就是应用程序了，应用程序不直接和硬件打交道，而是通过操作系统间接操作硬件</p>
<p>为什么应用程序不能直接操作硬件呢？这样做有巨大的安全隐患，因为硬件是没有任何抽象与安全措施的，这意味着理论上一个网页可以通过 js 程序，在你打开网页时直接访问你的任意内存地址，读取你的聊天记录，甚至读取历史输入的银行卡密码进行转账操作。</p>
<h5>进程与线程</h5>
<p>为了让程序运行的更安全，操作系统创造了进程与线程的概念（Linux对进程与线程的实现是同一套），进程可以分配独立的内存空间，进程内可以创建多个线程进行工作，这些线程共享内存空间</p>
<p>因为线程间共享内存空间，因此不需通信就能交流，但内存地址相互隔离的进程间也有通信需求，需通过IPC（inter process communication）进行通信</p>
<p>进程之间相互独立，即一个进程挂了不会影响到其它进程，而在一个进程中可以创建一个新进程，并与之通信，所以浏览器就采用了这种策略，将UI、网络、渲染、插件、存储等模块进程独立，并且任意挂掉之后都可以被重新唤起</p>
<h5>浏览器架构</h5>
<p>浏览器可以拆分为许多独立的模块，比如</p>
<ul>
<li>浏览器模块（Browser）：负责整个浏览器内行为协调，调用各个模块</li>
<li>网络模块（Network）：负责网络 I/O</li>
<li>存储模块（Storage）：负责本地 I/O</li>
<li>用户界面模块（UI）：负责浏览器提供给用户的界面模块</li>
<li>GPU模块：负责绘图</li>
<li>渲染模块（Rencderer）：负责渲染网页</li>
<li>设备模块（Device）：负责与各种本地设备交互</li>
<li>插件模块（Plugin）：负责处理各类浏览器插件</li>
</ul>
<p>基于这些模块，浏览器有两种可用的架构设计：一种是少进程，一种是多进程</p>
<h5>Chrome 多进程架构的优势</h5>
<p>Chrome 尽量为每个 tab 单独创建一个进程，所以我们才能在某个tab未响应时，从容的关闭它，而其它tab不会受影响。不仅是tab间，一个tab内的iframe也会创建一个单独的进程</p>
<p>Chrome 并不满足于采用一种架构，而是在不同环境下切换不同的架构。Chrome 将各功能模块化后，就可以自由决定当前将哪些模块放在一个进程中，将哪些模块启动独立的进程，即可以在运行时决定采用哪套进程架构</p>
<h6>浏览器的主从架构</h6>
<p>类似应用模式的主从模式，浏览器的 Browser 模块可以看作是主模块，它本身用于协调其它模块的运行，并维持其它各模块的正常工作，在其它模块失去响应时等待或重新唤起，在模块销毁时进行内存回收</p>
<p>各从模块也分工明确，比如在浏览器敲击URL地址时，会先通过 UI 模块响应用户的输入，并判断输入是否是 URL 地址，若校验通过之后，会通知 Network 网络模块发送请求，UI 模块就不再关心请求是如何处理了。Network模块也是相对独立的，仅处理请求的发送与接收，如果接收到的是 HTML 网页，则交给 Render 模块进行渲染</p>
<p>有了这些相对独立且分工明确的模块划分后，将这些模块作为线程或进程管理就都不会影响他们的业务逻辑了，唯一影响的就是内存是否共享，以及某个模块 crash 后是否会影响其它模块了。</p>
<h4>深入理解浏览器二</h4>
<h5>概述</h5>
<p>重点介绍了浏览器路由跳转后发生了什么，上一篇介绍了，browser process 包含了 UI thread，network thread 和 storage thread，当我们在浏览器菜单栏输入网址并敲击回车时，这套动作均由 browser process 的 UI thread 响应</p>
<h5>普通的跳转</h5>
<ol>
<li>UI thread 响应输入，并判断是否是合法的网址，如果是搜索协议，导致分发到另外的服务处理</li>
<li>如果第一步输入的是合法地址，则 UI thread 会通知 network thread 获取网页内容，network thread 会寻找合适的协议处理网络请求，一般会通过 DNS协议 寻址，通过 TLS 协议 建立安全链接。如果服务器返回了比如 301 重定向信息，network thread 会通知 UI thread 这个信息，再启动一遍第二步</li>
<li>读取响应内容，在这一步 network thread 会首先读取首部一些字节，即我们常说的响应头，其中包含 Content-Type 告知返回内容是什么，如果返回内容是 HTML，则 network thread 会将数据传送给 renderer process。这一步还会校验安全性，比如 CORB 或 cross-site 问题</li>
<li>寻找 renderer process，一旦所有检查都完成，network thread 会通知 UI thread 已经准备好跳转了（注意此时并没有加载完所有数据，第三步只是检查了首字节），UI thread 会通知 renderer process 进行渲染。为了提升性能， UI thread 在通知 network thread 的同时会实例化一个 renderer process 等着，一旦 network thread 完毕后就可以立即进入渲染阶段</li>
<li>确认导航。第四步后，browser process 通过 IPC 向 renderer process 传送 stream 数据，此时导航会被确认，浏览器的各个状态将会被修改，同时为了方便 tab 关闭后快速恢复，会话记录会被存储在硬盘</li>
</ol>
<h5>跳转到别的网站</h5>
<p>如果是跳转到别的网站，在执行普通跳转流程前，还会响应 beforeunload 事件，这个事件注册在 renderer process，所以 browser process 需要检查 renderer process 是否注册了这个响应，如无必要，请勿注册。</p>
<p>如果跳转是 js 发出的，那么执行跳转就由 renderer process 触发，browser process 来执行，后续流程就是普通的跳转流程。需要注意的是，执行跳转时，会触发原网站 upload 等事件，这个由旧的 renderer process 响应，而新网站会创建一个新的 render process 处理，当旧网页全部关闭时，才会销毁旧的 renderer process</p>
<h6>Service Worker</h6>
<p>Service Worker 可以在页面加载前执行一些逻辑，甚至改变网页的内容，但是浏览器仍然把 Service Worker 实现在了 renderer process 中</p>
<h4>深入理解现代浏览器三</h4>
<h5>概述</h5>
<p>宏观介绍 renderer process 做了哪些事情。浏览器 tab 内 html、css、JavaScript 内容基本上都由 renderer process 的主线程处理，除了一些 js 代码会放在 web worker 或 service worker 内，所以浏览器主线程的核心工作就是解析 web 三件套并生成可交互的用户界面</p>
<h5>解析阶段</h5>
<p>首先 renderer process 主线程会解析 HTML 文本为 DOM（Document Object Model，文档对象模型），要把文本结构化才能继续处理。</p>
<p>对于 HTML 的 link、script、img 需要加载远程资源的，浏览器会调用 network thread 优先并行处理，但遇到 script 标签就必须停下来优先执行，因为 js 代码可能会改变任意 DOM 对象，这可能导致浏览器重新解析。如果 js 代码中没有修改 DOM 的副作用，可以添加 async， defer 标签，或则弄成 js 模块的方式，这样浏览器不必等待 js 的执行</p>
<h5>样式计算</h5>
<p>只有 DOM 是不够的，style 标签申明的样式需要作用在 DOM 上，所以基于 DOM，浏览器要生成 CSSOM，这个 CSSOM 主要基于 css 选择器（selector）确定作用节点的</p>
<h5>布局</h5>
<p>有了 DOM、CSSOM 仍然不足以绘制网页，因为仅知道结构和样式，但不知道元素的位置，这就需要生成 LayoutTree 以描述布局的结构。LayoutTree 和 DOM 结构很像，但比如 <code>display:none</code> 的元素不会出现在 LayoutTree 上，所以 LayoutTree 仅考虑渲染结构，而 DOM 是一个综合性描述结构，它不适合用来渲染</p>
<p>原文特别提到，Layout Tree 有个很大的技术难点：排版，Chrome 专门有一整个团队在攻克这个技术难题。为什么排版难：盒模型之间的碰撞、字体撑开内容导致换行，引发更大区域的的重新排版、一个盒模型撑开挤压另外一个盒模型... 布局最难的地方在于，需要对所有奇奇怪怪的布局做一个尽量合理的处理，而很多时候布局定式间的规则是相互冲突的。而且这还不考虑布局引擎的修改在数亿网页上引发 bug 的风险</p>
<h5>绘图</h5>
<p>最后一环 PaintRecord，绘图记录。它会记录元素的层级关系，以决定元素绘制的顺序。因为 LayoutTree 仅决定了物理结构，但不决定元素的上下空间结构</p>
<p>有了 DOM、CSSOM、LayoutTree、PaintRecord 之后，终于可以绘图了。然后当 HTML 变化时，重绘的代价是巨大的，因为上面的任何一步的计算结果都依赖前面一步，HTML 改变时，需要对 DOM、CSSOM、LayoutTree、PaintRecord 重新计算。</p>
<p>大部分时候浏览器都可以在 16 ms 内完成，使 FPS 保持在 60 左右，但当页面结构过于复杂，这些计算本身超过了 16 ms，或其中遇到了 js 代码的阻塞，都会导致用户感到卡顿。对于 js 卡顿可以通过 <code>requestAnimationFrame</code> 把逻辑运算分散在各帧空闲时进行，也可以独立到 web worker 里。</p>
<h5>合成</h5>
<p>绘图的步骤称为 rasterizing（光栅化）。在 Chrome 最早发布时，采用了一种较为简单的光栅化方案，即仅渲染可视区域内的像素点，当滚动后，再补充渲染当前滚动位置的像素点。这样做会导致渲染永远滞后于滚动</p>
<p>现在一般采用较为成熟的合成技术（compositing），即将渲染内容分层绘制与渲染，这可以大大提升性能，并可通过 CSS 属性 <code>will-change</code> 手动申明一个新层（不要滥用）</p>
<p>浏览器会根据 LayoutTree 分析后得到 LayerTree（层树），并根据它逐层渲染，合成层会将绘图内容切分为多个栅格并交由 GPU 渲染，因此性能会非常好</p>
</script></li></ul>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Java.html" class="navigation navigation-prev " aria-label="Previous page: Java">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Node.html" class="navigation navigation-next " aria-label="Next page: Node">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"JavaScript","level":"1.7.3","depth":2,"next":{"title":"Node","level":"1.7.4","depth":2,"path":"languages/Node.md","ref":"./languages/Node.md","articles":[]},"previous":{"title":"Java","level":"1.7.2","depth":2,"path":"languages/Java.md","ref":"./languages/Java.md","articles":[]},"dir":"ltr"},"config":{"plugins":["pageview-count","intopic-toc","expandable-chapters","advanced-emoji","-lunr","-search","search-plus","-sharing","splitter","hide-element","insert-logo","code","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"intopic-toc":{"isCollapsed":true,"isScrollspyActive":true,"label":"In this article","maxDepth":6,"mode":"nested","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","visible":true},"livereload":{},"splitter":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"pageview-count":{},"advanced-emoji":{"embedEmojis":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"insert-logo":{"style":"max-height: 120px; min-height: 120px","url":"https://ting-xin.github.io/notebook/image/wutian2.png"},"expandable-chapters":{},"search-plus":{}},"theme":"default","author":"wutian","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"notebook|blog","language":"zh-hans","gitbook":"*","description":"很菜的一个博客，或则说是笔记本，为了自己方便弄的"},"file":{"path":"languages/JavaScript.md","mtime":"2022-03-09T02:12:26.013Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-03-09T13:54:30.353Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

