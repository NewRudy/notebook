# JavaScript 高级程序设计

红宝书，久仰大名，第一次慢慢的来看看

## 1. JavaScript 简介

JavaScript的三个部分：ESMAScript（语言基础）、DOM（操作 HTML 的接口）、BOM（操作浏览器窗口的浏览器对象模型）

稍微理清了历史和一些专有名词

## 2. 在 HTML 中使用 JavaScript

如何让 JavaScript 与 HTML 页面共存，又不影响页面的呈现效果，最终的解决方案就是为 Web 增加统一的脚本支持

async：异步脚本，可选。表示应该立即下载脚本，但不妨碍页面中的其它操作，比如可以并行下载其它的资源，后续文档的加载和渲染是并行执行的

defer：延迟脚本，可选。表示脚本可以延迟到文档被完全解析和显示之后再执行，js 仅加载不执行

没有async 和 defer：浏览器会立即加载并执行相应的脚本，不等待后续加载的文档元素，读到就开始加载和执行，此举会阻塞后续文档的的加载

![在这里插入图片描述](https://ting-xin.github.io/notebook/image/c78314887538458496efc135123874fb.jpeg)

其它属性有：type、src、charset，，，

## 3. 基本概念

严格模式是为 JavaScript 定义了一种完全不同的解析与执行模型，在严格模式下，一些不确定的行为将会得到处理，一些不安全的操作也会抛出错误

基本数据类型：Undefined、Null、Boolean、Number、String、Object、Symbol（ES6)

typeof 操作符，判断变量类型的，typeof null 是 object，function 也是一种特殊的 object，

undefined 是为了正式区分空对象指针与未经初始化的变量，null 就是要给空对象指针（这也正是 null 返回 object 的原因），null == undefined，因为 undefined 派生自 null

所有类型的值都可以转为 Boolean，0 和 NaN 转化后是 false

在进行算术计算时，所有以八进制和十进制表示的数值最终都会转换成十进制数值，永远不要测试某个特定的浮点数值，0.1 + 0.2 == 0.3，浮点计算具有的通病。NaN（Not a Number）是一个特殊的数值，用来表示一个本来要返回数值的操作数为返回数值的情况，这也就可以不报错了（还不如报错呢）。NaN 与任何值都不相等，包括他自己，isNaN 来判断这个值是不是 NaN，能不能转为数值。isNaN 可以用于对象，它会首先调用对象的 valueOf() 方法，如果不行会接着调用 toString() 方法。null 数值转换的时候转为 0， undefined 转换的时候转为 NaN。Number、ParseInt、ParseFloat 有区别

ECMAScript 中的字符串是不可变的，改变变量的值其实是销毁了原来的字符串，然后重新创建了一个，所以一般效率不高。几乎每个值都有一个 toString 方法，对 null、undefined 应该是用 String() 方法

在ECMAScript 中，Object 类型是所有它的实例的基础，也就是 Object 类型所具有的任何属性和方法也同样存在于更具体的对象中，Object 的每个实例都具有下列属性和方法：

- constructor：保存着用于创建当前对象的函数
- hasOwnProperty(propertyName)：用于检查给定的属性是否在当前的对象实例中
- isPrototypeOf(object)：用于检查传入的对象是否是当前对象的原型
- propertyIsEnumberable(propertyName)：用于检查给定的属性是否能够使用 for-in 语句来枚举
- toLocaleString()：返回字符串表示，与当前的执行环境对应
- toString()、valueOf()

ECMAScript 描述了一组用于操作数据值的操作符，它能适用于很多值：++，--，+，-，~，&，|，^，<<，>>，!，&&，||，关系操作符

当对数值应用位操作符时，后台会发生如下转换过程：64位的数值被转换成32位数值，然后执行位操作，最后再将32位的结果换回64位数值，在对特殊的 NaN 和 Infinity 值应用位操作时，这两个值都会被当作0来处理

非 ~ 操作的本质，操作数的负值减一

逻辑非！ 可以应用于任何值，都会返回一个布尔值，如果操作数是一个对象，则返回 false，如果操作数是任意非0的数值，返回 false，如果操作数是 null 或者 NaN，返回 true。使用两个 ！！ 可以将这个数转换为真正对应的布尔值

逻辑与 && 在有一个操作数不布尔值的情况下，不一定返回布尔值。如果第一个数是 null，NaN，undefined，直接返回，如果第一个操作数是对象，返回第二个操作数，如果第二个操作数是对象，只有在第一个操作数为 true 的情况下返回。逻辑与操作属于短路操作，即如果第一个数能够决定结果，那么就不会再对第二个操作数求值，即如果第一个数是 false，就没继续做的必要了

逻辑与操作也是短路操作符，如果第一个数是 true，就没继续做的必要了，如果有一个操作数不是布尔值，返回值也不一定是布尔值。如果两个操作数都是 null，NaN，undefined，则返回这个，如果第一个操作数是对象，则返回第一个操作数，如果第一个操作数的求值是 false，则返回第二个操所数，如果两个数都是对象，则返回第一个操作数

任何操作数与 NaN 进行关系比较，都会返回 false，NaN < 3 和 NaN >= 3 都返回 false

相等和不相等，先比较再转换，全等和不全等，仅比较而不转换。null 和 undefined 相等，NaN 和 NaN 不相等

ECMAScript 对象的属性是没有顺序，因此通过 for-in 输出的属性名是不可预测的，如果要迭代的对象是 null 或 undefined，不执行循环

函数不存在函数签名的概念，所以不能函数重载，没有指定返回值的函数返回的是一个特殊的 undefined 值

ECMAScript 函数不介意传递进来多少个参数，也不在乎传进来的参数是什么数据类型，因为参数在内部是用一个数组表示的，在函数体内可以通过 arguments 对象访问这个参数数组，根据这个特性可以做一个重载？通过检查传入函数中参数的类型和数量并作出不同的反应模仿重载

arguments 的值永远与对应命名参数的值保持同步，但是并不共享内存空间，没有传递值的命名参数自动被赋予 undefined 值，ECMAScript 中的所有参数传递的都是值，不可能通过引用传递参数

## 4. 变量、作用域和内存问题

